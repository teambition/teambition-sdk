!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,exports,e){e(1),e(6),e(7),t.exports=e(8)},function(t,exports,e){var n;(function(t,r,o){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.0.2
	 */
(function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return"function"==typeof t}function u(t){return"object"==typeof t&&null!==t}function a(t){V=t}function c(t){Y=t}function f(){return function(){t.nextTick(v)}}function h(){return function(){G(v)}}function d(){var t=0,e=new tt(v),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function l(){var t=new MessageChannel;return t.port1.onmessage=v,function(){t.port2.postMessage(0)}}function p(){return function(){setTimeout(v,1)}}function v(){for(var t=0;X>t;t+=2){var e=rt[t],n=rt[t+1];e(n),rt[t]=void 0,rt[t+1]=void 0}X=0}function y(){try{var t=e(4);return G=t.runOnLoop||t.runOnContext,h()}catch(n){return p()}}function m(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function _(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(e){return ut.error=e,ut}}function w(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function O(t,e,n){Y(function(t){var r=!1,o=w(n,e,function(n){r||(r=!0,e!==n?P(t,n):T(t,n))},function(e){r||(r=!0,I(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,I(t,o))},t)}function x(t,e){e._state===it?T(t,e._result):e._state===st?I(t,e._result):A(e,void 0,function(e){P(t,e)},function(e){I(t,e)})}function j(t,e){if(e.constructor===t.constructor)x(t,e);else{var n=g(e);n===ut?I(t,ut.error):void 0===n?T(t,e):s(n)?O(t,e,n):T(t,e)}}function P(t,e){t===e?I(t,b()):i(e)?j(t,e):T(t,e)}function E(t){t._onerror&&t._onerror(t._result),k(t)}function T(t,e){t._state===ot&&(t._result=e,t._state=it,0!==t._subscribers.length&&Y(k,t))}function I(t,e){t._state===ot&&(t._state=st,t._result=e,Y(E,t))}function A(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+it]=n,o[i+st]=r,0===i&&t._state&&Y(k,t)}function k(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?C(n,r,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}function S(t,e){try{return t(e)}catch(n){return at.error=n,at}}function C(t,e,n,r){var o,i,u,a,c=s(n);if(c){if(o=S(n,r),o===at?(a=!0,i=o.error,o=null):u=!0,e===o)return void I(e,_())}else o=r,u=!0;e._state!==ot||(c&&u?P(e,o):a?I(e,i):t===it?T(e,o):t===st&&I(e,o))}function R(t,e){try{e(function(e){P(t,e)},function(e){I(t,e)})}catch(n){I(t,n)}}function F(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(m),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?T(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&T(n.promise,n._result))):I(n.promise,n._validationError())}function B(t){return new ct(this,t).promise}function D(t){function e(t){P(o,t)}function n(t){I(o,t)}var r=this,o=new r(m);if(!K(t))return I(o,new TypeError("You must pass an array to race.")),o;for(var i=t.length,s=0;o._state===ot&&i>s;s++)A(r.resolve(t[s]),void 0,e,n);return o}function U(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(m);return P(n,t),n}function L(t){var e=this,n=new e(m);return I(n,t),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(t){this._id=pt++,this._state=void 0,this._result=void 0,this._subscribers=[],m!==t&&(s(t)||N(),this instanceof H||z(),R(this,t))}function q(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=vt)}var W;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var G,V,J,K=W,X=0,Y=({}.toString,function(t,e){rt[X]=t,rt[X+1]=e,X+=2,2===X&&(V?V(v):J())}),Q="undefined"!=typeof window?window:void 0,Z=Q||{},tt=Z.MutationObserver||Z.WebKitMutationObserver,et="undefined"!=typeof t&&"[object process]"==={}.toString.call(t),nt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,rt=new Array(1e3);J=et?f():tt?d():nt?l():void 0===Q?y():p();var ot=void 0,it=1,st=2,ut=new M,at=new M;F.prototype._validateInput=function(t){return K(t)},F.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},F.prototype._init=function(){this._result=new Array(this.length)};var ct=F;F.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,o=0;n._state===ot&&e>o;o++)t._eachEntry(r[o],o)},F.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;u(t)?t.constructor===r&&t._state!==ot?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},F.prototype._settledAt=function(t,e,n){var r=this,o=r.promise;o._state===ot&&(r._remaining--,t===st?I(o,n):r._result[e]=n),0===r._remaining&&T(o,r._result)},F.prototype._willSettleAt=function(t,e){var n=this;A(t,void 0,function(t){n._settledAt(it,e,t)},function(t){n._settledAt(st,e,t)})};var ft=B,ht=D,dt=U,lt=L,pt=0,vt=H;H.all=ft,H.race=ht,H.resolve=dt,H.reject=lt,H._setScheduler=a,H._setAsap=c,H._asap=Y,H.prototype={constructor:H,then:function(t,e){var n=this,r=n._state;if(r===it&&!t||r===st&&!e)return this;var o=new this.constructor(m),i=n._result;if(r){var s=arguments[r-1];Y(function(){C(r,o,s,i)})}else A(n,o,t,e);return o},"catch":function(t){return this.then(null,t)}};var yt=q,mt={Promise:vt,polyfill:yt};e(5).amd?(n=function(){return mt}.call(exports,e,exports,o),!(void 0!==n&&(o.exports=n))):"undefined"!=typeof o&&o.exports?o.exports=mt:"undefined"!=typeof this&&(this.ES6Promise=mt),yt()}).call(this)}).call(exports,e(2),function(){return this}(),e(3)(t))},function(t,exports){function e(){a=!1,i.length?u=i.concat(u):c=-1,u.length&&n()}function n(){if(!a){var t=setTimeout(e);a=!0;for(var n=u.length;n;){for(i=u,u=[];++c<n;)i&&i[c].run();c=-1,n=u.length}i=null,a=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function o(){}var i,s=t.exports={},u=[],a=!1,c=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];u.push(new r(t,e)),1!==u.length||a||setTimeout(n,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,exports){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,exports){},function(t,exports){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,exports){!function(){"use strict";function t(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function e(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function r(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function o(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),o(e)}function s(t){var e=new FileReader;return e.readAsText(t),o(e)}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(l.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(l.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!l.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},l.blob?(this.blob=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=r(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=r(this);return t?t:Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function a(t){var e=t.toUpperCase();return p.indexOf(e)>-1?e:t}function c(t,e){e=e||{};var r=e.body;if(c.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,r||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",(e.headers||!this.headers)&&(this.headers=new n(e.headers)),this.method=a(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function h(t){var e=new n,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();e.append(r,o)}),e}function d(t,e){e||(e={}),this._initBody(t),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof n?e.headers:new n(e.headers),this.url=e.url||""}if(!self.fetch){n.prototype.append=function(n,r){n=t(n),r=e(r);var o=this.map[n];o||(o=[],this.map[n]=o),o.push(r)},n.prototype["delete"]=function(e){delete this.map[t(e)]},n.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},n.prototype.getAll=function(e){return this.map[t(e)]||[]},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(n,r){this.map[t(n)]=[e(r)]},n.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)};var l={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];c.prototype.clone=function(){return new c(this)},u.call(c.prototype),u.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var v=[301,302,303,307,308];d.redirect=function(t,e){if(-1===v.indexOf(e))throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})},self.Headers=n,self.Request=c,self.Response=d,self.fetch=function(t,e){return new Promise(function(n,r){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var i;i=c.prototype.isPrototypeOf(t)&&!e?t:new c(t,e);var s=new XMLHttpRequest;s.onload=function(){var t=1223===s.status?204:s.status;if(100>t||t>599)return void r(new TypeError("Network request failed"));var e={status:t,statusText:s.statusText,headers:h(s),url:o()},i="response"in s?s.response:s.responseText;n(new d(i,e))},s.onerror=function(){r(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&l.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},self.fetch.polyfill=!0}}()},function(t,exports){(function(t){!function(exports){"use strict";function t(t,n){function r(t){return this&&this.constructor===r?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=n,void(t&&e.call(this,t))):new r(t)}return n||b(t,"size",{get:v}),t.constructor=r,r.prototype=t,r}function e(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}function n(t){return this.has(t)&&(this._keys.splice(m,1),this._values.splice(m,1),this._itp.forEach(function(t){m<t[0]&&t[0]--})),m>-1}function r(t){return this.has(t)?this._values[m]:void 0}function o(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(m=t.length;m--&&!_(t[m],e););else m=t.indexOf(e);return m>-1}function i(t){return o.call(this,this._values,t)}function s(t){return o.call(this,this._keys,t)}function u(t,e){return this.has(t)?this._values[m]=e:this._values[this._keys.push(t)-1]=e,this}function a(t){return this.has(t)||this._values.push(t),this}function c(){(this._keys||0).length=this._values.length=0}function f(){return p(this._itp,this._keys)}function h(){return p(this._itp,this._values)}function d(){return p(this._itp,this._keys,this._values)}function l(){return p(this._itp,this._values,this._values)}function p(t,e,n){var r=[0],o=!1;return t.push(r),{next:function(){var i,s=r[0];return!o&&s<e.length?(i=n?[e[s],n[s]]:e[s],r[0]++):(o=!0,t.splice(t.indexOf(r),1)),{done:o,value:i}}}}function v(){return this._values.length}function y(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}}var m,b=Object.defineProperty,_=function(t,e){return isNaN(t)?isNaN(e):t===e};"undefined"==typeof WeakMap&&(exports.WeakMap=t({"delete":n,clear:c,get:r,has:s,set:u},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(exports.Map=t({"delete":n,has:s,get:r,set:u,keys:f,values:h,entries:d,forEach:y,clear:c})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(exports.Set=t({has:i,add:a,"delete":n,clear:c,keys:h,values:h,entries:l,forEach:y})),"undefined"==typeof WeakSet&&(exports.WeakSet=t({"delete":n,add:a,clear:c,has:i},!0))}("undefined"!=typeof exports&&"undefined"!=typeof t?t:window)}).call(exports,function(){return this}())},function(t,exports,e){function n(t){for(var e in t)exports.hasOwnProperty(e)||(exports[e]=t[e])}n(e(9)),n(e(12))},function(t,exports,e){"use strict";var n,r=e(10),o=["Version","Type","Id","Path1","Path2","Path3"],i=function(){function t(){this.opts={headers:{Accept:"application/json","Content-Type":"application/json"}},this.opts.credentials="include",n="https://www.teambition.com/api"}return t.prototype.setAPIHost=function(t){n=t},t.prototype.setToken=function(t){delete this.opts.credentials,this.opts.headers.Authorization="OAuth2 "+t,n="https://api.teambition.com"},t.prototype.get=function(t){var e=this.buildURI(t);return fetch(e,r.assign({method:"get"},this.opts)).then(function(t){return t.json()})},t.prototype.post=function(t,e){var n=this.buildURI(t);return fetch(n,r.assign({method:"post",body:JSON.stringify(e)},this.opts)).then(function(t){return t.json()})},t.prototype.put=function(t,e){var n=this.buildURI(t);return fetch(n,r.assign({method:"put",body:JSON.stringify(e)},this.opts)).then(function(t){return t.json()})},t.prototype["delete"]=function(t){var e=this.buildURI(t);return fetch(e,r.assign({method:"delete"},this.opts)).then(function(t){return t.json()})},t.prototype.buildURI=function(t){var e=[],i=[];r.forEach(t,function(t,n){var r=o.indexOf(n);-1!==r?e[r]=t:i.push(n+"="+t)});var s=e[0];"undefined"!=typeof s&&(e[0]="/"+s);var u=n+e.join("/");return u=i.length?u+"?"+i.join("&"):u},t}();exports.tbFetch=new i},function(t,exports,e){"use strict";var n=e(11);exports.forEach=function(t,e){var n;if(t instanceof Array){n=t.length;for(var r=0;n>r;r++)e(t[r],r)}else{var o,i=Object.keys(t);n=i.length;for(var r=0;n>r;r++)o=i[r],e(t[o],o)}},exports.assign=function(t,e){return exports.forEach(e,function(n,r){t[r]=e[r]}),t},exports.clone=function(t){if("undefined"!=typeof t&&"object"==typeof t){var e;return e=t instanceof Array?new Array:Object.create(null),exports.forEach(t,function(t,n){"object"==typeof t&&(t?e[n]=exports.clone(t):e[n]=t),e[n]=t}),e}};var r=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},o=[];exports.uuid=function(){for(var t=r()+r();-1!==o.indexOf(t);)t=r()+r();return o.push(t),t},exports.datasToSchemas=function(t,e){var r=new Array;return exports.forEach(t,function(t,o){r.push(n.setSchema(e,t))}),r}},function(t,exports,e){"use strict";var n=e(10);exports.setSchema=function(t,e){return t.$$keys.forEach(function(n){t[n]=e[n]}),t.$$data=e,n.forEach(t,function(n,r){"$$data"===r?Object.defineProperty(t,r,{enumerable:!1,configurable:!0}):"$$keys"===r?Object.defineProperty(t,r,{enumerable:!1,set:function(t){n=t},get:function(){return n}}):("undefined"==typeof e[r]&&t.$$keys.add(r),Object.defineProperty(t,r,{get:function(){return t.$$data?t.$$data[r]:void 0},set:function(e){t.$$data&&(t.$$data[r]=e,t.$$keys["delete"](r))},configurable:!0}))}),t};var r=function(){function t(){this.$$keys=new Set}return t}();exports.Schema=r},function(t,exports,e){function n(t){for(var e in t)exports.hasOwnProperty(e)||(exports[e]=t[e])}n(e(13)),n(e(19)),n(e(23))},function(t,exports,e){"use strict";var n=e(9),r=e(14);exports.UserAPI={getUserMe:function(){var t=r["default"].get();return t?new Promise(function(e,n){e(t)}):n.tbFetch.get({Type:"users",Id:"me"}).then(function(t){return r["default"].set(t)})},update:function(t){return n.tbFetch.put({Type:"users",Id:"me"},t).then(function(t){return r["default"].update(t),t})},addEmail:function(t){return n.tbFetch.post({Type:"users",Id:"email"},{email:t}).then(function(t){return r["default"].updateEmail(t),t})},bindPhone:function(t,e){return n.tbFetch.put({Type:"users",Id:"phone"},{phone:t,vcode:e}).then(function(e){r["default"].update({phone:t})})}}},function(t,exports,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=e(15),o=function(t){function e(){t.apply(this,arguments),this.namespace="user:me"}return n(e,t),e.prototype.set=function(t){return this.setOne(this.namespace,t)},e.prototype.get=function(){return this.getOne(this.namespace)},e.prototype.update=function(t){this.updateOne(this.namespace,t)},e.prototype.updateEmail=function(t){this.updateOne(this.namespace,{emails:t})},e}(r["default"]);Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=new o},function(t,exports,e){"use strict";var n=e(16),r=function(){function t(){}return t.prototype.setOne=function(t,e){return n["default"].storeOne(t,e),n["default"].getOne(t)},t.prototype.setCollection=function(t,e){return n["default"].storeCollection(t,e),n["default"].getOne(t)},t.prototype.getOne=function(t){return n["default"].getOne(t)},t.prototype.updateOne=function(t,e){var r=n["default"].getOne(t);r&&n["default"].updateOne(t,e)},t.prototype.removeOne=function(t){return n["default"]["delete"](t)},t}();Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=r},function(t,exports,e){"use strict";var n=e(10),r=e(17),o=e(18),i=function(){function t(){this.data={},this.timeoutIndex={},this.typeIndex={},this.dataMaps={},this.collectionIndex={}}return t.prototype.storeOne=function(t,e,n){var o=this;if(void 0===n&&(n=0),!this.data[t]){var i=this.data[t]=e;if(n&&"number"==typeof n){var s=window.setTimeout(function(){delete o.data[t]},n);this.timeoutIndex[t]={timer:s,begin:Date.now(),expire:n}}r.trackObject(i),this.typeIndex[t]="object"}},t.prototype.storeCollection=function(t,e,o){var i=this;void 0===o&&(o=0);var s=this.collectionIndex[t]=[];if(!this.data[t]){var u=[];if(n.forEach(e,function(e,n){var r=i.getOne(e._id);r?u.push(r):(u.push(e),i.storeOne(e._id,e));var o=i.dataMaps[e._id];o?o.push(t):i.dataMaps[e._id]=[t],s.push(e._id)}),this.data[t]=u,o&&"number"==typeof o){var a=window.setTimeout(function(){delete i.data[t]},o);this.timeoutIndex[t]={timer:a,begin:Date.now(),expire:o}}r.trackCollection(t,u),this.typeIndex[t]="collection"}},t.prototype.updateCollection=function(t,e){var r=this,o=this.data[t];if(o&&e instanceof Array){var i=this.collectionIndex[t];n.forEach(e,function(t,e){var s=o[e];if(s._id===t._id)n.assign(s,t);else{var u=t._id;if(-1===i.indexOf(u))o.splice(e,0,t),i.splice(e,0,u),r.storeOne(t._id,t);else{var a=i.indexOf(u,e);o.splice(a,1),i.splice(a,1),o.splice(e,0,t),i.splice(e,0,u)}}})}},t.prototype.updateOne=function(t,e,r){var o=this;void 0===r&&(r=0);var i=n.clone(e),s=this.data[t];if(!s)throw"Data is not existed, can not update";if("object"!=typeof e)throw"Patch target should be Object";if(s=n.assign(s,i),r&&"number"==typeof r){var u=this.timeoutIndex[t].timer;this.timeoutIndex[t].expire=r,this.timeoutIndex[t].begin=Date.now(),window.clearTimeout(u),window.setTimeout(function(){delete o.data[t]},r)}this.data[t]=s},t.prototype.getOne=function(t){var e,i=this.data[t];return i?("collection"===this.typeIndex[t]?(e=n.clone(i),r.trackOne(e,t)):(e=new o.BaseObject(i),r.trackOne(e)),e):!1},t.prototype["delete"]=function(t){var e=this;delete this.data[t];var r=this.dataMaps[t];r&&r.length&&n.forEach(r,function(n){var r=e.collectionIndex[n],o=e.data[n],i=r.indexOf(t);r.splice(i,1),o.splice(i,1)})},t.prototype.getExpire=function(t){var e=this.timeoutIndex[t];return e.begin-e.expire},t}();Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=new i},function(t,exports,e){"use strict";var n=e(10),r={};exports.trackOne=function(t,e){var n=e?e:t._id;n&&-1===r[n].indexOf(t)&&r[n].push(t)},exports.trackObject=function(t){var e=t._id;e&&(r[e]=[],n.forEach(t,function(o,i){Object.defineProperty(t,i,{set:function(t){n.forEach(r[e],function(e){e[i]=t}),o=t},get:function(){return o},enumerable:!0,configurable:!0})}))},exports.trackCollection=function(t,e){if(!(e instanceof Array))throw new Error("Could not track a none array object");r[t]=[];var o=e.splice,i=e.push;e.splice=function(){return n.forEach(r[t],function(t){o.apply(t,arguments)}),o.apply(e,arguments)},e.push=function(){return n.forEach(r[t],function(t){i.apply(t,arguments)}),i.apply(e,arguments)}}},function(t,exports,e){"use strict";var n=e(10),r=1;exports.ObjectIndex={};var o=function(){function t(t){var e=this;this.$id="$"+r;var o=n.clone(t),i=exports.ObjectIndex["$"+r]={dataKeys:[]};n.forEach(o,function(t,n){i.dataKeys.push(n),e[n]=t}),r++}return t}();exports.BaseObject=o},function(t,exports,e){"use strict";var n=e(9),r=e(20),o=e(21);exports.OrganizationAPI={getOrgs:function(){var t=r["default"].getAll();return t?Promise.resolve(t):n.tbFetch.get({Type:"organizations"}).then(function(t){return r["default"].setAll(t)})},getOne:function(t){var e=r["default"].get(t);return e?Promise.resolve(e):n.tbFetch.get({Type:"organizations",Id:t}).then(function(t){return r["default"].set(t)})},getMembers:function(t){var e=o["default"].getOrgMembers(t);return e?Promise.resolve(e):n.tbFetch.get({Version:"V2",Type:"organizations",Id:t,Path1:"members"}).then(function(e){return o["default"].addOrgMembers(t,e)})}}},function(t,exports,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=e(15),o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.getAll=function(){return this.getOne("organization")},e.prototype.get=function(t){return this.getOne(t)},e.prototype.setAll=function(t){return this.setCollection("organization",t)},e.prototype.set=function(t){return this.setOne(t._id,t)},e}(r["default"]);Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=new o},function(t,exports,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=e(15),o=e(10),i=e(22),s=e(11),u=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.addProjectMembers=function(t,e){var n=[];return o.forEach(e,function(t){n.push(s.setSchema(new i["default"],t))}),this.setCollection("members:"+t,n),n},e.prototype.getProjectMembers=function(t){return this.getOne("members:"+t)},e.prototype.removeMember=function(t){this.removeOne(t)},e.prototype.addOrgMembers=function(t,e){var n=[];return o.forEach(e,function(t){n.push(s.setSchema(new i["default"],t))}),this.setCollection("members:"+t,n),n},e.prototype.getOrgMembers=function(t){return this.getOne("members:"+t)},e}(r["default"]);Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=new u},function(t,exports,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=e(11),o=function(t){function e(){t.apply(this,arguments),this._id=void 0,this._boundToObjectId=void 0,this.boundToObjectType=void 0,this._roleId=void 0,this.visited=void 0,this.joined=void 0,this.pushStatus=void 0,this.nickname=void 0,this.nicknamePy=void 0,this.nicknamePinyin=void 0,this.hasVisited=void 0,this._memberId=void 0,this.phone=void 0,this.location=void 0,this.website=void 0,this.latestActived=void 0,this.isActive=void 0,this.email=void 0,this.name=void 0,this.avatarUrl=void 0,this.title=void 0,this.pinyin=void 0,this.py=void 0}return n(e,t),e}(r.Schema);Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=o},function(t,exports,e){"use strict";var n=e(9),r=e(21),o=e(24);exports.ProjectAPI={getMembers:function(t){var e=r["default"].getProjectMembers(t);return e?new Promise(function(t,n){t(e)}):n.tbFetch.get({Type:"projects",Id:t,Path1:"members"}).then(function(e){return r["default"].addProjectMembers(t,e)})},deleteMember:function(t){return n.tbFetch["delete"]({Type:"members",Id:t}).then(function(){r["default"].removeMember(t)})},getAll:function(){var t=o["default"].getProjects();return t?new Promise(function(e,n){e(t)}):n.tbFetch.get({Type:"projects"}).then(function(t){return o["default"].addProjects(t)})}}},function(t,exports,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=e(15),o=e(10),i=e(25),s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.addProjects=function(t){var e=o.datasToSchemas(t,new i["default"]);return this.setCollection("projects",e),e},e.prototype.getProjects=function(){return this.getOne("projects")},e}(r["default"]);Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=new s},function(t,exports,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=e(11),o=function(t){function e(){t.apply(this,arguments),this._id=void 0,this.name=void 0,this._creatorId=void 0,this.logo=void 0,this.py=void 0,this.pinyin=void 0,this.description=void 0,this.category=void 0,this._organizationId=void 0,this.navigation=void 0,this.visibility=void 0,this.created=void 0,this.updated=void 0,this.isArchived=void 0,this.inviteLink=void 0,this.isStar=void 0,this.hasRight=void 0,this.hasOrgRight=void 0,this.organization=void 0,this.forksCount=void 0,this.tasksCount=void 0,this.postsCount=void 0,this.eventsCount=void 0,this.worksCount=void 0,this.tagsCount=void 0,this._defaultRoleId=void 0,this.creator=void 0,this.unreadCount=void 0,this.unreadMessageCount=void 0,this.pushStatus=void 0,this.canQuit=void 0,this.canDelete=void 0,this.canArchive=void 0,this.canTransfer=void 0,this._roleId=void 0,this.link=void 0,this.mobileInviteLink=void 0,this.signCode=void 0,this.starsCount=void 0,this._rootCollectionId=void 0,this._defaultCollectionId=void 0,this.shortLink=void 0,this.calLink=void 0,this.taskCalLink=void 0,this._orgRoleId=void 0}return n(e,t),e}(r.Schema);Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=o}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZGlzdC90YnNkay5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGM4ZjVlNzc1NDIyYTFmMGQwMzBhIiwid2VicGFjazovLy8uL34vZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLWRlZmluZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3doYXR3Zy1mZXRjaC9mZXRjaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2VzNi1jb2xsZWN0aW9ucy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwLnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9mZXRjaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjaGVtYXMvc2NoZW1hLnRzIiwid2VicGFjazovLy8uL3NyYy9hcGlzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9hcGlzL3VzZXJfYXBpLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvdXNlcl9tb2RlbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL21vZGVsLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvZGF0YWJhc2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL3RyYWNrLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvdW5pb25fb2JqZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9hcGlzL29yZ2FuaXphdGlvbl9hcGkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9vcmdhbml6YXRpb25fbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9tZW1iZXJfbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjaGVtYXMvbWVtYmVyX3NjaGVtYS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBpcy9wcm9qZWN0X2FwaS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL3Byb2plY3RfbW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjaGVtYXMvcHJvamVjdF9zY2hlbWEudHMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJwcm9jZXNzIiwiZ2xvYmFsIiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uIiwieCIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbiIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNNYXliZVRoZW5hYmxlIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlciIsInNjaGVkdWxlRm4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcCIsImFzYXBGbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrIiwibmV4dFRpY2siLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2giLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lciIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlciIsIml0ZXJhdGlvbnMiLCJvYnNlcnZlciIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciIsIm5vZGUiLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwib2JzZXJ2ZSIsImNoYXJhY3RlckRhdGEiLCJkYXRhIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsIk1lc3NhZ2VDaGFubmVsIiwicG9ydDEiLCJvbm1lc3NhZ2UiLCJwb3J0MiIsInBvc3RNZXNzYWdlIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiaSIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4iLCJjYWxsYmFjayIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZSIsImFyZyIsInVuZGVmaW5lZCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgiLCJ2ZXJ0eCIsInJ1bk9uTG9vcCIsInJ1bk9uQ29udGV4dCIsImUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50IiwiVHlwZUVycm9yIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbiIsInByb21pc2UiLCJ0aGVuIiwiZXJyb3IiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4iLCJ2YWx1ZSIsImZ1bGZpbGxtZW50SGFuZGxlciIsInJlamVjdGlvbkhhbmRsZXIiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUiLCJ0aGVuYWJsZSIsInNlYWxlZCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsIiwicmVhc29uIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0IiwiX2xhYmVsIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUiLCJfc3RhdGUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQiLCJfcmVzdWx0IiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlIiwibWF5YmVUaGVuYWJsZSIsImNvbnN0cnVjdG9yIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbiIsIl9vbmVycm9yIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkciLCJfc3Vic2NyaWJlcnMiLCJsZW5ndGgiLCJwYXJlbnQiLCJjaGlsZCIsIm9uRnVsZmlsbG1lbnQiLCJvblJlamVjdGlvbiIsInN1YnNjcmliZXJzIiwic2V0dGxlZCIsImRldGFpbCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QiLCJ0aGlzIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2giLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IiLCJzdWNjZWVkZWQiLCJmYWlsZWQiLCJoYXNDYWxsYmFjayIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlIiwicmVzb2x2ZXIiLCJsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvciIsIkNvbnN0cnVjdG9yIiwiaW5wdXQiLCJlbnVtZXJhdG9yIiwiX2luc3RhbmNlQ29uc3RydWN0b3IiLCJfdmFsaWRhdGVJbnB1dCIsIl9pbnB1dCIsIl9yZW1haW5pbmciLCJfaW5pdCIsIl9lbnVtZXJhdGUiLCJfdmFsaWRhdGlvbkVycm9yIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGwiLCJlbnRyaWVzIiwibGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlIiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5IiwicmVzb2x2ZSIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUiLCJvYmplY3QiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UiLCJfaWQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkY291bnRlciIsImxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGwiLCJsb2NhbCIsInNlbGYiLCJGdW5jdGlvbiIsIkVycm9yIiwiUCIsIlByb21pc2UiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhc3QiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkiLCJBcnJheSIsImlzQXJyYXkiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93Iiwid2luZG93IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwiLCJNdXRhdGlvbk9ic2VydmVyIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIiLCJVaW50OENsYW1wZWRBcnJheSIsImltcG9ydFNjcmlwdHMiLCJfZWFjaEVudHJ5IiwiZW50cnkiLCJfc2V0dGxlZEF0IiwiX3dpbGxTZXR0bGVBdCIsInN0YXRlIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQiLCJhbGwiLCJyYWNlIiwicmVqZWN0IiwiX3NldFNjaGVkdWxlciIsIl9zZXRBc2FwIiwiX2FzYXAiLCJyZXN1bHQiLCJhcmd1bWVudHMiLCJjYXRjaCIsImxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2UiLCJwb2x5ZmlsbCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJjb25jYXQiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJsZW4iLCJydW4iLCJjbGVhclRpbWVvdXQiLCJJdGVtIiwiZnVuIiwiYXJyYXkiLCJub29wIiwiYXJncyIsInB1c2giLCJhcHBseSIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsImJpbmRpbmciLCJuYW1lIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIiwiY2hpbGRyZW4iLCJub3JtYWxpemVOYW1lIiwiU3RyaW5nIiwidGVzdCIsInRvTG93ZXJDYXNlIiwibm9ybWFsaXplVmFsdWUiLCJIZWFkZXJzIiwiaGVhZGVycyIsIm1hcCIsImZvckVhY2giLCJhcHBlbmQiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiY29uc3VtZWQiLCJib2R5IiwiYm9keVVzZWQiLCJmaWxlUmVhZGVyUmVhZHkiLCJyZWFkZXIiLCJvbmxvYWQiLCJvbmVycm9yIiwicmVhZEJsb2JBc0FycmF5QnVmZmVyIiwiYmxvYiIsIkZpbGVSZWFkZXIiLCJyZWFkQXNBcnJheUJ1ZmZlciIsInJlYWRCbG9iQXNUZXh0IiwicmVhZEFzVGV4dCIsIkJvZHkiLCJfaW5pdEJvZHkiLCJfYm9keUluaXQiLCJfYm9keVRleHQiLCJzdXBwb3J0IiwiQmxvYiIsImlzUHJvdG90eXBlT2YiLCJfYm9keUJsb2IiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiX2JvZHlGb3JtRGF0YSIsImFycmF5QnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJyZWplY3RlZCIsInRleHQiLCJkZWNvZGUiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwibm9ybWFsaXplTWV0aG9kIiwibWV0aG9kIiwidXBjYXNlZCIsInRvVXBwZXJDYXNlIiwibWV0aG9kcyIsImluZGV4T2YiLCJSZXF1ZXN0Iiwib3B0aW9ucyIsInVybCIsImNyZWRlbnRpYWxzIiwibW9kZSIsInJlZmVycmVyIiwiZm9ybSIsInRyaW0iLCJzcGxpdCIsImJ5dGVzIiwic2hpZnQiLCJyZXBsYWNlIiwiam9pbiIsImRlY29kZVVSSUNvbXBvbmVudCIsInhociIsImhlYWQiLCJwYWlycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsImhlYWRlciIsImtleSIsIlJlc3BvbnNlIiwiYm9keUluaXQiLCJ0eXBlIiwic3RhdHVzIiwib2siLCJzdGF0dXNUZXh0IiwiZmV0Y2giLCJsaXN0IiwiZ2V0IiwidmFsdWVzIiwiZ2V0QWxsIiwiaGFzIiwiaGFzT3duUHJvcGVydHkiLCJzZXQiLCJ0aGlzQXJnIiwiY2xvbmUiLCJyZXNwb25zZSIsInJlZGlyZWN0U3RhdHVzZXMiLCJyZWRpcmVjdCIsIlJhbmdlRXJyb3IiLCJsb2NhdGlvbiIsImluaXQiLCJyZXNwb25zZVVSTCIsImdldFJlc3BvbnNlSGVhZGVyIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwicmVzcG9uc2VUZXh0Iiwib3BlbiIsIndpdGhDcmVkZW50aWFscyIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiY3JlYXRlQ29sbGVjdGlvbiIsInByb3RvIiwib2JqZWN0T25seSIsIkNvbGxlY3Rpb24iLCJhIiwiX2tleXMiLCJfdmFsdWVzIiwiX2l0cCIsImRlZmluZVByb3BlcnR5Iiwic2hhcmVkU2l6ZSIsImFkZCIsInNoYXJlZERlbGV0ZSIsInNwbGljZSIsInNoYXJlZEdldCIsImlzIiwic2V0SGFzIiwibWFwSGFzIiwic2hhcmVkU2V0Iiwic2hhcmVkQWRkIiwic2hhcmVkQ2xlYXIiLCJzaGFyZWRLZXlzIiwic2hhcmVkSXRlcmF0b3IiLCJzaGFyZWRWYWx1ZXMiLCJtYXBFbnRyaWVzIiwic2V0RW50cmllcyIsIml0cCIsImFycmF5MiIsImRvbmUiLCJuZXh0IiwidiIsImsiLCJzaGFyZWRGb3JFYWNoIiwiY29udGV4dCIsIml0IiwiciIsImIiLCJpc05hTiIsIldlYWtNYXAiLCJkZWxldGUiLCJjbGVhciIsIk1hcCIsImtleXMiLCJTZXQiLCJXZWFrU2V0IiwiX19leHBvcnQiLCJhcGlIb3N0IiwiaW5kZXhfMSIsImFwaVBhdGgiLCJGZXRjaCIsIm9wdHMiLCJBY2NlcHQiLCJDb250ZW50LVR5cGUiLCJzZXRBUElIb3N0IiwiaG9zdCIsInNldFRva2VuIiwidG9rZW4iLCJBdXRob3JpemF0aW9uIiwiYnVpbGRVUkkiLCJhc3NpZ24iLCJwb3N0Iiwic3RyaW5naWZ5IiwicHV0IiwicGF0aCIsInVyaXMiLCJxdWVyeXMiLCJ2YWwiLCJwb3NpdGlvbiIsInRiRmV0Y2giLCJzY2hlbWFfMSIsInRhcmdldCIsImVhY2hGdW5jIiwib3JpZ2luIiwiY3JlYXRlIiwiczQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzdWJzdHJpbmciLCJ1dWlkU3RhY2siLCJ1dWlkIiwiVVVJRCIsImRhdGFzVG9TY2hlbWFzIiwiZGF0YXMiLCJTY2hlbWEiLCJpbmRleCIsInNldFNjaGVtYSIsInV0aWxzXzEiLCIkJGtleXMiLCIkJGRhdGEiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwibmV3VmFsIiwiZmV0Y2hfMSIsInVzZXJfbW9kZWxfMSIsIlVzZXJBUEkiLCJnZXRVc2VyTWUiLCJjYWNoZSIsIlR5cGUiLCJJZCIsInVzZXJNZSIsInVwZGF0ZSIsInBhdGNoIiwiYWRkRW1haWwiLCJlbWFpbCIsInVwZGF0ZUVtYWlsIiwiYmluZFBob25lIiwicGhvbmUiLCJ2Y29kZSIsIl9fZXh0ZW5kcyIsImQiLCJfXyIsIm1vZGVsXzEiLCJVc2VyTW9kZWwiLCJfc3VwZXIiLCJuYW1lc3BhY2UiLCJzZXRPbmUiLCJnZXRPbmUiLCJ1cGRhdGVPbmUiLCJlbWFpbHMiLCJkYXRhYmFzZV8xIiwiTW9kZWwiLCJzdG9yZU9uZSIsInNldENvbGxlY3Rpb24iLCJzdG9yZUNvbGxlY3Rpb24iLCJDYWNoZSIsInJlbW92ZU9uZSIsInRyYWNrXzEiLCJ1bmlvbl9vYmplY3RfMSIsIkRhdGFCYXNlIiwidGltZW91dEluZGV4IiwidHlwZUluZGV4IiwiZGF0YU1hcHMiLCJjb2xsZWN0aW9uSW5kZXgiLCJleHBpcmUiLCJfdGhpcyIsInRpbWVyIiwiYmVnaW4iLCJEYXRlIiwibm93IiwidHJhY2tPYmplY3QiLCJjb2xsZWN0aW9uIiwiaW5kZXhlcyIsIm1hcHMiLCJ0cmFja0NvbGxlY3Rpb24iLCJ1cGRhdGVDb2xsZWN0aW9uIiwiaW5kZXhzIiwib2xkRWxlIiwidGFyZ2V0SWQiLCJvbGRJbmRleCIsIl9wYXRjaCIsInRyYWNrT25lIiwiQmFzZU9iamVjdCIsImdldEV4cGlyZSIsInRpbWVySW5kZXgiLCJ0cmFja0luZGV4IiwibmV3VmFsdWUiLCJ0cmFja1ZhbCIsIiRpZCIsIk9iamVjdEluZGV4Iiwib2JqZWN0SW5kZXgiLCJkYXRhS2V5cyIsIm9yZ2FuaXphdGlvbl9tb2RlbF8xIiwibWVtYmVyX21vZGVsXzEiLCJPcmdhbml6YXRpb25BUEkiLCJnZXRPcmdzIiwib3JnYW5pemF0aW9ucyIsInNldEFsbCIsIm9yZ2FuaXphdGlvbklkIiwib3JnYW5pemF0aW9uIiwiZ2V0TWVtYmVycyIsImdldE9yZ01lbWJlcnMiLCJWZXJzaW9uIiwiUGF0aDEiLCJtZW1iZXJzIiwiYWRkT3JnTWVtYmVycyIsIk9yZ2FuaXphdGlvbk1vZGVsIiwibWVtYmVyX3NjaGVtYV8xIiwiTWVtYmVyTW9kZWwiLCJhZGRQcm9qZWN0TWVtYmVycyIsInByb2plY3RJZCIsIm1lbWJlciIsImdldFByb2plY3RNZW1iZXJzIiwicmVtb3ZlTWVtYmVyIiwibWVtYmVySWQiLCJNZW1iZXIiLCJfYm91bmRUb09iamVjdElkIiwiYm91bmRUb09iamVjdFR5cGUiLCJfcm9sZUlkIiwidmlzaXRlZCIsImpvaW5lZCIsInB1c2hTdGF0dXMiLCJuaWNrbmFtZSIsIm5pY2tuYW1lUHkiLCJuaWNrbmFtZVBpbnlpbiIsImhhc1Zpc2l0ZWQiLCJfbWVtYmVySWQiLCJ3ZWJzaXRlIiwibGF0ZXN0QWN0aXZlZCIsImlzQWN0aXZlIiwiYXZhdGFyVXJsIiwicGlueWluIiwicHkiLCJwcm9qZWN0X21vZGVsXzEiLCJQcm9qZWN0QVBJIiwiZGVsZXRlTWVtYmVyIiwiZ2V0UHJvamVjdHMiLCJwcm9qZWN0cyIsImFkZFByb2plY3RzIiwicHJvamVjdF9zY2hlbWFfMSIsIlByb2plY3RNb2RlbCIsIlByb2plY3QiLCJfY3JlYXRvcklkIiwibG9nbyIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJfb3JnYW5pemF0aW9uSWQiLCJuYXZpZ2F0aW9uIiwidmlzaWJpbGl0eSIsImNyZWF0ZWQiLCJ1cGRhdGVkIiwiaXNBcmNoaXZlZCIsImludml0ZUxpbmsiLCJpc1N0YXIiLCJoYXNSaWdodCIsImhhc09yZ1JpZ2h0IiwiZm9ya3NDb3VudCIsInRhc2tzQ291bnQiLCJwb3N0c0NvdW50IiwiZXZlbnRzQ291bnQiLCJ3b3Jrc0NvdW50IiwidGFnc0NvdW50IiwiX2RlZmF1bHRSb2xlSWQiLCJjcmVhdG9yIiwidW5yZWFkQ291bnQiLCJ1bnJlYWRNZXNzYWdlQ291bnQiLCJjYW5RdWl0IiwiY2FuRGVsZXRlIiwiY2FuQXJjaGl2ZSIsImNhblRyYW5zZmVyIiwibGluayIsIm1vYmlsZUludml0ZUxpbmsiLCJzaWduQ29kZSIsInN0YXJzQ291bnQiLCJfcm9vdENvbGxlY3Rpb25JZCIsIl9kZWZhdWx0Q29sbGVjdGlvbklkIiwic2hvcnRMaW5rIiwiY2FsTGluayIsInRhc2tDYWxMaW5rIiwiX29yZ1JvbGVJZCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsUUFBU0gsR0FFL0JBLEVBQW9CLEdBQ3BCQSxFQUFvQixHQUNwQkEsRUFBb0IsR0FDcEJJLEVBQU9ELFFBQVVILEVBQW9CLElBS2hDLFNBQVNJLEVBQVFELFFBQVNILEdBRS9CLEdBQWdCVyxJRXhEakIsU0FBQUMsRUFBQUMsRUFBQVQ7Ozs7Ozs7Q0FRQSxXQUNBLFlBQ0EsU0FBQVUsR0FBQUMsR0FDQSx3QkFBQUEsSUFBQSxnQkFBQUEsSUFBQSxPQUFBQSxFQUdBLFFBQUFDLEdBQUFELEdBQ0Esd0JBQUFBLEdBR0EsUUFBQUUsR0FBQUYsR0FDQSxzQkFBQUEsSUFBQSxPQUFBQSxFQWtDQSxRQUFBRyxHQUFBQyxHQUNBQyxFQUFBRCxF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LFFBQUEzZSxPQUNBbUQsS0FBQXliLFdBQUE1ZSxPQUNBbUQsS0FBQTBiLFdBQUE3ZSxPQUNBbUQsS0FBQTJiLE9BQUE5ZSxPQUNBbUQsS0FBQTRiLFNBQUEvZSxPQUNBbUQsS0FBQTZiLFlBQUFoZixPQUNBbUQsS0FBQXFZLGFBQUF4YixPQUNBbUQsS0FBQThiLFdBQUFqZixPQUNBbUQsS0FBQStiLFdBQUFsZixPQUNBbUQsS0FBQWdjLFdBQUFuZixPQUNBbUQsS0FBQWljLFlBQUFwZixPQUNBbUQsS0FBQWtjLFdBQUFyZixPQUNBbUQsS0FBQW1jLFVBQUF0ZixPQUNBbUQsS0FBQW9jLGVBQUF2ZixPQUNBbUQsS0FBQXFjLFFBQUF4ZixPQUNBbUQsS0FBQXNjLFlBQUF6ZixPQUNBbUQsS0FBQXVjLG1CQUFBMWYsT0FDQW1ELEtBQUEyWixXQUFBOWMsT0FDQW1ELEtBQUF3YyxRQUFBM2YsT0FDQW1ELEtBQUF5YyxVQUFBNWYsT0FDQW1ELEtBQUEwYyxXQUFBN2YsT0FDQW1ELEtBQUEyYyxZQUFBOWYsT0FDQW1ELEtBQUF3WixRQUFBM2MsT0FDQW1ELEtBQUE0YyxLQUFBL2YsT0FDQW1ELEtBQUE2YyxpQkFBQWhnQixPQUNBbUQsS0FBQThjLFNBQUFqZ0IsT0FDQW1ELEtBQUErYyxXQUFBbGdCLE9BQ0FtRCxLQUFBZ2Qsa0JBQUFuZ0IsT0FDQW1ELEtBQUFpZCxxQkFBQXBnQixPQUNBbUQsS0FBQWtkLFVBQUFyZ0IsT0FDQW1ELEtBQUFtZCxRQUFBdGdCLE9BQ0FtRCxLQUFBb2QsWUFBQXZnQixPQUNBbUQsS0FBQXFkLFdBQUF4Z0IsT0FFQSxNQWpEQTRYLEdBQUFzRyxFQUFBakcsR0FpREFpRyxHQUNDOUksRUFBQWUsT0FDRHhRLFFBQUE2TCxlQUFBMVUsUUFBQSxjQUE4Q2tFLE9BQUEsSUFDOUNsRSxtQkFBQW9oQiIsImZpbGUiOiJkaXN0L3Ric2RrLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcmVxdWlyZTt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCwgbW9kdWxlKSB7LyohXG5cdCAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cblx0ICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcblx0ICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuXHQgKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vamFrZWFyY2hpYmFsZC9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAdmVyc2lvbiAgIDMuMC4yXG5cdCAqL1xuXHRcblx0KGZ1bmN0aW9uKCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG5cdCAgICBpZiAoIUFycmF5LmlzQXJyYXkpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQ7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbl0gPSBjYWxsYmFjaztcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKyAxXSA9IGFyZztcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArPSAyO1xuXHQgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9PT0gMikge1xuXHQgICAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cblx0ICAgICAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuXHQgICAgICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cblx0ICAgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4obGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2goKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcChhc2FwRm4pIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBhc2FwRm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IHx8IHt9O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlID0gdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblx0XG5cdCAgICAvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0ICAgICAgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cdFxuXHQgICAgLy8gbm9kZVxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCkge1xuXHQgICAgICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcblx0ICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdmVydHhcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCkge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG5cdCAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIG5vZGUuZGF0YSA9IChpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMik7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gd2ViIHdvcmtlclxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuXHQgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaDtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCkge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gsIDEpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2goKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbjsgaSs9Mikge1xuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXTtcblx0ICAgICAgICB2YXIgYXJnID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV07XG5cdFxuXHQgICAgICAgIGNhbGxiYWNrKGFyZyk7XG5cdFxuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSsxXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgciA9IHJlcXVpcmU7XG5cdCAgICAgICAgdmFyIHZlcnR4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIoKTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2g7XG5cdCAgICAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuXHQgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2soKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgXCJmdW5jdGlvblwiID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AoKSB7fVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICAgPSB2b2lkIDA7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEID0gMTtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCAgPSAyO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKHByb21pc2UpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuXHQgICAgICB9IGNhdGNoKGVycm9yKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1I7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG5cdCAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgIHJldHVybiBlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuKSB7XG5cdCAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbihwcm9taXNlKSB7XG5cdCAgICAgICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuXHQgICAgICAgIHZhciBlcnJvciA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuXHQgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcblx0ICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuXHRcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cdFxuXHQgICAgICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG5cdCAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIHByb21pc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG5cdCAgICAgIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpIHtcblx0ICAgICAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YXIgdGhlbiA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4obWF5YmVUaGVuYWJsZSk7XG5cdFxuXHQgICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoZW4gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih0aGVuKSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpKTtcblx0ICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcblx0ICAgICAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcblx0ICAgICAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG5cdFxuXHQgICAgICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcblx0ICAgICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQ7XG5cdFxuXHQgICAgICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcHJvbWlzZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cblx0ICAgICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRDtcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXHRcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG5cdCAgICAgIHZhciBzdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG5cdCAgICAgIHZhciBsZW5ndGggPSBzdWJzY3JpYmVycy5sZW5ndGg7XG5cdFxuXHQgICAgICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXHRcblx0ICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuXHQgICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcblx0ICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURURdICA9IG9uUmVqZWN0aW9uO1xuXHRcblx0ICAgICAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcGFyZW50KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSkge1xuXHQgICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcblx0ICAgICAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblx0XG5cdCAgICAgIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHsgcmV0dXJuOyB9XG5cdFxuXHQgICAgICB2YXIgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG5cdCAgICAgICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcblx0ICAgICAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblx0XG5cdCAgICAgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCkge1xuXHQgICAgICB0aGlzLmVycm9yID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuXHQgICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1I7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG5cdCAgICAgIHZhciBoYXNDYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbihjYWxsYmFjayksXG5cdCAgICAgICAgICB2YWx1ZSwgZXJyb3IsIHN1Y2NlZWRlZCwgZmFpbGVkO1xuXHRcblx0ICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7XG5cdCAgICAgICAgdmFsdWUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblx0XG5cdCAgICAgICAgaWYgKHZhbHVlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IpIHtcblx0ICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG5cdCAgICAgICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuXHQgICAgICAgICAgdmFsdWUgPSBudWxsO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duKCkpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFsdWUgPSBkZXRhaWw7XG5cdCAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG5cdCAgICAgICAgLy8gbm9vcFxuXHQgICAgICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSl7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuXHQgICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cdFxuXHQgICAgICBlbnVtZXJhdG9yLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG5cdCAgICAgIGVudW1lcmF0b3IucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0XG5cdCAgICAgIGlmIChlbnVtZXJhdG9yLl92YWxpZGF0ZUlucHV0KGlucHV0KSkge1xuXHQgICAgICAgIGVudW1lcmF0b3IuX2lucHV0ICAgICA9IGlucHV0O1xuXHQgICAgICAgIGVudW1lcmF0b3IubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcblx0ICAgICAgICBlbnVtZXJhdG9yLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cdFxuXHQgICAgICAgIGVudW1lcmF0b3IuX2luaXQoKTtcblx0XG5cdCAgICAgICAgaWYgKGVudW1lcmF0b3IubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKGVudW1lcmF0b3IucHJvbWlzZSwgZW51bWVyYXRvci5fcmVzdWx0KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZW51bWVyYXRvci5sZW5ndGggPSBlbnVtZXJhdG9yLmxlbmd0aCB8fCAwO1xuXHQgICAgICAgICAgZW51bWVyYXRvci5fZW51bWVyYXRlKCk7XG5cdCAgICAgICAgICBpZiAoZW51bWVyYXRvci5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwoZW51bWVyYXRvci5wcm9taXNlLCBlbnVtZXJhdG9yLl9yZXN1bHQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QoZW51bWVyYXRvci5wcm9taXNlLCBlbnVtZXJhdG9yLl92YWxpZGF0aW9uRXJyb3IoKSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRlSW5wdXQgPSBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5KGlucHV0KTtcblx0ICAgIH07XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl92YWxpZGF0aW9uRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcjtcblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgbGVuZ3RoICA9IGVudW1lcmF0b3IubGVuZ3RoO1xuXHQgICAgICB2YXIgcHJvbWlzZSA9IGVudW1lcmF0b3IucHJvbWlzZTtcblx0ICAgICAgdmFyIGlucHV0ICAgPSBlbnVtZXJhdG9yLl9pbnB1dDtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBlbnVtZXJhdG9yLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24oZW50cnksIGkpIHtcblx0ICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXHQgICAgICB2YXIgYyA9IGVudW1lcmF0b3IuX2luc3RhbmNlQ29uc3RydWN0b3I7XG5cdFxuXHQgICAgICBpZiAobGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoZW50cnkpKSB7XG5cdCAgICAgICAgaWYgKGVudHJ5LmNvbnN0cnVjdG9yID09PSBjICYmIGVudHJ5Ll9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgICAgZW50cnkuX29uZXJyb3IgPSBudWxsO1xuXHQgICAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGVudW1lcmF0b3IuX3dpbGxTZXR0bGVBdChjLnJlc29sdmUoZW50cnkpLCBpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZW51bWVyYXRvci5fcmVtYWluaW5nLS07XG5cdCAgICAgICAgZW51bWVyYXRvci5fcmVzdWx0W2ldID0gZW50cnk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbihzdGF0ZSwgaSwgdmFsdWUpIHtcblx0ICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXHQgICAgICB2YXIgcHJvbWlzZSA9IGVudW1lcmF0b3IucHJvbWlzZTtcblx0XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgIGVudW1lcmF0b3IuX3JlbWFpbmluZy0tO1xuXHRcblx0ICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBlbnVtZXJhdG9yLl9yZXN1bHRbaV0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChlbnVtZXJhdG9yLl9yZW1haW5pbmcgPT09IDApIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIGVudW1lcmF0b3IuX3Jlc3VsdCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbihwcm9taXNlLCBpKSB7XG5cdCAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuXHQgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQsIGksIHJlYXNvbik7XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsKGVudHJpZXMpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZShlbnRyaWVzKSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0XG5cdCAgICAgIGlmICghbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5KGVudHJpZXMpKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG5cdCAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcblx0XG5cdCAgICAgIGZ1bmN0aW9uIG9uRnVsZmlsbG1lbnQodmFsdWUpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZnVuY3Rpb24gb25SZWplY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUoQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKSwgdW5kZWZpbmVkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBwcm9taXNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZShvYmplY3QpIHtcblx0ICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblx0XG5cdCAgICAgIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuXHQgICAgICAgIHJldHVybiBvYmplY3Q7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG5cdCAgICAgIHJldHVybiBwcm9taXNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QocmVhc29uKSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdCAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRjb3VudGVyID0gMDtcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZTtcblx0ICAgIC8qKlxuXHQgICAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG5cdCAgICAgIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG5cdCAgICAgIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuXHQgICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblx0XG5cdCAgICAgIFRlcm1pbm9sb2d5XG5cdCAgICAgIC0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuXHQgICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG5cdCAgICAgIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cblx0ICAgICAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG5cdCAgICAgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cblx0ICAgICAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cdFxuXHQgICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cdFxuXHQgICAgICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuXHQgICAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG5cdCAgICAgIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXHRcblx0ICAgICAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG5cdCAgICAgIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3Ncblx0ICAgICAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG5cdCAgICAgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcblx0ICAgICAgaXRzZWxmIGZ1bGZpbGwuXG5cdFxuXHRcblx0ICAgICAgQmFzaWMgVXNhZ2U6XG5cdCAgICAgIC0tLS0tLS0tLS0tLVxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICAvLyBvbiBzdWNjZXNzXG5cdCAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG5cdFxuXHQgICAgICAgIC8vIG9uIGZhaWx1cmVcblx0ICAgICAgICByZWplY3QocmVhc29uKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICAvLyBvbiBmdWxmaWxsbWVudFxuXHQgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICAvLyBvbiByZWplY3Rpb25cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQWR2YW5jZWQgVXNhZ2U6XG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tLVxuXHRcblx0ICAgICAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuXHQgICAgICBgWE1MSHR0cFJlcXVlc3Rgcy5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFxuXHQgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG5cdCAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcblx0ICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG5cdCAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblx0ICAgICAgICAgIHhoci5zZW5kKCk7XG5cdFxuXHQgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG5cdCAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcblx0ICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuXHQgICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgIC8vIG9uIHJlamVjdGlvblxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgUHJvbWlzZS5hbGwoW1xuXHQgICAgICAgIGdldEpTT04oJy9wb3N0cycpLFxuXHQgICAgICAgIGdldEpTT04oJy9jb21tZW50cycpXG5cdCAgICAgIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcblx0ICAgICAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG5cdCAgICAgICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXHRcblx0ICAgICAgICByZXR1cm4gdmFsdWVzO1xuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBAY2xhc3MgUHJvbWlzZVxuXHQgICAgICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuXHQgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICAgIEBjb25zdHJ1Y3RvclxuXHQgICAgKi9cblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKHJlc29sdmVyKSB7XG5cdCAgICAgIHRoaXMuX2lkID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGNvdW50ZXIrKztcblx0ICAgICAgdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHRoaXMuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcblx0ICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblx0XG5cdCAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuXHQgICAgICAgIGlmICghbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKHJlc29sdmVyKSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSkpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuYWxsID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0O1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmFjZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQ7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZXNvbHZlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlamVjdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyO1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldEFzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9hc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXA7XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucHJvdG90eXBlID0ge1xuXHQgICAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuXHQgICAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuXHQgICAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG5cdCAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBDaGFpbmluZ1xuXHQgICAgICAtLS0tLS0tLVxuXHRcblx0ICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcblx0ICAgICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuXHQgICAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiB1c2VyLm5hbWU7XG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG5cdCAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuXHQgICAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG5cdCAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0ICAgICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEFzc2ltaWxhdGlvblxuXHQgICAgICAtLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG5cdCAgICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcblx0ICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcblx0ICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG5cdCAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFNpbXBsZSBFeGFtcGxlXG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIHZhciByZXN1bHQ7XG5cdFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgRXJyYmFjayBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcblx0ICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFByb21pc2UgRXhhbXBsZTtcblx0XG5cdCAgICAgIGBgYGphdmFzY3JpcHRcblx0ICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBBZHZhbmNlZCBFeGFtcGxlXG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIHZhciBhdXRob3IsIGJvb2tzO1xuXHRcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG5cdCAgICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgRXJyYmFjayBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqc1xuXHRcblx0ICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXHRcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcblx0XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuXHQgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuXHQgICAgICAgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcblx0ICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXHRcblx0ICAgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgICBmaW5kQXV0aG9yKCkuXG5cdCAgICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG5cdCAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG5cdCAgICAgICAgICAvLyBmb3VuZCBib29rc1xuXHQgICAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEBtZXRob2QgdGhlblxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAgICovXG5cdCAgICAgIHRoZW46IGZ1bmN0aW9uKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG5cdCAgICAgICAgdmFyIHBhcmVudCA9IHRoaXM7XG5cdCAgICAgICAgdmFyIHN0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblx0XG5cdCAgICAgICAgaWYgKHN0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQgJiYgIW9uRnVsZmlsbG1lbnQgfHwgc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEICYmICFvblJlamVjdGlvbikge1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gcGFyZW50Ll9yZXN1bHQ7XG5cdFxuXHQgICAgICAgIGlmIChzdGF0ZSkge1xuXHQgICAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW3N0YXRlIC0gMV07XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCByZXN1bHQpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gY2hpbGQ7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcblx0ICAgICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gc3luY2hyb25vdXNcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBmaW5kQXV0aG9yKCk7XG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuXHQgICAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBAbWV0aG9kIGNhdGNoXG5cdCAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAgICovXG5cdCAgICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsKCkge1xuXHQgICAgICB2YXIgbG9jYWw7XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuXHQgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgbG9jYWwgPSBzZWxmO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXHRcblx0ICAgICAgaWYgKFAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKSA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxvY2FsLlByb21pc2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdDtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlID0ge1xuXHQgICAgICAnUHJvbWlzZSc6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0LFxuXHQgICAgICAncG9seWZpbGwnOiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHRcblx0ICAgIH07XG5cdFxuXHQgICAgLyogZ2xvYmFsIGRlZmluZTp0cnVlIG1vZHVsZTp0cnVlIHdpbmRvdzogdHJ1ZSAqL1xuXHQgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gJ2Z1bmN0aW9uJyAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpWydhbWQnXSkge1xuXHQgICAgICAhKF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fID0gZnVuY3Rpb24oKSB7IHJldHVybiBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlOyB9LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXywgZXhwb3J0cywgbW9kdWxlKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGVbJ2V4cG9ydHMnXSkge1xuXHQgICAgICBtb2R1bGVbJ2V4cG9ydHMnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICB0aGlzWydFUzZQcm9taXNlJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuXHQgICAgfVxuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCgpO1xuXHR9KS5jYWxsKHRoaXMpO1xuXHRcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdFxuXHR2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xyXG5cdFx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxyXG5cdFx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbW9kdWxlO1xyXG5cdH1cclxuXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiAoaWdub3JlZCkgKi9cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQoZnVuY3Rpb24oKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICBpZiAoc2VsZi5mZXRjaCkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcblx0ICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuXHQgICAgfVxuXHQgICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXFxeX2B8fl0vaS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcblx0ICAgIH1cblx0ICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKClcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuXHQgICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG5cdCAgICB0aGlzLm1hcCA9IHt9XG5cdFxuXHQgICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG5cdCAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuXHQgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuXHQgICAgICB9LCB0aGlzKVxuXHRcblx0ICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuXHQgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCBoZWFkZXJzW25hbWVdKVxuXHQgICAgICB9LCB0aGlzKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0ICAgIG5hbWUgPSBub3JtYWxpemVOYW1lKG5hbWUpXG5cdCAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuXHQgICAgdmFyIGxpc3QgPSB0aGlzLm1hcFtuYW1lXVxuXHQgICAgaWYgKCFsaXN0KSB7XG5cdCAgICAgIGxpc3QgPSBbXVxuXHQgICAgICB0aGlzLm1hcFtuYW1lXSA9IGxpc3Rcblx0ICAgIH1cblx0ICAgIGxpc3QucHVzaCh2YWx1ZSlcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgdmFyIHZhbHVlcyA9IHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG5cdCAgICByZXR1cm4gdmFsdWVzID8gdmFsdWVzWzBdIDogbnVsbFxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldIHx8IFtdXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG5cdCAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IFtub3JtYWxpemVWYWx1ZSh2YWx1ZSldXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcblx0ICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMubWFwKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgICAgdGhpcy5tYXBbbmFtZV0uZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWUsIG5hbWUsIHRoaXMpXG5cdCAgICAgIH0sIHRoaXMpXG5cdCAgICB9LCB0aGlzKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY29uc3VtZWQoYm9keSkge1xuXHQgICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcblx0ICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuXHQgICAgfVxuXHQgICAgYm9keS5ib2R5VXNlZCA9IHRydWVcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcblx0ICAgICAgfVxuXHQgICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG5cdCAgICAgIH1cblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuXHQgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcblx0ICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuXHQgICAgcmV0dXJuIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG5cdCAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuXHQgICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcblx0ICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuXHQgIH1cblx0XG5cdCAgdmFyIHN1cHBvcnQgPSB7XG5cdCAgICBibG9iOiAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJiAnQmxvYicgaW4gc2VsZiAmJiAoZnVuY3Rpb24oKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgbmV3IEJsb2IoKTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgICAgfVxuXHQgICAgfSkoKSxcblx0ICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG5cdCAgICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBzZWxmXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBCb2R5KCkge1xuXHQgICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cdFxuXHRcblx0ICAgIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuXHQgICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcblx0ICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keVxuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5mb3JtRGF0YSAmJiBGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHlcblx0ICAgICAgfSBlbHNlIGlmICghYm9keSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgLy8gT25seSBzdXBwb3J0IEFycmF5QnVmZmVycyBmb3IgUE9TVCBtZXRob2QuXG5cdCAgICAgICAgLy8gUmVjZWl2aW5nIEFycmF5QnVmZmVycyBoYXBwZW5zIHZpYSBCbG9icywgaW5zdGVhZC5cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN1cHBvcnQuYmxvYikge1xuXHQgICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIGlmIChyZWplY3RlZCkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iJylcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG5cdCAgICAgICAgaWYgKHJlamVjdGVkKSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuXHQgICAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIHJldHVybiByZWplY3RlZCA/IHJlamVjdGVkIDogUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcblx0ICAgICAgdGhpcy5mb3JtRGF0YSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzXG5cdCAgfVxuXHRcblx0ICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcblx0ICB2YXIgbWV0aG9kcyA9IFsnREVMRVRFJywgJ0dFVCcsICdIRUFEJywgJ09QVElPTlMnLCAnUE9TVCcsICdQVVQnXVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG5cdCAgICB2YXIgdXBjYXNlZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpXG5cdCAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2Rcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cdCAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keVxuXHQgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpKSB7XG5cdCAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmxcblx0ICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGlucHV0LmNyZWRlbnRpYWxzXG5cdCAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG5cdCAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuXHQgICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG5cdCAgICAgIGlmICghYm9keSkge1xuXHQgICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcblx0ICAgICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy51cmwgPSBpbnB1dFxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ29taXQnXG5cdCAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcblx0ICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuXHQgICAgfVxuXHQgICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG5cdCAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcblx0ICAgIHRoaXMucmVmZXJyZXIgPSBudWxsXG5cdFxuXHQgICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cycpXG5cdCAgICB9XG5cdCAgICB0aGlzLl9pbml0Qm9keShib2R5KVxuXHQgIH1cblx0XG5cdCAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcblx0ICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKClcblx0ICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuXHQgICAgICBpZiAoYnl0ZXMpIHtcblx0ICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpXG5cdCAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG5cdCAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignPScpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG5cdCAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKVxuXHQgICAgICB9XG5cdCAgICB9KVxuXHQgICAgcmV0dXJuIGZvcm1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGhlYWRlcnMoeGhyKSB7XG5cdCAgICB2YXIgaGVhZCA9IG5ldyBIZWFkZXJzKClcblx0ICAgIHZhciBwYWlycyA9IHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS50cmltKCkuc3BsaXQoJ1xcbicpXG5cdCAgICBwYWlycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuXHQgICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KCc6Jylcblx0ICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG5cdCAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJzonKS50cmltKClcblx0ICAgICAgaGVhZC5hcHBlbmQoa2V5LCB2YWx1ZSlcblx0ICAgIH0pXG5cdCAgICByZXR1cm4gaGVhZFxuXHQgIH1cblx0XG5cdCAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXHRcblx0ICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuXHQgICAgaWYgKCFvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSB7fVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuXHQgICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG5cdCAgICB0aGlzLnN0YXR1cyA9IG9wdGlvbnMuc3RhdHVzXG5cdCAgICB0aGlzLm9rID0gdGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwXG5cdCAgICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHRcblx0ICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMgPyBvcHRpb25zLmhlYWRlcnMgOiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG5cdCAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG5cdCAgfVxuXHRcblx0ICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXHRcblx0ICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcblx0ICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcblx0ICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuXHQgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuXHQgICAgICB1cmw6IHRoaXMudXJsXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG5cdCAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuXHQgICAgcmV0dXJuIHJlc3BvbnNlXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblx0XG5cdCAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuXHQgICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuXHQgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG5cdCAgfVxuXHRcblx0ICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzO1xuXHQgIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3Q7XG5cdCAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlO1xuXHRcblx0ICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgdmFyIHJlcXVlc3Rcblx0ICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IGlucHV0XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblx0XG5cdCAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlVVJMKCkge1xuXHQgICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuXHQgICAgICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVVSTFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gQXZvaWQgc2VjdXJpdHkgd2FybmluZ3Mgb24gZ2V0UmVzcG9uc2VIZWFkZXIgd2hlbiBub3QgYWxsb3dlZCBieSBDT1JTXG5cdCAgICAgICAgaWYgKC9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcblx0ICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHN0YXR1cyA9ICh4aHIuc3RhdHVzID09PSAxMjIzKSA/IDIwNCA6IHhoci5zdGF0dXNcblx0ICAgICAgICBpZiAoc3RhdHVzIDwgMTAwIHx8IHN0YXR1cyA+IDU5OSkge1xuXHQgICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcblx0ICAgICAgICAgIHJldHVyblxuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICAgIHN0YXR1czogc3RhdHVzLFxuXHQgICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG5cdCAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKHhociksXG5cdCAgICAgICAgICB1cmw6IHJlc3BvbnNlVVJMKClcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XG5cdCAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKVxuXHRcblx0ICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuXHQgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG5cdCAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuXHQgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuXHQgICAgICB9KVxuXHRcblx0ICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdClcblx0ICAgIH0pXG5cdCAgfVxuXHQgIHNlbGYuZmV0Y2gucG9seWZpbGwgPSB0cnVlXG5cdH0pKCk7XG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsoZnVuY3Rpb24gKGV4cG9ydHMpIHsndXNlIHN0cmljdCc7XG5cdCAgLy9zaGFyZWQgcG9pbnRlclxuXHQgIHZhciBpO1xuXHQgIC8vc2hvcnRjdXRzXG5cdCAgdmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5LCBpcyA9IGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gaXNOYU4oYSk/IGlzTmFOKGIpOiBhID09PSBiOyB9O1xuXHRcblx0XG5cdCAgLy9Qb2x5ZmlsbCBnbG9iYWwgb2JqZWN0c1xuXHQgIGlmICh0eXBlb2YgV2Vha01hcCA9PSAndW5kZWZpbmVkJykge1xuXHQgICAgZXhwb3J0cy5XZWFrTWFwID0gY3JlYXRlQ29sbGVjdGlvbih7XG5cdCAgICAgIC8vIFdlYWtNYXAjZGVsZXRlKGtleTp2b2lkKik6Ym9vbGVhblxuXHQgICAgICAnZGVsZXRlJzogc2hhcmVkRGVsZXRlLFxuXHQgICAgICAvLyBXZWFrTWFwI2NsZWFyKCk6XG5cdCAgICAgIGNsZWFyOiBzaGFyZWRDbGVhcixcblx0ICAgICAgLy8gV2Vha01hcCNnZXQoa2V5OnZvaWQqKTp2b2lkKlxuXHQgICAgICBnZXQ6IHNoYXJlZEdldCxcblx0ICAgICAgLy8gV2Vha01hcCNoYXMoa2V5OnZvaWQqKTpib29sZWFuXG5cdCAgICAgIGhhczogbWFwSGFzLFxuXHQgICAgICAvLyBXZWFrTWFwI3NldChrZXk6dm9pZCosIHZhbHVlOnZvaWQqKTp2b2lkXG5cdCAgICAgIHNldDogc2hhcmVkU2V0XG5cdCAgICB9LCB0cnVlKTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgTWFwID09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiAoKG5ldyBNYXApLnZhbHVlcykgIT09ICdmdW5jdGlvbicgfHwgIShuZXcgTWFwKS52YWx1ZXMoKS5uZXh0KSB7XG5cdCAgICBleHBvcnRzLk1hcCA9IGNyZWF0ZUNvbGxlY3Rpb24oe1xuXHQgICAgICAvLyBXZWFrTWFwI2RlbGV0ZShrZXk6dm9pZCopOmJvb2xlYW5cblx0ICAgICAgJ2RlbGV0ZSc6IHNoYXJlZERlbGV0ZSxcblx0ICAgICAgLy86d2FzIE1hcCNnZXQoa2V5OnZvaWQqWywgZDNmYXVsdDp2b2lkKl0pOnZvaWQqXG5cdCAgICAgIC8vIE1hcCNoYXMoa2V5OnZvaWQqKTpib29sZWFuXG5cdCAgICAgIGhhczogbWFwSGFzLFxuXHQgICAgICAvLyBNYXAjZ2V0KGtleTp2b2lkKik6Ym9vbGVhblxuXHQgICAgICBnZXQ6IHNoYXJlZEdldCxcblx0ICAgICAgLy8gTWFwI3NldChrZXk6dm9pZCosIHZhbHVlOnZvaWQqKTp2b2lkXG5cdCAgICAgIHNldDogc2hhcmVkU2V0LFxuXHQgICAgICAvLyBNYXAja2V5cyh2b2lkKTpJdGVyYXRvclxuXHQgICAgICBrZXlzOiBzaGFyZWRLZXlzLFxuXHQgICAgICAvLyBNYXAjdmFsdWVzKHZvaWQpOkl0ZXJhdG9yXG5cdCAgICAgIHZhbHVlczogc2hhcmVkVmFsdWVzLFxuXHQgICAgICAvLyBNYXAjZW50cmllcyh2b2lkKTpJdGVyYXRvclxuXHQgICAgICBlbnRyaWVzOiBtYXBFbnRyaWVzLFxuXHQgICAgICAvLyBNYXAjZm9yRWFjaChjYWxsYmFjazpGdW5jdGlvbiwgY29udGV4dDp2b2lkKik6dm9pZCA9PT4gY2FsbGJhY2suY2FsbChjb250ZXh0LCBrZXksIHZhbHVlLCBtYXBPYmplY3QpID09PSBub3QgaW4gc3BlY3NgXG5cdCAgICAgIGZvckVhY2g6IHNoYXJlZEZvckVhY2gsXG5cdCAgICAgIC8vIE1hcCNjbGVhcigpOlxuXHQgICAgICBjbGVhcjogc2hhcmVkQ2xlYXJcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBTZXQgPT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mICgobmV3IFNldCkudmFsdWVzKSAhPT0gJ2Z1bmN0aW9uJyB8fCAhKG5ldyBTZXQpLnZhbHVlcygpLm5leHQpIHtcblx0ICAgIGV4cG9ydHMuU2V0ID0gY3JlYXRlQ29sbGVjdGlvbih7XG5cdCAgICAgIC8vIFNldCNoYXModmFsdWU6dm9pZCopOmJvb2xlYW5cblx0ICAgICAgaGFzOiBzZXRIYXMsXG5cdCAgICAgIC8vIFNldCNhZGQodmFsdWU6dm9pZCopOmJvb2xlYW5cblx0ICAgICAgYWRkOiBzaGFyZWRBZGQsXG5cdCAgICAgIC8vIFNldCNkZWxldGUoa2V5OnZvaWQqKTpib29sZWFuXG5cdCAgICAgICdkZWxldGUnOiBzaGFyZWREZWxldGUsXG5cdCAgICAgIC8vIFNldCNjbGVhcigpOlxuXHQgICAgICBjbGVhcjogc2hhcmVkQ2xlYXIsXG5cdCAgICAgIC8vIFNldCNrZXlzKHZvaWQpOkl0ZXJhdG9yXG5cdCAgICAgIGtleXM6IHNoYXJlZFZhbHVlcywgLy8gc3BlY3MgYWN0dWFsbHkgc2F5IFwidGhlIHNhbWUgZnVuY3Rpb24gb2JqZWN0IGFzIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSB2YWx1ZXMgcHJvcGVydHlcIlxuXHQgICAgICAvLyBTZXQjdmFsdWVzKHZvaWQpOkl0ZXJhdG9yXG5cdCAgICAgIHZhbHVlczogc2hhcmVkVmFsdWVzLFxuXHQgICAgICAvLyBTZXQjZW50cmllcyh2b2lkKTpJdGVyYXRvclxuXHQgICAgICBlbnRyaWVzOiBzZXRFbnRyaWVzLFxuXHQgICAgICAvLyBTZXQjZm9yRWFjaChjYWxsYmFjazpGdW5jdGlvbiwgY29udGV4dDp2b2lkKik6dm9pZCA9PT4gY2FsbGJhY2suY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgpID09PSBub3QgaW4gc3BlY3Ncblx0ICAgICAgZm9yRWFjaDogc2hhcmVkRm9yRWFjaFxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIFdlYWtTZXQgPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGV4cG9ydHMuV2Vha1NldCA9IGNyZWF0ZUNvbGxlY3Rpb24oe1xuXHQgICAgICAvLyBXZWFrU2V0I2RlbGV0ZShrZXk6dm9pZCopOmJvb2xlYW5cblx0ICAgICAgJ2RlbGV0ZSc6IHNoYXJlZERlbGV0ZSxcblx0ICAgICAgLy8gV2Vha1NldCNhZGQodmFsdWU6dm9pZCopOmJvb2xlYW5cblx0ICAgICAgYWRkOiBzaGFyZWRBZGQsXG5cdCAgICAgIC8vIFdlYWtTZXQjY2xlYXIoKTpcblx0ICAgICAgY2xlYXI6IHNoYXJlZENsZWFyLFxuXHQgICAgICAvLyBXZWFrU2V0I2hhcyh2YWx1ZTp2b2lkKik6Ym9vbGVhblxuXHQgICAgICBoYXM6IHNldEhhc1xuXHQgICAgfSwgdHJ1ZSk7XG5cdCAgfVxuXHRcblx0XG5cdCAgLyoqXG5cdCAgICogRVM2IGNvbGxlY3Rpb24gY29uc3RydWN0b3Jcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gYSBjb2xsZWN0aW9uIGNsYXNzXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gY3JlYXRlQ29sbGVjdGlvbihwcm90bywgb2JqZWN0T25seSl7XG5cdCAgICBmdW5jdGlvbiBDb2xsZWN0aW9uKGEpe1xuXHQgICAgICBpZiAoIXRoaXMgfHwgdGhpcy5jb25zdHJ1Y3RvciAhPT0gQ29sbGVjdGlvbikgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGEpO1xuXHQgICAgICB0aGlzLl9rZXlzID0gW107XG5cdCAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuXHQgICAgICB0aGlzLl9pdHAgPSBbXTsgLy8gaXRlcmF0aW9uIHBvaW50ZXJzXG5cdCAgICAgIHRoaXMub2JqZWN0T25seSA9IG9iamVjdE9ubHk7XG5cdFxuXHQgICAgICAvL3BhcnNlIGluaXRpYWwgaXRlcmFibGUgYXJndW1lbnQgcGFzc2VkXG5cdCAgICAgIGlmIChhKSBpbml0LmNhbGwodGhpcywgYSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy9kZWZpbmUgc2l6ZSBmb3Igbm9uIG9iamVjdC1vbmx5IGNvbGxlY3Rpb25zXG5cdCAgICBpZiAoIW9iamVjdE9ubHkpIHtcblx0ICAgICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICdzaXplJywge1xuXHQgICAgICAgIGdldDogc2hhcmVkU2l6ZVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvL3NldCBwcm90b3R5cGVcblx0ICAgIHByb3RvLmNvbnN0cnVjdG9yID0gQ29sbGVjdGlvbjtcblx0ICAgIENvbGxlY3Rpb24ucHJvdG90eXBlID0gcHJvdG87XG5cdFxuXHQgICAgcmV0dXJuIENvbGxlY3Rpb247XG5cdCAgfVxuXHRcblx0XG5cdCAgLyoqIHBhcnNlIGluaXRpYWwgaXRlcmFibGUgYXJndW1lbnQgcGFzc2VkICovXG5cdCAgZnVuY3Rpb24gaW5pdChhKXtcblx0ICAgIHZhciBpO1xuXHQgICAgLy9pbml0IFNldCBhcmd1bWVudCwgbGlrZSBgWzEsMiwzLHt9XWBcblx0ICAgIGlmICh0aGlzLmFkZClcblx0ICAgICAgYS5mb3JFYWNoKHRoaXMuYWRkLCB0aGlzKTtcblx0ICAgIC8vaW5pdCBNYXAgYXJndW1lbnQgbGlrZSBgW1sxLDJdLCBbe30sIDRdXWBcblx0ICAgIGVsc2Vcblx0ICAgICAgYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2V0KGFbMF0sYVsxXSl9LCB0aGlzKTtcblx0ICB9XG5cdFxuXHRcblx0ICAvKiogZGVsZXRlICovXG5cdCAgZnVuY3Rpb24gc2hhcmVkRGVsZXRlKGtleSkge1xuXHQgICAgaWYgKHRoaXMuaGFzKGtleSkpIHtcblx0ICAgICAgdGhpcy5fa2V5cy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgIC8vIHVwZGF0ZSBpdGVyYXRpb24gcG9pbnRlcnNcblx0ICAgICAgdGhpcy5faXRwLmZvckVhY2goZnVuY3Rpb24ocCkgeyBpZiAoaSA8IHBbMF0pIHBbMF0tLTsgfSk7XG5cdCAgICB9XG5cdCAgICAvLyBBdXJvcmEgaGVyZSBkb2VzIGl0IHdoaWxlIENhbmFyeSBkb2Vzbid0XG5cdCAgICByZXR1cm4gLTEgPCBpO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIHNoYXJlZEdldChrZXkpIHtcblx0ICAgIHJldHVybiB0aGlzLmhhcyhrZXkpID8gdGhpcy5fdmFsdWVzW2ldIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaGFzKGxpc3QsIGtleSkge1xuXHQgICAgaWYgKHRoaXMub2JqZWN0T25seSAmJiBrZXkgIT09IE9iamVjdChrZXkpKVxuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB2YWx1ZSB1c2VkIGFzIHdlYWsgY29sbGVjdGlvbiBrZXlcIik7XG5cdCAgICAvL05hTiBvciAwIHBhc3NlZFxuXHQgICAgaWYgKGtleSAhPSBrZXkgfHwga2V5ID09PSAwKSBmb3IgKGkgPSBsaXN0Lmxlbmd0aDsgaS0tICYmICFpcyhsaXN0W2ldLCBrZXkpOyl7fVxuXHQgICAgZWxzZSBpID0gbGlzdC5pbmRleE9mKGtleSk7XG5cdCAgICByZXR1cm4gLTEgPCBpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc2V0SGFzKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gaGFzLmNhbGwodGhpcywgdGhpcy5fdmFsdWVzLCB2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtYXBIYXModmFsdWUpIHtcblx0ICAgIHJldHVybiBoYXMuY2FsbCh0aGlzLCB0aGlzLl9rZXlzLCB2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICAvKiogQGNoYWluYWJsZSAqL1xuXHQgIGZ1bmN0aW9uIHNoYXJlZFNldChrZXksIHZhbHVlKSB7XG5cdCAgICB0aGlzLmhhcyhrZXkpID9cblx0ICAgICAgdGhpcy5fdmFsdWVzW2ldID0gdmFsdWVcblx0ICAgICAgOlxuXHQgICAgICB0aGlzLl92YWx1ZXNbdGhpcy5fa2V5cy5wdXNoKGtleSkgLSAxXSA9IHZhbHVlXG5cdCAgICA7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdFxuXHQgIC8qKiBAY2hhaW5hYmxlICovXG5cdCAgZnVuY3Rpb24gc2hhcmVkQWRkKHZhbHVlKSB7XG5cdCAgICBpZiAoIXRoaXMuaGFzKHZhbHVlKSkgdGhpcy5fdmFsdWVzLnB1c2godmFsdWUpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaGFyZWRDbGVhcigpIHtcblx0ICAgICh0aGlzLl9rZXlzIHx8IDApLmxlbmd0aCA9XG5cdCAgICB0aGlzLl92YWx1ZXMubGVuZ3RoID0gMDtcblx0ICB9XG5cdFxuXHQgIC8qKiBrZXlzLCB2YWx1ZXMsIGFuZCBpdGVyYXRlIHJlbGF0ZWQgbWV0aG9kcyAqL1xuXHQgIGZ1bmN0aW9uIHNoYXJlZEtleXMoKSB7XG5cdCAgICByZXR1cm4gc2hhcmVkSXRlcmF0b3IodGhpcy5faXRwLCB0aGlzLl9rZXlzKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNoYXJlZFZhbHVlcygpIHtcblx0ICAgIHJldHVybiBzaGFyZWRJdGVyYXRvcih0aGlzLl9pdHAsIHRoaXMuX3ZhbHVlcyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtYXBFbnRyaWVzKCkge1xuXHQgICAgcmV0dXJuIHNoYXJlZEl0ZXJhdG9yKHRoaXMuX2l0cCwgdGhpcy5fa2V5cywgdGhpcy5fdmFsdWVzKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNldEVudHJpZXMoKSB7XG5cdCAgICByZXR1cm4gc2hhcmVkSXRlcmF0b3IodGhpcy5faXRwLCB0aGlzLl92YWx1ZXMsIHRoaXMuX3ZhbHVlcyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaGFyZWRJdGVyYXRvcihpdHAsIGFycmF5LCBhcnJheTIpIHtcblx0ICAgIHZhciBwID0gWzBdLCBkb25lID0gZmFsc2U7XG5cdCAgICBpdHAucHVzaChwKTtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB2LCBrID0gcFswXTtcblx0ICAgICAgICBpZiAoIWRvbmUgJiYgayA8IGFycmF5Lmxlbmd0aCkge1xuXHQgICAgICAgICAgdiA9IGFycmF5MiA/IFthcnJheVtrXSwgYXJyYXkyW2tdXTogYXJyYXlba107XG5cdCAgICAgICAgICBwWzBdKys7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGRvbmUgPSB0cnVlO1xuXHQgICAgICAgICAgaXRwLnNwbGljZShpdHAuaW5kZXhPZihwKSwgMSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB7IGRvbmU6IGRvbmUsIHZhbHVlOiB2IH07XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaGFyZWRTaXplKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuX3ZhbHVlcy5sZW5ndGg7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaGFyZWRGb3JFYWNoKGNhbGxiYWNrLCBjb250ZXh0KSB7XG5cdCAgICB2YXIgaXQgPSB0aGlzLmVudHJpZXMoKTtcblx0ICAgIGZvciAoOzspIHtcblx0ICAgICAgdmFyIHIgPSBpdC5uZXh0KCk7XG5cdCAgICAgIGlmIChyLmRvbmUpIGJyZWFrO1xuXHQgICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHIudmFsdWVbMV0sIHIudmFsdWVbMF0sIHRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdH0pKHR5cGVvZiBleHBvcnRzICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiBnbG9iYWwgIT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3cgKTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcblx0ICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcblx0fVxuXHRfX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTtcblx0X19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygxMikpO1xuXG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBpbmRleF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBhcGlIb3N0O1xuXHR2YXIgYXBpUGF0aCA9IFsnVmVyc2lvbicsICdUeXBlJywgJ0lkJywgJ1BhdGgxJywgJ1BhdGgyJywgJ1BhdGgzJ107XG5cdHZhciBGZXRjaCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBGZXRjaCgpIHtcblx0ICAgICAgICB0aGlzLm9wdHMgPSB7XG5cdCAgICAgICAgICAgIGhlYWRlcnM6IHtcblx0ICAgICAgICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG5cdCAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIHRoaXMub3B0cy5jcmVkZW50aWFscyA9ICdpbmNsdWRlJztcblx0ICAgICAgICBhcGlIb3N0ID0gJ2h0dHBzOi8vd3d3LnRlYW1iaXRpb24uY29tL2FwaSc7XG5cdCAgICB9XG5cdCAgICBGZXRjaC5wcm90b3R5cGUuc2V0QVBJSG9zdCA9IGZ1bmN0aW9uIChob3N0KSB7XG5cdCAgICAgICAgYXBpSG9zdCA9IGhvc3Q7XG5cdCAgICB9O1xuXHQgICAgRmV0Y2gucHJvdG90eXBlLnNldFRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7XG5cdCAgICAgICAgZGVsZXRlIHRoaXMub3B0cy5jcmVkZW50aWFscztcblx0ICAgICAgICB0aGlzLm9wdHMuaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJPQXV0aDIgXCIgKyB0b2tlbjtcblx0ICAgICAgICBhcGlIb3N0ID0gJ2h0dHBzOi8vYXBpLnRlYW1iaXRpb24uY29tJztcblx0ICAgIH07XG5cdCAgICBGZXRjaC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHBhdGhzKSB7XG5cdCAgICAgICAgdmFyIHVybCA9IHRoaXMuYnVpbGRVUkkocGF0aHMpO1xuXHQgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIGluZGV4XzEuYXNzaWduKHtcblx0ICAgICAgICAgICAgbWV0aG9kOiAnZ2V0J1xuXHQgICAgICAgIH0sIHRoaXMub3B0cykpXG5cdCAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICBGZXRjaC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChwYXRocywgZGF0YSkge1xuXHQgICAgICAgIHZhciB1cmwgPSB0aGlzLmJ1aWxkVVJJKHBhdGhzKTtcblx0ICAgICAgICByZXR1cm4gZmV0Y2godXJsLCBpbmRleF8xLmFzc2lnbih7XG5cdCAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuXHQgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuXHQgICAgICAgIH0sIHRoaXMub3B0cykpXG5cdCAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBkYXRhLmpzb24oKTtcblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICBGZXRjaC5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKHBhdGhzLCBkYXRhKSB7XG5cdCAgICAgICAgdmFyIHVybCA9IHRoaXMuYnVpbGRVUkkocGF0aHMpO1xuXHQgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIGluZGV4XzEuYXNzaWduKHtcblx0ICAgICAgICAgICAgbWV0aG9kOiAncHV0Jyxcblx0ICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcblx0ICAgICAgICB9LCB0aGlzLm9wdHMpKVxuXHQgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgRmV0Y2gucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChwYXRocykge1xuXHQgICAgICAgIHZhciB1cmwgPSB0aGlzLmJ1aWxkVVJJKHBhdGhzKTtcblx0ICAgICAgICByZXR1cm4gZmV0Y2godXJsLCBpbmRleF8xLmFzc2lnbih7XG5cdCAgICAgICAgICAgIG1ldGhvZDogJ2RlbGV0ZSdcblx0ICAgICAgICB9LCB0aGlzLm9wdHMpKVxuXHQgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHQgICAgRmV0Y2gucHJvdG90eXBlLmJ1aWxkVVJJID0gZnVuY3Rpb24gKHBhdGgpIHtcblx0ICAgICAgICB2YXIgdXJpcyA9IFtdO1xuXHQgICAgICAgIHZhciBxdWVyeXMgPSBbXTtcblx0ICAgICAgICBpbmRleF8xLmZvckVhY2gocGF0aCwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG5cdCAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGFwaVBhdGguaW5kZXhPZihrZXkpO1xuXHQgICAgICAgICAgICBpZiAocG9zaXRpb24gIT09IC0xKSB7XG5cdCAgICAgICAgICAgICAgICB1cmlzW3Bvc2l0aW9uXSA9IHZhbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHF1ZXJ5cy5wdXNoKGtleSArIFwiPVwiICsgdmFsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHZhciB2ZXJzaW9uID0gdXJpc1swXTtcblx0ICAgICAgICBpZiAodHlwZW9mIHZlcnNpb24gIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICAgIHVyaXNbMF0gPSBcIi9cIiArIHZlcnNpb247XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB1cmwgPSBhcGlIb3N0ICsgdXJpcy5qb2luKCcvJyk7XG5cdCAgICAgICAgdXJsID0gcXVlcnlzLmxlbmd0aCA/IHVybCArICc/JyArIHF1ZXJ5cy5qb2luKCcmJykgOiB1cmw7XG5cdCAgICAgICAgcmV0dXJuIHVybDtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gRmV0Y2g7XG5cdH0pKCk7XG5cdGV4cG9ydHMudGJGZXRjaCA9IG5ldyBGZXRjaCgpO1xuXG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgc2NoZW1hXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0ZXhwb3J0cy5mb3JFYWNoID0gZnVuY3Rpb24gKHRhcmdldCwgZWFjaEZ1bmMpIHtcblx0ICAgIHZhciBsZW5ndGg7XG5cdCAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgQXJyYXkpIHtcblx0ICAgICAgICBsZW5ndGggPSB0YXJnZXQubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgZWFjaEZ1bmModGFyZ2V0W2ldLCBpKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBlbHNlIHtcblx0ICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRhcmdldCk7XG5cdCAgICAgICAgdmFyIGtleTtcblx0ICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgICAgICAgIGVhY2hGdW5jKHRhcmdldFtrZXldLCBrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fTtcblx0ZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0LCBvcmlnaW4pIHtcblx0ICAgIGV4cG9ydHMuZm9yRWFjaChvcmlnaW4sIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gb3JpZ2luW2tleV07XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiB0YXJnZXQ7XG5cdH07XG5cdGV4cG9ydHMuY2xvbmUgPSBmdW5jdGlvbiAob3JpZ2luKSB7XG5cdCAgICBpZiAodHlwZW9mIG9yaWdpbiA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIG9yaWdpbiAhPT0gJ29iamVjdCcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGFyZ2V0O1xuXHQgICAgaWYgKG9yaWdpbiBpbnN0YW5jZW9mIEFycmF5KSB7XG5cdCAgICAgICAgdGFyZ2V0ID0gbmV3IEFycmF5KCk7XG5cdCAgICB9XG5cdCAgICBlbHNlIHtcblx0ICAgICAgICB0YXJnZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgICAgfVxuXHQgICAgZXhwb3J0cy5mb3JFYWNoKG9yaWdpbiwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgIC8vIG51bGxcblx0ICAgICAgICAgICAgaWYgKHZhbCkge1xuXHQgICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBleHBvcnRzLmNsb25lKHZhbCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHZhbDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHZhbDtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIHRhcmdldDtcblx0fTtcblx0dmFyIHM0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG5cdCAgICAgICAgLnRvU3RyaW5nKDE2KVxuXHQgICAgICAgIC5zdWJzdHJpbmcoMSk7XG5cdH07XG5cdHZhciB1dWlkU3RhY2sgPSBbXTtcblx0ZXhwb3J0cy51dWlkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIFVVSUQgPSBzNCgpICsgczQoKTtcblx0ICAgIHdoaWxlICh1dWlkU3RhY2suaW5kZXhPZihVVUlEKSAhPT0gLTEpIHtcblx0ICAgICAgICBVVUlEID0gczQoKSArIHM0KCk7XG5cdCAgICB9XG5cdCAgICB1dWlkU3RhY2sucHVzaChVVUlEKTtcblx0ICAgIHJldHVybiBVVUlEO1xuXHR9O1xuXHRleHBvcnRzLmRhdGFzVG9TY2hlbWFzID0gZnVuY3Rpb24gKGRhdGFzLCBTY2hlbWEpIHtcblx0ICAgIHZhciByZXN1bHQgPSBuZXcgQXJyYXkoKTtcblx0ICAgIGV4cG9ydHMuZm9yRWFjaChkYXRhcywgZnVuY3Rpb24gKGRhdGEsIGluZGV4KSB7XG5cdCAgICAgICAgcmVzdWx0LnB1c2goc2NoZW1hXzEuc2V0U2NoZW1hKFNjaGVtYSwgZGF0YSkpO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgdXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRleHBvcnRzLnNldFNjaGVtYSA9IGZ1bmN0aW9uICh0YXJnZXQsIGRhdGEpIHtcblx0ICAgIHRhcmdldC4kJGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBkYXRhW2tleV07XG5cdCAgICB9KTtcblx0ICAgIHRhcmdldC4kJGRhdGEgPSBkYXRhO1xuXHQgICAgdXRpbHNfMS5mb3JFYWNoKHRhcmdldCwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnJCRkYXRhJykge1xuXHQgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHtcblx0ICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIGlmIChrZXkgPT09ICckJGtleXMnKSB7XG5cdCAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuXHQgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWwpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbDtcblx0ICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICAgICAgICB0YXJnZXQuJCRrZXlzLmFkZChrZXkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuXHQgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC4kJGRhdGEpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC4kJGRhdGFba2V5XTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC4kJGRhdGEpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LiQkZGF0YVtrZXldID0gbmV3VmFsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuJCRrZXlzLmRlbGV0ZShrZXkpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHR2YXIgU2NoZW1hID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFNjaGVtYSgpIHtcblx0ICAgICAgICB0aGlzLiQka2V5cyA9IG5ldyBTZXQoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBTY2hlbWE7XG5cdH0pKCk7XG5cdGV4cG9ydHMuU2NoZW1hID0gU2NoZW1hO1xuXG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZnVuY3Rpb24gX19leHBvcnQobSkge1xuXHQgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xuXHR9XG5cdF9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oMTMpKTtcblx0X19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygxOSkpO1xuXHRfX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSk7XG5cblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBmZXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHVzZXJfbW9kZWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRleHBvcnRzLlVzZXJBUEkgPSB7XG5cdCAgICBnZXRVc2VyTWU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgY2FjaGUgPSB1c2VyX21vZGVsXzEuZGVmYXVsdC5nZXQoKTtcblx0ICAgICAgICBpZiAoY2FjaGUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICAgICAgICAgIHJlc29sdmUoY2FjaGUpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmZXRjaF8xLnRiRmV0Y2guZ2V0KHtcblx0ICAgICAgICAgICAgICAgIFR5cGU6ICd1c2VycycsXG5cdCAgICAgICAgICAgICAgICBJZDogJ21lJ1xuXHQgICAgICAgICAgICB9KVxuXHQgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVzZXJNZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJfbW9kZWxfMS5kZWZhdWx0LnNldCh1c2VyTWUpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgdXBkYXRlOiBmdW5jdGlvbiAocGF0Y2gpIHtcblx0ICAgICAgICByZXR1cm4gZmV0Y2hfMS50YkZldGNoLnB1dCh7XG5cdCAgICAgICAgICAgIFR5cGU6ICd1c2VycycsXG5cdCAgICAgICAgICAgIElkOiAnbWUnXG5cdCAgICAgICAgfSwgcGF0Y2gpXG5cdCAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1c2VyTWUpIHtcblx0ICAgICAgICAgICAgdXNlcl9tb2RlbF8xLmRlZmF1bHQudXBkYXRlKHVzZXJNZSk7XG5cdCAgICAgICAgICAgIHJldHVybiB1c2VyTWU7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgYWRkRW1haWw6IGZ1bmN0aW9uIChlbWFpbCkge1xuXHQgICAgICAgIHJldHVybiBmZXRjaF8xLnRiRmV0Y2gucG9zdCh7XG5cdCAgICAgICAgICAgIFR5cGU6ICd1c2VycycsXG5cdCAgICAgICAgICAgIElkOiAnZW1haWwnXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgICBlbWFpbDogZW1haWxcblx0ICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICAgIHVzZXJfbW9kZWxfMS5kZWZhdWx0LnVwZGF0ZUVtYWlsKGRhdGEpO1xuXHQgICAgICAgICAgICByZXR1cm4gZGF0YTtcblx0ICAgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBiaW5kUGhvbmU6IGZ1bmN0aW9uIChwaG9uZSwgdmNvZGUpIHtcblx0ICAgICAgICByZXR1cm4gZmV0Y2hfMS50YkZldGNoLnB1dCh7XG5cdCAgICAgICAgICAgIFR5cGU6ICd1c2VycycsXG5cdCAgICAgICAgICAgIElkOiAncGhvbmUnXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgICBwaG9uZTogcGhvbmUsXG5cdCAgICAgICAgICAgIHZjb2RlOiB2Y29kZVxuXHQgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICAgICAgdXNlcl9tb2RlbF8xLmRlZmF1bHQudXBkYXRlKHtcblx0ICAgICAgICAgICAgICAgIHBob25lOiBwaG9uZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fTtcblxuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuXHQgICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG5cdCAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cblx0ICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcblx0fTtcblx0dmFyIG1vZGVsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIFVzZXJNb2RlbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoVXNlck1vZGVsLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gVXNlck1vZGVsKCkge1xuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIHRoaXMubmFtZXNwYWNlID0gJ3VzZXI6bWUnO1xuXHQgICAgfVxuXHQgICAgVXNlck1vZGVsLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnNldE9uZSh0aGlzLm5hbWVzcGFjZSwgZGF0YSk7XG5cdCAgICB9O1xuXHQgICAgVXNlck1vZGVsLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T25lKHRoaXMubmFtZXNwYWNlKTtcblx0ICAgIH07XG5cdCAgICBVc2VyTW9kZWwucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChwYXRjaCkge1xuXHQgICAgICAgIHRoaXMudXBkYXRlT25lKHRoaXMubmFtZXNwYWNlLCBwYXRjaCk7XG5cdCAgICB9O1xuXHQgICAgVXNlck1vZGVsLnByb3RvdHlwZS51cGRhdGVFbWFpbCA9IGZ1bmN0aW9uIChlbWFpbHMpIHtcblx0ICAgICAgICB0aGlzLnVwZGF0ZU9uZSh0aGlzLm5hbWVzcGFjZSwge1xuXHQgICAgICAgICAgICBlbWFpbHM6IGVtYWlsc1xuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBVc2VyTW9kZWw7XG5cdH0pKG1vZGVsXzEuZGVmYXVsdCk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbmV3IFVzZXJNb2RlbCgpO1xuXG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgZGF0YWJhc2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHR2YXIgTW9kZWwgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTW9kZWwoKSB7XG5cdCAgICB9XG5cdCAgICBNb2RlbC5wcm90b3R5cGUuc2V0T25lID0gZnVuY3Rpb24gKG5hbWVzcGFjZSwgZGF0YSkge1xuXHQgICAgICAgIGRhdGFiYXNlXzEuZGVmYXVsdC5zdG9yZU9uZShuYW1lc3BhY2UsIGRhdGEpO1xuXHQgICAgICAgIHJldHVybiBkYXRhYmFzZV8xLmRlZmF1bHQuZ2V0T25lKG5hbWVzcGFjZSk7XG5cdCAgICB9O1xuXHQgICAgTW9kZWwucHJvdG90eXBlLnNldENvbGxlY3Rpb24gPSBmdW5jdGlvbiAobmFtZXNwYWNlLCBkYXRhKSB7XG5cdCAgICAgICAgZGF0YWJhc2VfMS5kZWZhdWx0LnN0b3JlQ29sbGVjdGlvbihuYW1lc3BhY2UsIGRhdGEpO1xuXHQgICAgICAgIHJldHVybiBkYXRhYmFzZV8xLmRlZmF1bHQuZ2V0T25lKG5hbWVzcGFjZSk7XG5cdCAgICB9O1xuXHQgICAgTW9kZWwucHJvdG90eXBlLmdldE9uZSA9IGZ1bmN0aW9uIChuYW1lc3BhY2UpIHtcblx0ICAgICAgICByZXR1cm4gZGF0YWJhc2VfMS5kZWZhdWx0LmdldE9uZShuYW1lc3BhY2UpO1xuXHQgICAgfTtcblx0ICAgIE1vZGVsLnByb3RvdHlwZS51cGRhdGVPbmUgPSBmdW5jdGlvbiAobmFtZXNwYWNlLCBwYXRjaCkge1xuXHQgICAgICAgIHZhciBDYWNoZSA9IGRhdGFiYXNlXzEuZGVmYXVsdC5nZXRPbmUobmFtZXNwYWNlKTtcblx0ICAgICAgICBpZiAoQ2FjaGUpIHtcblx0ICAgICAgICAgICAgZGF0YWJhc2VfMS5kZWZhdWx0LnVwZGF0ZU9uZShuYW1lc3BhY2UsIHBhdGNoKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgTW9kZWwucHJvdG90eXBlLnJlbW92ZU9uZSA9IGZ1bmN0aW9uIChuYW1lc3BhY2UpIHtcblx0ICAgICAgICByZXR1cm4gZGF0YWJhc2VfMS5kZWZhdWx0LmRlbGV0ZShuYW1lc3BhY2UpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBNb2RlbDtcblx0fSkoKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBNb2RlbDtcblxuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHRyYWNrXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIHVuaW9uX29iamVjdF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciBEYXRhQmFzZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEYXRhQmFzZSgpIHtcblx0ICAgICAgICB0aGlzLmRhdGEgPSB7fTtcblx0ICAgICAgICB0aGlzLnRpbWVvdXRJbmRleCA9IHt9O1xuXHQgICAgICAgIHRoaXMudHlwZUluZGV4ID0ge307XG5cdCAgICAgICAgdGhpcy5kYXRhTWFwcyA9IHt9O1xuXHQgICAgICAgIHRoaXMuY29sbGVjdGlvbkluZGV4ID0ge307XG5cdCAgICB9XG5cdCAgICBEYXRhQmFzZS5wcm90b3R5cGUuc3RvcmVPbmUgPSBmdW5jdGlvbiAoaW5kZXgsIGRhdGEsIGV4cGlyZSkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdCAgICAgICAgaWYgKGV4cGlyZSA9PT0gdm9pZCAwKSB7IGV4cGlyZSA9IDA7IH1cblx0ICAgICAgICBpZiAoIXRoaXMuZGF0YVtpbmRleF0pIHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuZGF0YVtpbmRleF0gPSBkYXRhO1xuXHQgICAgICAgICAgICBpZiAoZXhwaXJlICYmIHR5cGVvZiBleHBpcmUgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgdGltZW91dEluZGV4ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5kYXRhW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgIH0sIGV4cGlyZSk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRJbmRleFtpbmRleF0gPSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGltZXI6IHRpbWVvdXRJbmRleCxcblx0ICAgICAgICAgICAgICAgICAgICBiZWdpbjogRGF0ZS5ub3coKSxcblx0ICAgICAgICAgICAgICAgICAgICBleHBpcmU6IGV4cGlyZVxuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0cmFja18xLnRyYWNrT2JqZWN0KHJlc3VsdCk7XG5cdCAgICAgICAgICAgIHRoaXMudHlwZUluZGV4W2luZGV4XSA9ICdvYmplY3QnO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEYXRhQmFzZS5wcm90b3R5cGUuc3RvcmVDb2xsZWN0aW9uID0gZnVuY3Rpb24gKGluZGV4LCBjb2xsZWN0aW9uLCBleHBpcmUpIHtcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHQgICAgICAgIGlmIChleHBpcmUgPT09IHZvaWQgMCkgeyBleHBpcmUgPSAwOyB9XG5cdCAgICAgICAgdmFyIGluZGV4ZXMgPSB0aGlzLmNvbGxlY3Rpb25JbmRleFtpbmRleF0gPSBbXTtcblx0ICAgICAgICBpZiAoIXRoaXMuZGF0YVtpbmRleF0pIHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgICAgICAgICAgICB1dGlsc18xLmZvckVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY2FjaGUgPSBfdGhpcy5nZXRPbmUodmFsLl9pZCk7XG5cdCAgICAgICAgICAgICAgICBpZiAoY2FjaGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjYWNoZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWwpO1xuXHQgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlT25lKHZhbC5faWQsIHZhbCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB2YXIgbWFwcyA9IF90aGlzLmRhdGFNYXBzW3ZhbC5faWRdO1xuXHQgICAgICAgICAgICAgICAgaWYgKG1hcHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBtYXBzLnB1c2goaW5kZXgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YU1hcHNbdmFsLl9pZF0gPSBbaW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKHZhbC5faWQpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgdGhpcy5kYXRhW2luZGV4XSA9IHJlc3VsdDtcblx0ICAgICAgICAgICAgaWYgKGV4cGlyZSAmJiB0eXBlb2YgZXhwaXJlID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgICAgICAgICAgdmFyIHRpbWVvdXRJbmRleCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuZGF0YVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICB9LCBleHBpcmUpO1xuXHQgICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0SW5kZXhbaW5kZXhdID0ge1xuXHQgICAgICAgICAgICAgICAgICAgIHRpbWVyOiB0aW1lb3V0SW5kZXgsXG5cdCAgICAgICAgICAgICAgICAgICAgYmVnaW46IERhdGUubm93KCksXG5cdCAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiBleHBpcmVcblx0ICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdHJhY2tfMS50cmFja0NvbGxlY3Rpb24oaW5kZXgsIHJlc3VsdCk7XG5cdCAgICAgICAgICAgIHRoaXMudHlwZUluZGV4W2luZGV4XSA9ICdjb2xsZWN0aW9uJztcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGF0YUJhc2UucHJvdG90eXBlLnVwZGF0ZUNvbGxlY3Rpb24gPSBmdW5jdGlvbiAoaW5kZXgsIHBhdGNoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0ICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLmRhdGFbaW5kZXhdO1xuXHQgICAgICAgIGlmIChjYWNoZSAmJiBwYXRjaCBpbnN0YW5jZW9mIEFycmF5KSB7XG5cdCAgICAgICAgICAgIHZhciBpbmRleHMgPSB0aGlzLmNvbGxlY3Rpb25JbmRleFtpbmRleF07XG5cdCAgICAgICAgICAgIHV0aWxzXzEuZm9yRWFjaChwYXRjaCwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgb2xkRWxlID0gY2FjaGVba2V5XTtcblx0ICAgICAgICAgICAgICAgIGlmIChvbGRFbGUuX2lkID09PSB2YWwuX2lkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdXRpbHNfMS5hc3NpZ24ob2xkRWxlLCB2YWwpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldElkID0gdmFsLl9pZDtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhzLmluZGV4T2YodGFyZ2V0SWQpID09PSAtMSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zcGxpY2Uoa2V5LCAwLCB2YWwpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpbmRleHMuc3BsaWNlKGtleSwgMCwgdGFyZ2V0SWQpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdG9yZU9uZSh2YWwuX2lkLCB2YWwpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEluZGV4ID0gaW5kZXhzLmluZGV4T2YodGFyZ2V0SWQsIGtleSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNwbGljZShvbGRJbmRleCwgMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4cy5zcGxpY2Uob2xkSW5kZXgsIDEpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zcGxpY2Uoa2V5LCAwLCB2YWwpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpbmRleHMuc3BsaWNlKGtleSwgMCwgdGFyZ2V0SWQpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIERhdGFCYXNlLnByb3RvdHlwZS51cGRhdGVPbmUgPSBmdW5jdGlvbiAoaW5kZXgsIHBhdGNoLCBleHBpcmUpIHtcblx0ICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHQgICAgICAgIGlmIChleHBpcmUgPT09IHZvaWQgMCkgeyBleHBpcmUgPSAwOyB9XG5cdCAgICAgICAgdmFyIF9wYXRjaCA9IHV0aWxzXzEuY2xvbmUocGF0Y2gpO1xuXHQgICAgICAgIHZhciB2YWwgPSB0aGlzLmRhdGFbaW5kZXhdO1xuXHQgICAgICAgIGlmICh2YWwpIHtcblx0ICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXRjaCA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgICAgIHZhbCA9IHV0aWxzXzEuYXNzaWduKHZhbCwgX3BhdGNoKTtcblx0ICAgICAgICAgICAgICAgIGlmIChleHBpcmUgJiYgdHlwZW9mIGV4cGlyZSA9PT0gJ251bWJlcicpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXIgPSB0aGlzLnRpbWVvdXRJbmRleFtpbmRleF0udGltZXI7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0SW5kZXhbaW5kZXhdLmV4cGlyZSA9IGV4cGlyZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWVvdXRJbmRleFtpbmRleF0uYmVnaW4gPSBEYXRlLm5vdygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xuXHQgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLmRhdGFbaW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgICAgIH0sIGV4cGlyZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB0aGlzLmRhdGFbaW5kZXhdID0gdmFsO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgJ1BhdGNoIHRhcmdldCBzaG91bGQgYmUgT2JqZWN0Jztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhyb3cgJ0RhdGEgaXMgbm90IGV4aXN0ZWQsIGNhbiBub3QgdXBkYXRlJztcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGF0YUJhc2UucHJvdG90eXBlLmdldE9uZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHQgICAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhW2luZGV4XTtcblx0ICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgIGlmIChkYXRhKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnR5cGVJbmRleFtpbmRleF0gPT09ICdjb2xsZWN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgcmVzdWx0ID0gdXRpbHNfMS5jbG9uZShkYXRhKTtcblx0ICAgICAgICAgICAgICAgIHRyYWNrXzEudHJhY2tPbmUocmVzdWx0LCBpbmRleCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgdW5pb25fb2JqZWN0XzEuQmFzZU9iamVjdChkYXRhKTtcblx0ICAgICAgICAgICAgICAgIHRyYWNrXzEudHJhY2tPbmUocmVzdWx0KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBEYXRhQmFzZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0ICAgICAgICBkZWxldGUgdGhpcy5kYXRhW2luZGV4XTtcblx0ICAgICAgICB2YXIgbWFwcyA9IHRoaXMuZGF0YU1hcHNbaW5kZXhdO1xuXHQgICAgICAgIGlmIChtYXBzICYmIG1hcHMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHV0aWxzXzEuZm9yRWFjaChtYXBzLCBmdW5jdGlvbiAoY29sbGVjdGlvbkluZGV4KSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgaW5kZXhlcyA9IF90aGlzLmNvbGxlY3Rpb25JbmRleFtjb2xsZWN0aW9uSW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBfdGhpcy5kYXRhW2NvbGxlY3Rpb25JbmRleF07XG5cdCAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBpbmRleGVzLmluZGV4T2YoaW5kZXgpO1xuXHQgICAgICAgICAgICAgICAgaW5kZXhlcy5zcGxpY2UocG9zaXRpb24sIDEpO1xuXHQgICAgICAgICAgICAgICAgY29sbGVjdGlvbi5zcGxpY2UocG9zaXRpb24sIDEpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgRGF0YUJhc2UucHJvdG90eXBlLmdldEV4cGlyZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuXHQgICAgICAgIHZhciB0aW1lckluZGV4ID0gdGhpcy50aW1lb3V0SW5kZXhbaW5kZXhdO1xuXHQgICAgICAgIHJldHVybiB0aW1lckluZGV4LmJlZ2luIC0gdGltZXJJbmRleC5leHBpcmU7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIERhdGFCYXNlO1xuXHR9KSgpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IG5ldyBEYXRhQmFzZSgpO1xuXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgaW5kZXhfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdHJhY2tJbmRleCA9IHt9O1xuXHRleHBvcnRzLnRyYWNrT25lID0gZnVuY3Rpb24gKHRhcmdldCwgaW5kZXgpIHtcblx0ICAgIHZhciBfaWQgPSBpbmRleCA/IGluZGV4IDogdGFyZ2V0Ll9pZDtcblx0ICAgIGlmIChfaWQgJiYgdHJhY2tJbmRleFtfaWRdLmluZGV4T2YodGFyZ2V0KSA9PT0gLTEpIHtcblx0ICAgICAgICB0cmFja0luZGV4W19pZF0ucHVzaCh0YXJnZXQpO1xuXHQgICAgfVxuXHR9O1xuXHRleHBvcnRzLnRyYWNrT2JqZWN0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgICAgdmFyIF9pZCA9IHRhcmdldC5faWQ7XG5cdCAgICBpZiAoX2lkKSB7XG5cdCAgICAgICAgdHJhY2tJbmRleFtfaWRdID0gW107XG5cdCAgICAgICAgaW5kZXhfMS5mb3JFYWNoKHRhcmdldCwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG5cdCAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuXHQgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpbmRleF8xLmZvckVhY2godHJhY2tJbmRleFtfaWRdLCBmdW5jdGlvbiAodHJhY2tWYWwpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tWYWxba2V5XSA9IG5ld1ZhbHVlO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhbCA9IG5ld1ZhbHVlO1xuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWw7XG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fTtcblx0ZXhwb3J0cy50cmFja0NvbGxlY3Rpb24gPSBmdW5jdGlvbiAoaW5kZXgsIHRhcmdldCkge1xuXHQgICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIEFycmF5KSB7XG5cdCAgICAgICAgdHJhY2tJbmRleFtpbmRleF0gPSBbXTtcblx0ICAgICAgICB2YXIgc3BsaWNlID0gdGFyZ2V0LnNwbGljZTtcblx0ICAgICAgICB2YXIgcHVzaCA9IHRhcmdldC5wdXNoO1xuXHQgICAgICAgIHRhcmdldC5zcGxpY2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGluZGV4XzEuZm9yRWFjaCh0cmFja0luZGV4W2luZGV4XSwgZnVuY3Rpb24gKGNvbGxlY3Rpb24pIHtcblx0ICAgICAgICAgICAgICAgIHNwbGljZS5hcHBseShjb2xsZWN0aW9uLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgcmV0dXJuIHNwbGljZS5hcHBseSh0YXJnZXQsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICB0YXJnZXQucHVzaCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgaW5kZXhfMS5mb3JFYWNoKHRyYWNrSW5kZXhbaW5kZXhdLCBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xuXHQgICAgICAgICAgICAgICAgcHVzaC5hcHBseShjb2xsZWN0aW9uLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgcmV0dXJuIHB1c2guYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBlbHNlIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCB0cmFjayBhIG5vbmUgYXJyYXkgb2JqZWN0Jyk7XG5cdCAgICB9XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciAkaWQgPSAxO1xuXHRleHBvcnRzLk9iamVjdEluZGV4ID0ge307XG5cdHZhciBCYXNlT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEJhc2VPYmplY3QodGFyZ2V0KSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0ICAgICAgICB0aGlzLiRpZCA9IFwiJFwiICsgJGlkO1xuXHQgICAgICAgIHZhciBkYXRhID0gdXRpbHNfMS5jbG9uZSh0YXJnZXQpO1xuXHQgICAgICAgIHZhciBvYmplY3RJbmRleCA9IGV4cG9ydHMuT2JqZWN0SW5kZXhbKFwiJFwiICsgJGlkKV0gPSB7XG5cdCAgICAgICAgICAgIGRhdGFLZXlzOiBbXVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgdXRpbHNfMS5mb3JFYWNoKGRhdGEsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuXHQgICAgICAgICAgICBvYmplY3RJbmRleC5kYXRhS2V5cy5wdXNoKGtleSk7XG5cdCAgICAgICAgICAgIF90aGlzW2tleV0gPSB2YWw7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgJGlkKys7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gQmFzZU9iamVjdDtcblx0fSkoKTtcblx0ZXhwb3J0cy5CYXNlT2JqZWN0ID0gQmFzZU9iamVjdDtcblxuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIGZldGNoXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgb3JnYW5pemF0aW9uX21vZGVsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIG1lbWJlcl9tb2RlbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdGV4cG9ydHMuT3JnYW5pemF0aW9uQVBJID0ge1xuXHQgICAgZ2V0T3JnczogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjYWNoZSA9IG9yZ2FuaXphdGlvbl9tb2RlbF8xLmRlZmF1bHQuZ2V0QWxsKCk7XG5cdCAgICAgICAgaWYgKGNhY2hlKVxuXHQgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlKTtcblx0ICAgICAgICByZXR1cm4gZmV0Y2hfMS50YkZldGNoLmdldCh7XG5cdCAgICAgICAgICAgIFR5cGU6ICdvcmdhbml6YXRpb25zJ1xuXHQgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKG9yZ2FuaXphdGlvbnMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9yZ2FuaXphdGlvbl9tb2RlbF8xLmRlZmF1bHQuc2V0QWxsKG9yZ2FuaXphdGlvbnMpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIGdldE9uZTogZnVuY3Rpb24gKG9yZ2FuaXphdGlvbklkKSB7XG5cdCAgICAgICAgdmFyIGNhY2hlID0gb3JnYW5pemF0aW9uX21vZGVsXzEuZGVmYXVsdC5nZXQob3JnYW5pemF0aW9uSWQpO1xuXHQgICAgICAgIGlmIChjYWNoZSlcblx0ICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjYWNoZSk7XG5cdCAgICAgICAgcmV0dXJuIGZldGNoXzEudGJGZXRjaC5nZXQoe1xuXHQgICAgICAgICAgICBUeXBlOiAnb3JnYW5pemF0aW9ucycsXG5cdCAgICAgICAgICAgIElkOiBvcmdhbml6YXRpb25JZFxuXHQgICAgICAgIH0pXG5cdCAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChvcmdhbml6YXRpb24pIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9yZ2FuaXphdGlvbl9tb2RlbF8xLmRlZmF1bHQuc2V0KG9yZ2FuaXphdGlvbik7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgZ2V0TWVtYmVyczogZnVuY3Rpb24gKG9yZ2FuaXphdGlvbklkKSB7XG5cdCAgICAgICAgdmFyIGNhY2hlID0gbWVtYmVyX21vZGVsXzEuZGVmYXVsdC5nZXRPcmdNZW1iZXJzKG9yZ2FuaXphdGlvbklkKTtcblx0ICAgICAgICBpZiAoY2FjaGUpXG5cdCAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGUpO1xuXHQgICAgICAgIHJldHVybiBmZXRjaF8xLnRiRmV0Y2guZ2V0KHtcblx0ICAgICAgICAgICAgVmVyc2lvbjogJ1YyJyxcblx0ICAgICAgICAgICAgVHlwZTogJ29yZ2FuaXphdGlvbnMnLFxuXHQgICAgICAgICAgICBJZDogb3JnYW5pemF0aW9uSWQsXG5cdCAgICAgICAgICAgIFBhdGgxOiAnbWVtYmVycydcblx0ICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChtZW1iZXJzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBtZW1iZXJfbW9kZWxfMS5kZWZhdWx0LmFkZE9yZ01lbWJlcnMob3JnYW5pemF0aW9uSWQsIG1lbWJlcnMpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgbW9kZWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgT3JnYW5pemF0aW9uTW9kZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKE9yZ2FuaXphdGlvbk1vZGVsLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gT3JnYW5pemF0aW9uTW9kZWwoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBPcmdhbml6YXRpb25Nb2RlbC5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldE9uZSgnb3JnYW5pemF0aW9uJyk7XG5cdCAgICB9O1xuXHQgICAgT3JnYW5pemF0aW9uTW9kZWwucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldE9uZShpZCk7XG5cdCAgICB9O1xuXHQgICAgT3JnYW5pemF0aW9uTW9kZWwucHJvdG90eXBlLnNldEFsbCA9IGZ1bmN0aW9uIChvcmdhbml6YXRpb25zKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q29sbGVjdGlvbignb3JnYW5pemF0aW9uJywgb3JnYW5pemF0aW9ucyk7XG5cdCAgICB9O1xuXHQgICAgT3JnYW5pemF0aW9uTW9kZWwucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuc2V0T25lKGRhdGEuX2lkLCBkYXRhKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gT3JnYW5pemF0aW9uTW9kZWw7XG5cdH0pKG1vZGVsXzEuZGVmYXVsdCk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbmV3IE9yZ2FuaXphdGlvbk1vZGVsKCk7XG5cblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcblx0ICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuXHQgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG5cdCAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG5cdH07XG5cdHZhciBtb2RlbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBtZW1iZXJfc2NoZW1hXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0dmFyIHNjaGVtYV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBNZW1iZXJNb2RlbCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoTWVtYmVyTW9kZWwsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBNZW1iZXJNb2RlbCgpIHtcblx0ICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIE1lbWJlck1vZGVsLnByb3RvdHlwZS5hZGRQcm9qZWN0TWVtYmVycyA9IGZ1bmN0aW9uIChwcm9qZWN0SWQsIG1lbWJlcnMpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gW107XG5cdCAgICAgICAgdXRpbHNfMS5mb3JFYWNoKG1lbWJlcnMsIGZ1bmN0aW9uIChtZW1iZXIpIHtcblx0ICAgICAgICAgICAgcmVzdWx0LnB1c2goc2NoZW1hXzEuc2V0U2NoZW1hKG5ldyBtZW1iZXJfc2NoZW1hXzEuZGVmYXVsdCgpLCBtZW1iZXIpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB0aGlzLnNldENvbGxlY3Rpb24oXCJtZW1iZXJzOlwiICsgcHJvamVjdElkLCByZXN1bHQpO1xuXHQgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9O1xuXHQgICAgTWVtYmVyTW9kZWwucHJvdG90eXBlLmdldFByb2plY3RNZW1iZXJzID0gZnVuY3Rpb24gKHByb2plY3RJZCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldE9uZShcIm1lbWJlcnM6XCIgKyBwcm9qZWN0SWQpO1xuXHQgICAgfTtcblx0ICAgIE1lbWJlck1vZGVsLnByb3RvdHlwZS5yZW1vdmVNZW1iZXIgPSBmdW5jdGlvbiAobWVtYmVySWQpIHtcblx0ICAgICAgICB0aGlzLnJlbW92ZU9uZShtZW1iZXJJZCk7XG5cdCAgICB9O1xuXHQgICAgTWVtYmVyTW9kZWwucHJvdG90eXBlLmFkZE9yZ01lbWJlcnMgPSBmdW5jdGlvbiAob3JnYW5pemF0aW9uSWQsIG1lbWJlcnMpIHtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gW107XG5cdCAgICAgICAgdXRpbHNfMS5mb3JFYWNoKG1lbWJlcnMsIGZ1bmN0aW9uIChtZW1iZXIpIHtcblx0ICAgICAgICAgICAgcmVzdWx0LnB1c2goc2NoZW1hXzEuc2V0U2NoZW1hKG5ldyBtZW1iZXJfc2NoZW1hXzEuZGVmYXVsdCgpLCBtZW1iZXIpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICB0aGlzLnNldENvbGxlY3Rpb24oXCJtZW1iZXJzOlwiICsgb3JnYW5pemF0aW9uSWQsIHJlc3VsdCk7XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH07XG5cdCAgICBNZW1iZXJNb2RlbC5wcm90b3R5cGUuZ2V0T3JnTWVtYmVycyA9IGZ1bmN0aW9uIChvcmdhbml6YXRpb25JZCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmdldE9uZShcIm1lbWJlcnM6XCIgKyBvcmdhbml6YXRpb25JZCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIE1lbWJlck1vZGVsO1xuXHR9KShtb2RlbF8xLmRlZmF1bHQpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IG5ldyBNZW1iZXJNb2RlbCgpO1xuXG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgc2NoZW1hXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIE1lbWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG5cdCAgICBfX2V4dGVuZHMoTWVtYmVyLCBfc3VwZXIpO1xuXHQgICAgZnVuY3Rpb24gTWVtYmVyKCkge1xuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIHRoaXMuX2lkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX2JvdW5kVG9PYmplY3RJZCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLmJvdW5kVG9PYmplY3RUeXBlID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX3JvbGVJZCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLnZpc2l0ZWQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5qb2luZWQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5wdXNoU3RhdHVzID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMubmlja25hbWUgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5uaWNrbmFtZVB5ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMubmlja25hbWVQaW55aW4gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5oYXNWaXNpdGVkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX21lbWJlcklkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMucGhvbmUgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5sb2NhdGlvbiA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLndlYnNpdGUgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5sYXRlc3RBY3RpdmVkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuaXNBY3RpdmUgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5lbWFpbCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLm5hbWUgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5hdmF0YXJVcmwgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy50aXRsZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLnBpbnlpbiA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLnB5ID0gdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIE1lbWJlcjtcblx0fSkoc2NoZW1hXzEuU2NoZW1hKTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBNZW1iZXI7XG5cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBmZXRjaF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIG1lbWJlcl9tb2RlbF8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdHZhciBwcm9qZWN0X21vZGVsXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0ZXhwb3J0cy5Qcm9qZWN0QVBJID0ge1xuXHQgICAgZ2V0TWVtYmVyczogZnVuY3Rpb24gKHByb2plY3RJZCkge1xuXHQgICAgICAgIHZhciBjYWNoZSA9IG1lbWJlcl9tb2RlbF8xLmRlZmF1bHQuZ2V0UHJvamVjdE1lbWJlcnMocHJvamVjdElkKTtcblx0ICAgICAgICByZXR1cm4gY2FjaGUgP1xuXHQgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICByZXNvbHZlKGNhY2hlKTtcblx0ICAgICAgICAgICAgfSkgOlxuXHQgICAgICAgICAgICBmZXRjaF8xLnRiRmV0Y2guZ2V0KHtcblx0ICAgICAgICAgICAgICAgIFR5cGU6ICdwcm9qZWN0cycsXG5cdCAgICAgICAgICAgICAgICBJZDogcHJvamVjdElkLFxuXHQgICAgICAgICAgICAgICAgUGF0aDE6ICdtZW1iZXJzJ1xuXHQgICAgICAgICAgICB9KVxuXHQgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG1lbWJlcnMpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBtZW1iZXJfbW9kZWxfMS5kZWZhdWx0LmFkZFByb2plY3RNZW1iZXJzKHByb2plY3RJZCwgbWVtYmVycyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIGRlbGV0ZU1lbWJlcjogZnVuY3Rpb24gKG1lbWJlcklkKSB7XG5cdCAgICAgICAgcmV0dXJuIGZldGNoXzEudGJGZXRjaC5kZWxldGUoe1xuXHQgICAgICAgICAgICBUeXBlOiAnbWVtYmVycycsXG5cdCAgICAgICAgICAgIElkOiBtZW1iZXJJZFxuXHQgICAgICAgIH0pXG5cdCAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgbWVtYmVyX21vZGVsXzEuZGVmYXVsdC5yZW1vdmVNZW1iZXIobWVtYmVySWQpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIGdldEFsbDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBjYWNoZSA9IHByb2plY3RfbW9kZWxfMS5kZWZhdWx0LmdldFByb2plY3RzKCk7XG5cdCAgICAgICAgcmV0dXJuIGNhY2hlID9cblx0ICAgICAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x2ZShjYWNoZSk7XG5cdCAgICAgICAgICAgIH0pIDpcblx0ICAgICAgICAgICAgZmV0Y2hfMS50YkZldGNoLmdldCh7XG5cdCAgICAgICAgICAgICAgICBUeXBlOiAncHJvamVjdHMnXG5cdCAgICAgICAgICAgIH0pXG5cdCAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocHJvamVjdHMpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBwcm9qZWN0X21vZGVsXzEuZGVmYXVsdC5hZGRQcm9qZWN0cyhwcm9qZWN0cyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9O1xuXG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgbW9kZWxfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgdXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgcHJvamVjdF9zY2hlbWFfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHR2YXIgUHJvamVjdE1vZGVsID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcblx0ICAgIF9fZXh0ZW5kcyhQcm9qZWN0TW9kZWwsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBQcm9qZWN0TW9kZWwoKSB7XG5cdCAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBQcm9qZWN0TW9kZWwucHJvdG90eXBlLmFkZFByb2plY3RzID0gZnVuY3Rpb24gKHByb2plY3RzKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IHV0aWxzXzEuZGF0YXNUb1NjaGVtYXMocHJvamVjdHMsIG5ldyBwcm9qZWN0X3NjaGVtYV8xLmRlZmF1bHQoKSk7XG5cdCAgICAgICAgdGhpcy5zZXRDb2xsZWN0aW9uKFwicHJvamVjdHNcIiwgcmVzdWx0KTtcblx0ICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgfTtcblx0ICAgIFByb2plY3RNb2RlbC5wcm90b3R5cGUuZ2V0UHJvamVjdHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T25lKCdwcm9qZWN0cycpO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiBQcm9qZWN0TW9kZWw7XG5cdH0pKG1vZGVsXzEuZGVmYXVsdCk7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gbmV3IFByb2plY3RNb2RlbCgpO1xuXG5cbi8qKiovIH0sXG4vKiAyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG5cdCAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcblx0ICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuXHQgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuXHR9O1xuXHR2YXIgc2NoZW1hXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIFByb2plY3QgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuXHQgICAgX19leHRlbmRzKFByb2plY3QsIF9zdXBlcik7XG5cdCAgICBmdW5jdGlvbiBQcm9qZWN0KCkge1xuXHQgICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIHRoaXMuX2lkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMubmFtZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLl9jcmVhdG9ySWQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5sb2dvID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMucHkgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5waW55aW4gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLmNhdGVnb3J5ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX29yZ2FuaXphdGlvbklkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMubmF2aWdhdGlvbiA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLnZpc2liaWxpdHkgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5jcmVhdGVkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMudXBkYXRlZCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLmlzQXJjaGl2ZWQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5pbnZpdGVMaW5rID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuaXNTdGFyID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuaGFzUmlnaHQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5oYXNPcmdSaWdodCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLm9yZ2FuaXphdGlvbiA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLmZvcmtzQ291bnQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy50YXNrc0NvdW50ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMucG9zdHNDb3VudCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLmV2ZW50c0NvdW50ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMud29ya3NDb3VudCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLnRhZ3NDb3VudCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLl9kZWZhdWx0Um9sZUlkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuY3JlYXRvciA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLnVucmVhZENvdW50ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMudW5yZWFkTWVzc2FnZUNvdW50ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMucHVzaFN0YXR1cyA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLmNhblF1aXQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5jYW5EZWxldGUgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5jYW5BcmNoaXZlID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuY2FuVHJhbnNmZXIgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5fcm9sZUlkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMubGluayA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLm1vYmlsZUludml0ZUxpbmsgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5zaWduQ29kZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLnN0YXJzQ291bnQgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdGhpcy5fcm9vdENvbGxlY3Rpb25JZCA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLl9kZWZhdWx0Q29sbGVjdGlvbklkID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuc2hvcnRMaW5rID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuY2FsTGluayA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0aGlzLnRhc2tDYWxMaW5rID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHRoaXMuX29yZ1JvbGVJZCA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBQcm9qZWN0O1xuXHR9KShzY2hlbWFfMS5TY2hlbWEpO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb2plY3Q7XG5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogZGlzdC90YnNkay5taW4uanNcbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGM4ZjVlNzc1NDIyYTFmMGQwMzBhXG4gKiovIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2pha2VhcmNoaWJhbGQvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgMy4wLjJcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCAodHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoeCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuICAgIGlmICghQXJyYXkuaXNBcnJheSkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5ID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0O1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm47XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuXSA9IGNhbGxiYWNrO1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKyAxXSA9IGFyZztcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKz0gMjtcbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID09PSAyKSB7XG4gICAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAgICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcbiAgICAgICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcChhc2FwRm4pIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwID0gYXNhcEZuO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgfHwge307XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGlzTm9kZSA9IHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbiAgICAvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgICAvLyBub2RlXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCkge1xuICAgICAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB2ZXJ0eFxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgdmFyIG9ic2VydmVyID0gbmV3IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBub2RlLmRhdGEgPSAoaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDIpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB3ZWIgd29ya2VyXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoLCAxKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2goKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW47IGkrPTIpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldO1xuICAgICAgICB2YXIgYXJnID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV07XG5cbiAgICAgICAgY2FsbGJhY2soYXJnKTtcblxuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID0gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXR0ZW1wdFZlcnR4KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHIgPSByZXF1aXJlO1xuICAgICAgICB2YXIgdmVydHggPSByKCd2ZXJ0eCcpO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoO1xuICAgIC8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG4gICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlcikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTWVzc2FnZUNoYW5uZWwoKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCgpIHt9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAgID0gdm9pZCAwO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQgPSAxO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCAgPSAyO1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQoKSB7XG4gICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duKCkge1xuICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKHByb21pc2UpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcbiAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGVycm9yID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB0aGVuYWJsZSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cbiAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICAgICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0sIHByb21pc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gICAgICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSkge1xuICAgICAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdGhlbiA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4obWF5YmVUaGVuYWJsZSk7XG5cbiAgICAgICAgaWYgKHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGVuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih0aGVuKSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQoKSk7XG4gICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgICAgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcbiAgICAgIH1cblxuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaChwcm9taXNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICAgICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQ7XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcHJvbWlzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuICAgICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRDtcbiAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICAgICAgdmFyIGxlbmd0aCA9IHN1YnNjcmliZXJzLmxlbmd0aDtcblxuICAgICAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRF0gID0gb25SZWplY3Rpb247XG5cbiAgICAgIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwYXJlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSkge1xuICAgICAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG4gICAgICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gICAgICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7IHJldHVybjsgfVxuXG4gICAgICB2YXIgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICAgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICAgICAgdmFyIGhhc0NhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgICAgICB2YWx1ZSwgZXJyb3IsIHN1Y2NlZWRlZCwgZmFpbGVkO1xuXG4gICAgICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICAgICAgdmFsdWUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgICAgICBpZiAodmFsdWUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gZGV0YWlsO1xuICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcbiAgICAgICAgLy8gbm9vcFxuICAgICAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKXtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gICAgICBlbnVtZXJhdG9yLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gICAgICBlbnVtZXJhdG9yLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICAgIGlmIChlbnVtZXJhdG9yLl92YWxpZGF0ZUlucHV0KGlucHV0KSkge1xuICAgICAgICBlbnVtZXJhdG9yLl9pbnB1dCAgICAgPSBpbnB1dDtcbiAgICAgICAgZW51bWVyYXRvci5sZW5ndGggICAgID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICBlbnVtZXJhdG9yLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cbiAgICAgICAgZW51bWVyYXRvci5faW5pdCgpO1xuXG4gICAgICAgIGlmIChlbnVtZXJhdG9yLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwoZW51bWVyYXRvci5wcm9taXNlLCBlbnVtZXJhdG9yLl9yZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVudW1lcmF0b3IubGVuZ3RoID0gZW51bWVyYXRvci5sZW5ndGggfHwgMDtcbiAgICAgICAgICBlbnVtZXJhdG9yLl9lbnVtZXJhdGUoKTtcbiAgICAgICAgICBpZiAoZW51bWVyYXRvci5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKGVudW1lcmF0b3IucHJvbWlzZSwgZW51bWVyYXRvci5fcmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChlbnVtZXJhdG9yLnByb21pc2UsIGVudW1lcmF0b3IuX3ZhbGlkYXRpb25FcnJvcigpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRlSW5wdXQgPSBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShpbnB1dCk7XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fdmFsaWRhdGlvbkVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuICAgIH07XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcjtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICAgIHZhciBsZW5ndGggID0gZW51bWVyYXRvci5sZW5ndGg7XG4gICAgICB2YXIgcHJvbWlzZSA9IGVudW1lcmF0b3IucHJvbWlzZTtcbiAgICAgIHZhciBpbnB1dCAgID0gZW51bWVyYXRvci5faW5wdXQ7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZW51bWVyYXRvci5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbihlbnRyeSwgaSkge1xuICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuICAgICAgdmFyIGMgPSBlbnVtZXJhdG9yLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuXG4gICAgICBpZiAobGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoZW50cnkpKSB7XG4gICAgICAgIGlmIChlbnRyeS5jb25zdHJ1Y3RvciA9PT0gYyAmJiBlbnRyeS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcbiAgICAgICAgICBlbnRyeS5fb25lcnJvciA9IG51bGw7XG4gICAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZW51bWVyYXRvci5fd2lsbFNldHRsZUF0KGMucmVzb2x2ZShlbnRyeSksIGkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbnVtZXJhdG9yLl9yZW1haW5pbmctLTtcbiAgICAgICAgZW51bWVyYXRvci5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24oc3RhdGUsIGksIHZhbHVlKSB7XG4gICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG4gICAgICB2YXIgcHJvbWlzZSA9IGVudW1lcmF0b3IucHJvbWlzZTtcblxuICAgICAgaWYgKHByb21pc2UuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3JlbWFpbmluZy0tO1xuXG4gICAgICAgIGlmIChzdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVudW1lcmF0b3IuX3Jlc3VsdFtpXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlbnVtZXJhdG9yLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBlbnVtZXJhdG9yLl9yZXN1bHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uKHByb21pc2UsIGkpIHtcbiAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCwgaSwgcmVhc29uKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGwoZW50cmllcykge1xuICAgICAgcmV0dXJuIG5ldyBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGw7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZShlbnRyaWVzKSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICAgIGlmICghbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuXG4gICAgICBmdW5jdGlvbiBvbkZ1bGZpbGxtZW50KHZhbHVlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblJlamVjdGlvbihyZWFzb24pIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSksIHVuZGVmaW5lZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUob2JqZWN0KSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICAgICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdChyZWFzb24pIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGNvdW50ZXIgPSAwO1xuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIoKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZTtcbiAgICAvKipcbiAgICAgIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgICAgIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG4gICAgICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cbiAgICAgIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gICAgICBUZXJtaW5vbG9neVxuICAgICAgLS0tLS0tLS0tLS1cblxuICAgICAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgICAgIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cbiAgICAgIC0gYHZhbHVlYCBpcyBhbnkgbGVnYWwgSmF2YVNjcmlwdCB2YWx1ZSAoaW5jbHVkaW5nIHVuZGVmaW5lZCwgYSB0aGVuYWJsZSwgb3IgYSBwcm9taXNlKS5cbiAgICAgIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAgICAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuICAgICAgLSBgc2V0dGxlZGAgdGhlIGZpbmFsIHJlc3Rpbmcgc3RhdGUgb2YgYSBwcm9taXNlLCBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG5cbiAgICAgIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICAgICAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcbiAgICAgIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcbiAgICAgIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gICAgICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcbiAgICAgIHByb21pc2UsIHRoZW4gdGhlIG9yaWdpbmFsIHByb21pc2UncyBzZXR0bGVkIHN0YXRlIHdpbGwgbWF0Y2ggdGhlIHZhbHVlJ3NcbiAgICAgIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICAgICAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuICAgICAgaXRzZWxmIGZ1bGZpbGwuXG5cblxuICAgICAgQmFzaWMgVXNhZ2U6XG4gICAgICAtLS0tLS0tLS0tLS1cblxuICAgICAgYGBganNcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIG9uIHN1Y2Nlc3NcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG5cbiAgICAgICAgLy8gb24gZmFpbHVyZVxuICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgIH0pO1xuXG4gICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAvLyBvbiByZWplY3Rpb25cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEFkdmFuY2VkIFVzYWdlOlxuICAgICAgLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcbiAgICAgIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gICAgICBgYGBqc1xuICAgICAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgICAgICAvLyBvbiBmdWxmaWxsbWVudFxuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIC8vIG9uIHJlamVjdGlvblxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICAgICAgYGBganNcbiAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgICAgIGdldEpTT04oJy9jb21tZW50cycpXG4gICAgICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG4gICAgICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICAgICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBAY2xhc3MgUHJvbWlzZVxuICAgICAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEBjb25zdHJ1Y3RvclxuICAgICovXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UocmVzb2x2ZXIpIHtcbiAgICAgIHRoaXMuX2lkID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGNvdW50ZXIrKztcbiAgICAgIHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgICAgIGlmICghbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKHJlc29sdmVyKSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UpKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCk7XG4gICAgICAgIH1cblxuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZSh0aGlzLCByZXNvbHZlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuYWxsID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJhY2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlc29sdmUgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlamVjdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcjtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0QXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwO1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9hc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXA7XG5cbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5wcm90b3R5cGUgPSB7XG4gICAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cbiAgICAvKipcbiAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBDaGFpbmluZ1xuICAgICAgLS0tLS0tLS1cblxuICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgICB9KTtcblxuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgICAgfSk7XG4gICAgICBgYGBcbiAgICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEFzc2ltaWxhdGlvblxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gICAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBTaW1wbGUgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cblxuICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuXG4gICAgICBFcnJiYWNrIEV4YW1wbGVcblxuICAgICAgYGBganNcbiAgICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBFeGFtcGxlXG4gICAgICAtLS0tLS0tLS0tLS0tLVxuXG4gICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cbiAgICAgIGBgYGphdmFzY3JpcHRcbiAgICAgIHZhciBhdXRob3IsIGJvb2tzO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuXG4gICAgICBFcnJiYWNrIEV4YW1wbGVcblxuICAgICAgYGBganNcblxuICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG5cbiAgICAgIH1cblxuICAgICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICBmaW5kQXV0aG9yKCkuXG4gICAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgICAvLyBmb3VuZCBib29rc1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEBtZXRob2QgdGhlblxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgIHRoZW46IGZ1bmN0aW9uKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gICAgICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgICAgICB2YXIgc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG4gICAgICAgIGlmIChzdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEICYmICFvbkZ1bGZpbGxtZW50IHx8IHN0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCAmJiAhb25SZWplY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgICB2YXIgcmVzdWx0ID0gcGFyZW50Ll9yZXN1bHQ7XG5cbiAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW3N0YXRlIC0gMV07XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHN0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHJlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgIH0sXG5cbiAgICAvKipcbiAgICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgICAgfVxuXG4gICAgICAvLyBzeW5jaHJvbm91c1xuICAgICAgdHJ5IHtcbiAgICAgICAgZmluZEF1dGhvcigpO1xuICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgIH1cblxuICAgICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICAgICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBAbWV0aG9kIGNhdGNoXG4gICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICAgICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgICAgQHJldHVybiB7UHJvbWlzZX1cbiAgICAqL1xuICAgICAgJ2NhdGNoJzogZnVuY3Rpb24ob25SZWplY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG4gICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsKCkge1xuICAgICAgdmFyIGxvY2FsO1xuXG4gICAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBsb2NhbCA9IGdsb2JhbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbG9jYWwgPSBzZWxmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gICAgICBpZiAoUCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxvY2FsLlByb21pc2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdDtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGw7XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZSA9IHtcbiAgICAgICdQcm9taXNlJzogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQsXG4gICAgICAncG9seWZpbGwnOiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHRcbiAgICB9O1xuXG4gICAgLyogZ2xvYmFsIGRlZmluZTp0cnVlIG1vZHVsZTp0cnVlIHdpbmRvdzogdHJ1ZSAqL1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZVsnYW1kJ10pIHtcbiAgICAgIGRlZmluZShmdW5jdGlvbigpIHsgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7IH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlWydleHBvcnRzJ10pIHtcbiAgICAgIG1vZHVsZVsnZXhwb3J0cyddID0gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpc1snRVM2UHJvbWlzZSddID0gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTtcbiAgICB9XG5cbiAgICBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQoKTtcbn0pLmNhbGwodGhpcyk7XG5cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgc2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wcm9jZXNzL2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanNcbiAqKiBtb2R1bGUgaWQgPSA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpZiAoc2VsZi5mZXRjaCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuICAgIH1cbiAgICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gICAgdGhpcy5tYXAgPSB7fVxuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG4gICAgICB9LCB0aGlzKVxuXG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gICAgdmFyIGxpc3QgPSB0aGlzLm1hcFtuYW1lXVxuICAgIGlmICghbGlzdCkge1xuICAgICAgbGlzdCA9IFtdXG4gICAgICB0aGlzLm1hcFtuYW1lXSA9IGxpc3RcbiAgICB9XG4gICAgbGlzdC5wdXNoKHZhbHVlKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldIHx8IFtdXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMubWFwKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHRoaXMubWFwW25hbWVdLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcbiAgICAgIH0sIHRoaXMpXG4gICAgfSwgdGhpcylcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgICAgfVxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcbiAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgfVxuXG4gIHZhciBzdXBwb3J0ID0ge1xuICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBCbG9iKCk7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfSkoKSxcbiAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuICAgIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcbiAgfVxuXG4gIGZ1bmN0aW9uIEJvZHkoKSB7XG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cblxuICAgIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG4gICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QmxvYiA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5mb3JtRGF0YSAmJiBGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKCFib2R5KSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICAvLyBPbmx5IHN1cHBvcnQgQXJyYXlCdWZmZXJzIGZvciBQT1NUIG1ldGhvZC5cbiAgICAgICAgLy8gUmVjZWl2aW5nIEFycmF5QnVmZmVycyBoYXBwZW5zIHZpYSBCbG9icywgaW5zdGVhZC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgQm9keUluaXQgdHlwZScpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcbiAgICAgIH1cblxuICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICByZXR1cm4gcmVqZWN0ZWQgPyByZWplY3RlZCA6IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuICAgICAgdGhpcy5mb3JtRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbiAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblxuICBmdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG4gICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICAgIHJldHVybiAobWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEpID8gdXBjYXNlZCA6IG1ldGhvZFxuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcbiAgICBpZiAoUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihpbnB1dCkpIHtcbiAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuICAgICAgfVxuICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmxcbiAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcbiAgICAgIH1cbiAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG4gICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG4gICAgICBpZiAoIWJvZHkpIHtcbiAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdFxuICAgICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cmwgPSBpbnB1dFxuICAgIH1cblxuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ29taXQnXG4gICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG4gICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgfVxuICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCB0aGlzLm1vZGUgfHwgbnVsbFxuICAgIHRoaXMucmVmZXJyZXIgPSBudWxsXG5cbiAgICBpZiAoKHRoaXMubWV0aG9kID09PSAnR0VUJyB8fCB0aGlzLm1ldGhvZCA9PT0gJ0hFQUQnKSAmJiBib2R5KSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cycpXG4gICAgfVxuICAgIHRoaXMuX2luaXRCb2R5KGJvZHkpXG4gIH1cblxuICBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzKVxuICB9XG5cbiAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcbiAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgYm9keS50cmltKCkuc3BsaXQoJyYnKS5mb3JFYWNoKGZ1bmN0aW9uKGJ5dGVzKSB7XG4gICAgICBpZiAoYnl0ZXMpIHtcbiAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuICAgICAgICB2YXIgbmFtZSA9IHNwbGl0LnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignPScpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBmb3JtXG4gIH1cblxuICBmdW5jdGlvbiBoZWFkZXJzKHhocikge1xuICAgIHZhciBoZWFkID0gbmV3IEhlYWRlcnMoKVxuICAgIHZhciBwYWlycyA9IHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS50cmltKCkuc3BsaXQoJ1xcbicpXG4gICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIHZhciBzcGxpdCA9IGhlYWRlci50cmltKCkuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG4gICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc6JykudHJpbSgpXG4gICAgICBoZWFkLmFwcGVuZChrZXksIHZhbHVlKVxuICAgIH0pXG4gICAgcmV0dXJuIGhlYWRcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblxuICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9XG4gICAgfVxuXG4gICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG4gICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG4gICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHRcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmwgfHwgJydcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpXG5cbiAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZSh0aGlzLl9ib2R5SW5pdCwge1xuICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyksXG4gICAgICB1cmw6IHRoaXMudXJsXG4gICAgfSlcbiAgfVxuXG4gIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSlcbiAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cbiAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbiAgfVxuXG4gIHNlbGYuSGVhZGVycyA9IEhlYWRlcnM7XG4gIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3Q7XG4gIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZTtcblxuICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVxdWVzdFxuICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG4gICAgICAgIHJlcXVlc3QgPSBpbnB1dFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuICAgICAgfVxuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgZnVuY3Rpb24gcmVzcG9uc2VVUkwoKSB7XG4gICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VVUkxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIHNlY3VyaXR5IHdhcm5pbmdzIG9uIGdldFJlc3BvbnNlSGVhZGVyIHdoZW4gbm90IGFsbG93ZWQgYnkgQ09SU1xuICAgICAgICBpZiAoL15YLVJlcXVlc3QtVVJMOi9tLnRlc3QoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSkge1xuICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzdGF0dXMgPSAoeGhyLnN0YXR1cyA9PT0gMTIyMykgPyAyMDQgOiB4aHIuc3RhdHVzXG4gICAgICAgIGlmIChzdGF0dXMgPCAxMDAgfHwgc3RhdHVzID4gNTk5KSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKHhociksXG4gICAgICAgICAgdXJsOiByZXNwb25zZVVSTCgpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuICAgICAgfVxuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwsIHRydWUpXG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcbiAgICAgIH0pXG5cbiAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG4gICAgfSlcbiAgfVxuICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxufSkoKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3doYXR3Zy1mZXRjaC9mZXRjaC5qc1xuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbiAoZXhwb3J0cykgeyd1c2Ugc3RyaWN0JztcbiAgLy9zaGFyZWQgcG9pbnRlclxuICB2YXIgaTtcbiAgLy9zaG9ydGN1dHNcbiAgdmFyIGRlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5LCBpcyA9IGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gaXNOYU4oYSk/IGlzTmFOKGIpOiBhID09PSBiOyB9O1xuXG5cbiAgLy9Qb2x5ZmlsbCBnbG9iYWwgb2JqZWN0c1xuICBpZiAodHlwZW9mIFdlYWtNYXAgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBleHBvcnRzLldlYWtNYXAgPSBjcmVhdGVDb2xsZWN0aW9uKHtcbiAgICAgIC8vIFdlYWtNYXAjZGVsZXRlKGtleTp2b2lkKik6Ym9vbGVhblxuICAgICAgJ2RlbGV0ZSc6IHNoYXJlZERlbGV0ZSxcbiAgICAgIC8vIFdlYWtNYXAjY2xlYXIoKTpcbiAgICAgIGNsZWFyOiBzaGFyZWRDbGVhcixcbiAgICAgIC8vIFdlYWtNYXAjZ2V0KGtleTp2b2lkKik6dm9pZCpcbiAgICAgIGdldDogc2hhcmVkR2V0LFxuICAgICAgLy8gV2Vha01hcCNoYXMoa2V5OnZvaWQqKTpib29sZWFuXG4gICAgICBoYXM6IG1hcEhhcyxcbiAgICAgIC8vIFdlYWtNYXAjc2V0KGtleTp2b2lkKiwgdmFsdWU6dm9pZCopOnZvaWRcbiAgICAgIHNldDogc2hhcmVkU2V0XG4gICAgfSwgdHJ1ZSk7XG4gIH1cblxuICBpZiAodHlwZW9mIE1hcCA9PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgKChuZXcgTWFwKS52YWx1ZXMpICE9PSAnZnVuY3Rpb24nIHx8ICEobmV3IE1hcCkudmFsdWVzKCkubmV4dCkge1xuICAgIGV4cG9ydHMuTWFwID0gY3JlYXRlQ29sbGVjdGlvbih7XG4gICAgICAvLyBXZWFrTWFwI2RlbGV0ZShrZXk6dm9pZCopOmJvb2xlYW5cbiAgICAgICdkZWxldGUnOiBzaGFyZWREZWxldGUsXG4gICAgICAvLzp3YXMgTWFwI2dldChrZXk6dm9pZCpbLCBkM2ZhdWx0OnZvaWQqXSk6dm9pZCpcbiAgICAgIC8vIE1hcCNoYXMoa2V5OnZvaWQqKTpib29sZWFuXG4gICAgICBoYXM6IG1hcEhhcyxcbiAgICAgIC8vIE1hcCNnZXQoa2V5OnZvaWQqKTpib29sZWFuXG4gICAgICBnZXQ6IHNoYXJlZEdldCxcbiAgICAgIC8vIE1hcCNzZXQoa2V5OnZvaWQqLCB2YWx1ZTp2b2lkKik6dm9pZFxuICAgICAgc2V0OiBzaGFyZWRTZXQsXG4gICAgICAvLyBNYXAja2V5cyh2b2lkKTpJdGVyYXRvclxuICAgICAga2V5czogc2hhcmVkS2V5cyxcbiAgICAgIC8vIE1hcCN2YWx1ZXModm9pZCk6SXRlcmF0b3JcbiAgICAgIHZhbHVlczogc2hhcmVkVmFsdWVzLFxuICAgICAgLy8gTWFwI2VudHJpZXModm9pZCk6SXRlcmF0b3JcbiAgICAgIGVudHJpZXM6IG1hcEVudHJpZXMsXG4gICAgICAvLyBNYXAjZm9yRWFjaChjYWxsYmFjazpGdW5jdGlvbiwgY29udGV4dDp2b2lkKik6dm9pZCA9PT4gY2FsbGJhY2suY2FsbChjb250ZXh0LCBrZXksIHZhbHVlLCBtYXBPYmplY3QpID09PSBub3QgaW4gc3BlY3NgXG4gICAgICBmb3JFYWNoOiBzaGFyZWRGb3JFYWNoLFxuICAgICAgLy8gTWFwI2NsZWFyKCk6XG4gICAgICBjbGVhcjogc2hhcmVkQ2xlYXJcbiAgICB9KTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgU2V0ID09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiAoKG5ldyBTZXQpLnZhbHVlcykgIT09ICdmdW5jdGlvbicgfHwgIShuZXcgU2V0KS52YWx1ZXMoKS5uZXh0KSB7XG4gICAgZXhwb3J0cy5TZXQgPSBjcmVhdGVDb2xsZWN0aW9uKHtcbiAgICAgIC8vIFNldCNoYXModmFsdWU6dm9pZCopOmJvb2xlYW5cbiAgICAgIGhhczogc2V0SGFzLFxuICAgICAgLy8gU2V0I2FkZCh2YWx1ZTp2b2lkKik6Ym9vbGVhblxuICAgICAgYWRkOiBzaGFyZWRBZGQsXG4gICAgICAvLyBTZXQjZGVsZXRlKGtleTp2b2lkKik6Ym9vbGVhblxuICAgICAgJ2RlbGV0ZSc6IHNoYXJlZERlbGV0ZSxcbiAgICAgIC8vIFNldCNjbGVhcigpOlxuICAgICAgY2xlYXI6IHNoYXJlZENsZWFyLFxuICAgICAgLy8gU2V0I2tleXModm9pZCk6SXRlcmF0b3JcbiAgICAgIGtleXM6IHNoYXJlZFZhbHVlcywgLy8gc3BlY3MgYWN0dWFsbHkgc2F5IFwidGhlIHNhbWUgZnVuY3Rpb24gb2JqZWN0IGFzIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSB2YWx1ZXMgcHJvcGVydHlcIlxuICAgICAgLy8gU2V0I3ZhbHVlcyh2b2lkKTpJdGVyYXRvclxuICAgICAgdmFsdWVzOiBzaGFyZWRWYWx1ZXMsXG4gICAgICAvLyBTZXQjZW50cmllcyh2b2lkKTpJdGVyYXRvclxuICAgICAgZW50cmllczogc2V0RW50cmllcyxcbiAgICAgIC8vIFNldCNmb3JFYWNoKGNhbGxiYWNrOkZ1bmN0aW9uLCBjb250ZXh0OnZvaWQqKTp2b2lkID09PiBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCkgPT09IG5vdCBpbiBzcGVjc1xuICAgICAgZm9yRWFjaDogc2hhcmVkRm9yRWFjaFxuICAgIH0pO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBXZWFrU2V0ID09ICd1bmRlZmluZWQnKSB7XG4gICAgZXhwb3J0cy5XZWFrU2V0ID0gY3JlYXRlQ29sbGVjdGlvbih7XG4gICAgICAvLyBXZWFrU2V0I2RlbGV0ZShrZXk6dm9pZCopOmJvb2xlYW5cbiAgICAgICdkZWxldGUnOiBzaGFyZWREZWxldGUsXG4gICAgICAvLyBXZWFrU2V0I2FkZCh2YWx1ZTp2b2lkKik6Ym9vbGVhblxuICAgICAgYWRkOiBzaGFyZWRBZGQsXG4gICAgICAvLyBXZWFrU2V0I2NsZWFyKCk6XG4gICAgICBjbGVhcjogc2hhcmVkQ2xlYXIsXG4gICAgICAvLyBXZWFrU2V0I2hhcyh2YWx1ZTp2b2lkKik6Ym9vbGVhblxuICAgICAgaGFzOiBzZXRIYXNcbiAgICB9LCB0cnVlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEVTNiBjb2xsZWN0aW9uIGNvbnN0cnVjdG9yXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBhIGNvbGxlY3Rpb24gY2xhc3NcbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZUNvbGxlY3Rpb24ocHJvdG8sIG9iamVjdE9ubHkpe1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24oYSl7XG4gICAgICBpZiAoIXRoaXMgfHwgdGhpcy5jb25zdHJ1Y3RvciAhPT0gQ29sbGVjdGlvbikgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGEpO1xuICAgICAgdGhpcy5fa2V5cyA9IFtdO1xuICAgICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgICB0aGlzLl9pdHAgPSBbXTsgLy8gaXRlcmF0aW9uIHBvaW50ZXJzXG4gICAgICB0aGlzLm9iamVjdE9ubHkgPSBvYmplY3RPbmx5O1xuXG4gICAgICAvL3BhcnNlIGluaXRpYWwgaXRlcmFibGUgYXJndW1lbnQgcGFzc2VkXG4gICAgICBpZiAoYSkgaW5pdC5jYWxsKHRoaXMsIGEpO1xuICAgIH1cblxuICAgIC8vZGVmaW5lIHNpemUgZm9yIG5vbiBvYmplY3Qtb25seSBjb2xsZWN0aW9uc1xuICAgIGlmICghb2JqZWN0T25seSkge1xuICAgICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICdzaXplJywge1xuICAgICAgICBnZXQ6IHNoYXJlZFNpemVcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vc2V0IHByb3RvdHlwZVxuICAgIHByb3RvLmNvbnN0cnVjdG9yID0gQ29sbGVjdGlvbjtcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZSA9IHByb3RvO1xuXG4gICAgcmV0dXJuIENvbGxlY3Rpb247XG4gIH1cblxuXG4gIC8qKiBwYXJzZSBpbml0aWFsIGl0ZXJhYmxlIGFyZ3VtZW50IHBhc3NlZCAqL1xuICBmdW5jdGlvbiBpbml0KGEpe1xuICAgIHZhciBpO1xuICAgIC8vaW5pdCBTZXQgYXJndW1lbnQsIGxpa2UgYFsxLDIsMyx7fV1gXG4gICAgaWYgKHRoaXMuYWRkKVxuICAgICAgYS5mb3JFYWNoKHRoaXMuYWRkLCB0aGlzKTtcbiAgICAvL2luaXQgTWFwIGFyZ3VtZW50IGxpa2UgYFtbMSwyXSwgW3t9LCA0XV1gXG4gICAgZWxzZVxuICAgICAgYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3RoaXMuc2V0KGFbMF0sYVsxXSl9LCB0aGlzKTtcbiAgfVxuXG5cbiAgLyoqIGRlbGV0ZSAqL1xuICBmdW5jdGlvbiBzaGFyZWREZWxldGUoa2V5KSB7XG4gICAgaWYgKHRoaXMuaGFzKGtleSkpIHtcbiAgICAgIHRoaXMuX2tleXMuc3BsaWNlKGksIDEpO1xuICAgICAgdGhpcy5fdmFsdWVzLnNwbGljZShpLCAxKTtcbiAgICAgIC8vIHVwZGF0ZSBpdGVyYXRpb24gcG9pbnRlcnNcbiAgICAgIHRoaXMuX2l0cC5mb3JFYWNoKGZ1bmN0aW9uKHApIHsgaWYgKGkgPCBwWzBdKSBwWzBdLS07IH0pO1xuICAgIH1cbiAgICAvLyBBdXJvcmEgaGVyZSBkb2VzIGl0IHdoaWxlIENhbmFyeSBkb2Vzbid0XG4gICAgcmV0dXJuIC0xIDwgaTtcbiAgfTtcblxuICBmdW5jdGlvbiBzaGFyZWRHZXQoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzKGtleSkgPyB0aGlzLl92YWx1ZXNbaV0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYXMobGlzdCwga2V5KSB7XG4gICAgaWYgKHRoaXMub2JqZWN0T25seSAmJiBrZXkgIT09IE9iamVjdChrZXkpKVxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdmFsdWUgdXNlZCBhcyB3ZWFrIGNvbGxlY3Rpb24ga2V5XCIpO1xuICAgIC8vTmFOIG9yIDAgcGFzc2VkXG4gICAgaWYgKGtleSAhPSBrZXkgfHwga2V5ID09PSAwKSBmb3IgKGkgPSBsaXN0Lmxlbmd0aDsgaS0tICYmICFpcyhsaXN0W2ldLCBrZXkpOyl7fVxuICAgIGVsc2UgaSA9IGxpc3QuaW5kZXhPZihrZXkpO1xuICAgIHJldHVybiAtMSA8IGk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRIYXModmFsdWUpIHtcbiAgICByZXR1cm4gaGFzLmNhbGwodGhpcywgdGhpcy5fdmFsdWVzLCB2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBtYXBIYXModmFsdWUpIHtcbiAgICByZXR1cm4gaGFzLmNhbGwodGhpcywgdGhpcy5fa2V5cywgdmFsdWUpO1xuICB9XG5cbiAgLyoqIEBjaGFpbmFibGUgKi9cbiAgZnVuY3Rpb24gc2hhcmVkU2V0KGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLmhhcyhrZXkpID9cbiAgICAgIHRoaXMuX3ZhbHVlc1tpXSA9IHZhbHVlXG4gICAgICA6XG4gICAgICB0aGlzLl92YWx1ZXNbdGhpcy5fa2V5cy5wdXNoKGtleSkgLSAxXSA9IHZhbHVlXG4gICAgO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBjaGFpbmFibGUgKi9cbiAgZnVuY3Rpb24gc2hhcmVkQWRkKHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmhhcyh2YWx1ZSkpIHRoaXMuX3ZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNoYXJlZENsZWFyKCkge1xuICAgICh0aGlzLl9rZXlzIHx8IDApLmxlbmd0aCA9XG4gICAgdGhpcy5fdmFsdWVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICAvKioga2V5cywgdmFsdWVzLCBhbmQgaXRlcmF0ZSByZWxhdGVkIG1ldGhvZHMgKi9cbiAgZnVuY3Rpb24gc2hhcmVkS2V5cygpIHtcbiAgICByZXR1cm4gc2hhcmVkSXRlcmF0b3IodGhpcy5faXRwLCB0aGlzLl9rZXlzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNoYXJlZFZhbHVlcygpIHtcbiAgICByZXR1cm4gc2hhcmVkSXRlcmF0b3IodGhpcy5faXRwLCB0aGlzLl92YWx1ZXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFwRW50cmllcygpIHtcbiAgICByZXR1cm4gc2hhcmVkSXRlcmF0b3IodGhpcy5faXRwLCB0aGlzLl9rZXlzLCB0aGlzLl92YWx1ZXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0RW50cmllcygpIHtcbiAgICByZXR1cm4gc2hhcmVkSXRlcmF0b3IodGhpcy5faXRwLCB0aGlzLl92YWx1ZXMsIHRoaXMuX3ZhbHVlcyk7XG4gIH1cblxuICBmdW5jdGlvbiBzaGFyZWRJdGVyYXRvcihpdHAsIGFycmF5LCBhcnJheTIpIHtcbiAgICB2YXIgcCA9IFswXSwgZG9uZSA9IGZhbHNlO1xuICAgIGl0cC5wdXNoKHApO1xuICAgIHJldHVybiB7XG4gICAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHYsIGsgPSBwWzBdO1xuICAgICAgICBpZiAoIWRvbmUgJiYgayA8IGFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgIHYgPSBhcnJheTIgPyBbYXJyYXlba10sIGFycmF5MltrXV06IGFycmF5W2tdO1xuICAgICAgICAgIHBbMF0rKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICBpdHAuc3BsaWNlKGl0cC5pbmRleE9mKHApLCAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkb25lOiBkb25lLCB2YWx1ZTogdiB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBzaGFyZWRTaXplKCkge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZXMubGVuZ3RoO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hhcmVkRm9yRWFjaChjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHZhciBpdCA9IHRoaXMuZW50cmllcygpO1xuICAgIGZvciAoOzspIHtcbiAgICAgIHZhciByID0gaXQubmV4dCgpO1xuICAgICAgaWYgKHIuZG9uZSkgYnJlYWs7XG4gICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHIudmFsdWVbMV0sIHIudmFsdWVbMF0sIHRoaXMpO1xuICAgIH1cbiAgfVxuXG59KSh0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZ2xvYmFsICE9ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93ICk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9lczYtY29sbGVjdGlvbnMvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuX19leHBvcnQocmVxdWlyZSgnLi91dGlscy9mZXRjaCcpKTtcbl9fZXhwb3J0KHJlcXVpcmUoJy4vYXBpcycpKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvYXBwLnRzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGluZGV4XzEgPSByZXF1aXJlKCcuL2luZGV4Jyk7XG52YXIgYXBpSG9zdDtcbnZhciBhcGlQYXRoID0gWydWZXJzaW9uJywgJ1R5cGUnLCAnSWQnLCAnUGF0aDEnLCAnUGF0aDInLCAnUGF0aDMnXTtcbnZhciBGZXRjaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRmV0Y2goKSB7XG4gICAgICAgIHRoaXMub3B0cyA9IHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vcHRzLmNyZWRlbnRpYWxzID0gJ2luY2x1ZGUnO1xuICAgICAgICBhcGlIb3N0ID0gJ2h0dHBzOi8vd3d3LnRlYW1iaXRpb24uY29tL2FwaSc7XG4gICAgfVxuICAgIEZldGNoLnByb3RvdHlwZS5zZXRBUElIb3N0ID0gZnVuY3Rpb24gKGhvc3QpIHtcbiAgICAgICAgYXBpSG9zdCA9IGhvc3Q7XG4gICAgfTtcbiAgICBGZXRjaC5wcm90b3R5cGUuc2V0VG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgZGVsZXRlIHRoaXMub3B0cy5jcmVkZW50aWFscztcbiAgICAgICAgdGhpcy5vcHRzLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IFwiT0F1dGgyIFwiICsgdG9rZW47XG4gICAgICAgIGFwaUhvc3QgPSAnaHR0cHM6Ly9hcGkudGVhbWJpdGlvbi5jb20nO1xuICAgIH07XG4gICAgRmV0Y2gucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChwYXRocykge1xuICAgICAgICB2YXIgdXJsID0gdGhpcy5idWlsZFVSSShwYXRocyk7XG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIGluZGV4XzEuYXNzaWduKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ2dldCdcbiAgICAgICAgfSwgdGhpcy5vcHRzKSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgRmV0Y2gucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAocGF0aHMsIGRhdGEpIHtcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuYnVpbGRVUkkocGF0aHMpO1xuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCBpbmRleF8xLmFzc2lnbih7XG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICAgIH0sIHRoaXMub3B0cykpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGEuanNvbigpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEZldGNoLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAocGF0aHMsIGRhdGEpIHtcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuYnVpbGRVUkkocGF0aHMpO1xuICAgICAgICByZXR1cm4gZmV0Y2godXJsLCBpbmRleF8xLmFzc2lnbih7XG4gICAgICAgICAgICBtZXRob2Q6ICdwdXQnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgICAgfSwgdGhpcy5vcHRzKSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgRmV0Y2gucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChwYXRocykge1xuICAgICAgICB2YXIgdXJsID0gdGhpcy5idWlsZFVSSShwYXRocyk7XG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwsIGluZGV4XzEuYXNzaWduKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ2RlbGV0ZSdcbiAgICAgICAgfSwgdGhpcy5vcHRzKSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5qc29uKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgRmV0Y2gucHJvdG90eXBlLmJ1aWxkVVJJID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgdmFyIHVyaXMgPSBbXTtcbiAgICAgICAgdmFyIHF1ZXJ5cyA9IFtdO1xuICAgICAgICBpbmRleF8xLmZvckVhY2gocGF0aCwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBhcGlQYXRoLmluZGV4T2Yoa2V5KTtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB1cmlzW3Bvc2l0aW9uXSA9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHF1ZXJ5cy5wdXNoKGtleSArIFwiPVwiICsgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB2ZXJzaW9uID0gdXJpc1swXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2ZXJzaW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdXJpc1swXSA9IFwiL1wiICsgdmVyc2lvbjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXJsID0gYXBpSG9zdCArIHVyaXMuam9pbignLycpO1xuICAgICAgICB1cmwgPSBxdWVyeXMubGVuZ3RoID8gdXJsICsgJz8nICsgcXVlcnlzLmpvaW4oJyYnKSA6IHVybDtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9O1xuICAgIHJldHVybiBGZXRjaDtcbn0pKCk7XG5leHBvcnRzLnRiRmV0Y2ggPSBuZXcgRmV0Y2goKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvdXRpbHMvZmV0Y2gudHNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgc2NoZW1hXzEgPSByZXF1aXJlKCcuLi9zY2hlbWFzL3NjaGVtYScpO1xuZXhwb3J0cy5mb3JFYWNoID0gZnVuY3Rpb24gKHRhcmdldCwgZWFjaEZ1bmMpIHtcbiAgICB2YXIgbGVuZ3RoO1xuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBsZW5ndGggPSB0YXJnZXQubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBlYWNoRnVuYyh0YXJnZXRbaV0sIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRhcmdldCk7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgZWFjaEZ1bmModGFyZ2V0W2tleV0sIGtleSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0LCBvcmlnaW4pIHtcbiAgICBleHBvcnRzLmZvckVhY2gob3JpZ2luLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBvcmlnaW5ba2V5XTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcbmV4cG9ydHMuY2xvbmUgPSBmdW5jdGlvbiAob3JpZ2luKSB7XG4gICAgaWYgKHR5cGVvZiBvcmlnaW4gPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBvcmlnaW4gIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRhcmdldDtcbiAgICBpZiAob3JpZ2luIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdGFyZ2V0ID0gbmV3IEFycmF5KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0YXJnZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH1cbiAgICBleHBvcnRzLmZvckVhY2gob3JpZ2luLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAvLyBudWxsXG4gICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0W2tleV0gPSBleHBvcnRzLmNsb25lKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRba2V5XSA9IHZhbDtcbiAgICB9KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xufTtcbnZhciBzNCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcbiAgICAgICAgLnRvU3RyaW5nKDE2KVxuICAgICAgICAuc3Vic3RyaW5nKDEpO1xufTtcbnZhciB1dWlkU3RhY2sgPSBbXTtcbmV4cG9ydHMudXVpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgVVVJRCA9IHM0KCkgKyBzNCgpO1xuICAgIHdoaWxlICh1dWlkU3RhY2suaW5kZXhPZihVVUlEKSAhPT0gLTEpIHtcbiAgICAgICAgVVVJRCA9IHM0KCkgKyBzNCgpO1xuICAgIH1cbiAgICB1dWlkU3RhY2sucHVzaChVVUlEKTtcbiAgICByZXR1cm4gVVVJRDtcbn07XG5leHBvcnRzLmRhdGFzVG9TY2hlbWFzID0gZnVuY3Rpb24gKGRhdGFzLCBTY2hlbWEpIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KCk7XG4gICAgZXhwb3J0cy5mb3JFYWNoKGRhdGFzLCBmdW5jdGlvbiAoZGF0YSwgaW5kZXgpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goc2NoZW1hXzEuc2V0U2NoZW1hKFNjaGVtYSwgZGF0YSkpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy91dGlscy9pbmRleC50c1xuICoqIG1vZHVsZSBpZCA9IDEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5leHBvcnRzLnNldFNjaGVtYSA9IGZ1bmN0aW9uICh0YXJnZXQsIGRhdGEpIHtcbiAgICB0YXJnZXQuJCRrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IGRhdGFba2V5XTtcbiAgICB9KTtcbiAgICB0YXJnZXQuJCRkYXRhID0gZGF0YTtcbiAgICB1dGlsc18xLmZvckVhY2godGFyZ2V0LCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgICAgICBpZiAoa2V5ID09PSAnJCRkYXRhJykge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChrZXkgPT09ICckJGtleXMnKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHtcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBuZXdWYWw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LiQka2V5cy5hZGQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LiQkZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC4kJGRhdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuJCRkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuJCRkYXRhW2tleV0gPSBuZXdWYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQuJCRrZXlzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRhcmdldDtcbn07XG52YXIgU2NoZW1hID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTY2hlbWEoKSB7XG4gICAgICAgIHRoaXMuJCRrZXlzID0gbmV3IFNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gU2NoZW1hO1xufSkoKTtcbmV4cG9ydHMuU2NoZW1hID0gU2NoZW1hO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9zY2hlbWFzL3NjaGVtYS50c1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJmdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuX19leHBvcnQocmVxdWlyZSgnLi91c2VyX2FwaScpKTtcbl9fZXhwb3J0KHJlcXVpcmUoJy4vb3JnYW5pemF0aW9uX2FwaScpKTtcbl9fZXhwb3J0KHJlcXVpcmUoJy4vcHJvamVjdF9hcGknKSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2FwaXMvaW5kZXgudHNcbiAqKiBtb2R1bGUgaWQgPSAxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGZldGNoXzEgPSByZXF1aXJlKCcuLi91dGlscy9mZXRjaCcpO1xudmFyIHVzZXJfbW9kZWxfMSA9IHJlcXVpcmUoJy4uL21vZGVscy91c2VyX21vZGVsJyk7XG5leHBvcnRzLlVzZXJBUEkgPSB7XG4gICAgZ2V0VXNlck1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IHVzZXJfbW9kZWxfMS5kZWZhdWx0LmdldCgpO1xuICAgICAgICBpZiAoY2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShjYWNoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmZXRjaF8xLnRiRmV0Y2guZ2V0KHtcbiAgICAgICAgICAgICAgICBUeXBlOiAndXNlcnMnLFxuICAgICAgICAgICAgICAgIElkOiAnbWUnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1c2VyTWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcl9tb2RlbF8xLmRlZmF1bHQuc2V0KHVzZXJNZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAocGF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoXzEudGJGZXRjaC5wdXQoe1xuICAgICAgICAgICAgVHlwZTogJ3VzZXJzJyxcbiAgICAgICAgICAgIElkOiAnbWUnXG4gICAgICAgIH0sIHBhdGNoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVzZXJNZSkge1xuICAgICAgICAgICAgdXNlcl9tb2RlbF8xLmRlZmF1bHQudXBkYXRlKHVzZXJNZSk7XG4gICAgICAgICAgICByZXR1cm4gdXNlck1lO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFkZEVtYWlsOiBmdW5jdGlvbiAoZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoXzEudGJGZXRjaC5wb3N0KHtcbiAgICAgICAgICAgIFR5cGU6ICd1c2VycycsXG4gICAgICAgICAgICBJZDogJ2VtYWlsJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdXNlcl9tb2RlbF8xLmRlZmF1bHQudXBkYXRlRW1haWwoZGF0YSk7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBiaW5kUGhvbmU6IGZ1bmN0aW9uIChwaG9uZSwgdmNvZGUpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoXzEudGJGZXRjaC5wdXQoe1xuICAgICAgICAgICAgVHlwZTogJ3VzZXJzJyxcbiAgICAgICAgICAgIElkOiAncGhvbmUnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHBob25lOiBwaG9uZSxcbiAgICAgICAgICAgIHZjb2RlOiB2Y29kZVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB1c2VyX21vZGVsXzEuZGVmYXVsdC51cGRhdGUoe1xuICAgICAgICAgICAgICAgIHBob25lOiBwaG9uZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2FwaXMvdXNlcl9hcGkudHNcbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgbW9kZWxfMSA9IHJlcXVpcmUoJy4vbW9kZWwnKTtcbnZhciBVc2VyTW9kZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhVc2VyTW9kZWwsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVXNlck1vZGVsKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5uYW1lc3BhY2UgPSAndXNlcjptZSc7XG4gICAgfVxuICAgIFVzZXJNb2RlbC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0T25lKHRoaXMubmFtZXNwYWNlLCBkYXRhKTtcbiAgICB9O1xuICAgIFVzZXJNb2RlbC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPbmUodGhpcy5uYW1lc3BhY2UpO1xuICAgIH07XG4gICAgVXNlck1vZGVsLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocGF0Y2gpIHtcbiAgICAgICAgdGhpcy51cGRhdGVPbmUodGhpcy5uYW1lc3BhY2UsIHBhdGNoKTtcbiAgICB9O1xuICAgIFVzZXJNb2RlbC5wcm90b3R5cGUudXBkYXRlRW1haWwgPSBmdW5jdGlvbiAoZW1haWxzKSB7XG4gICAgICAgIHRoaXMudXBkYXRlT25lKHRoaXMubmFtZXNwYWNlLCB7XG4gICAgICAgICAgICBlbWFpbHM6IGVtYWlsc1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBVc2VyTW9kZWw7XG59KShtb2RlbF8xLmRlZmF1bHQpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gbmV3IFVzZXJNb2RlbCgpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9tb2RlbHMvdXNlcl9tb2RlbC50c1xuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgZGF0YWJhc2VfMSA9IHJlcXVpcmUoJy4vZGF0YWJhc2UnKTtcbnZhciBNb2RlbCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTW9kZWwoKSB7XG4gICAgfVxuICAgIE1vZGVsLnByb3RvdHlwZS5zZXRPbmUgPSBmdW5jdGlvbiAobmFtZXNwYWNlLCBkYXRhKSB7XG4gICAgICAgIGRhdGFiYXNlXzEuZGVmYXVsdC5zdG9yZU9uZShuYW1lc3BhY2UsIGRhdGEpO1xuICAgICAgICByZXR1cm4gZGF0YWJhc2VfMS5kZWZhdWx0LmdldE9uZShuYW1lc3BhY2UpO1xuICAgIH07XG4gICAgTW9kZWwucHJvdG90eXBlLnNldENvbGxlY3Rpb24gPSBmdW5jdGlvbiAobmFtZXNwYWNlLCBkYXRhKSB7XG4gICAgICAgIGRhdGFiYXNlXzEuZGVmYXVsdC5zdG9yZUNvbGxlY3Rpb24obmFtZXNwYWNlLCBkYXRhKTtcbiAgICAgICAgcmV0dXJuIGRhdGFiYXNlXzEuZGVmYXVsdC5nZXRPbmUobmFtZXNwYWNlKTtcbiAgICB9O1xuICAgIE1vZGVsLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAobmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybiBkYXRhYmFzZV8xLmRlZmF1bHQuZ2V0T25lKG5hbWVzcGFjZSk7XG4gICAgfTtcbiAgICBNb2RlbC5wcm90b3R5cGUudXBkYXRlT25lID0gZnVuY3Rpb24gKG5hbWVzcGFjZSwgcGF0Y2gpIHtcbiAgICAgICAgdmFyIENhY2hlID0gZGF0YWJhc2VfMS5kZWZhdWx0LmdldE9uZShuYW1lc3BhY2UpO1xuICAgICAgICBpZiAoQ2FjaGUpIHtcbiAgICAgICAgICAgIGRhdGFiYXNlXzEuZGVmYXVsdC51cGRhdGVPbmUobmFtZXNwYWNlLCBwYXRjaCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1vZGVsLnByb3RvdHlwZS5yZW1vdmVPbmUgPSBmdW5jdGlvbiAobmFtZXNwYWNlKSB7XG4gICAgICAgIHJldHVybiBkYXRhYmFzZV8xLmRlZmF1bHQuZGVsZXRlKG5hbWVzcGFjZSk7XG4gICAgfTtcbiAgICByZXR1cm4gTW9kZWw7XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gTW9kZWw7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL21vZGVscy9tb2RlbC50c1xuICoqIG1vZHVsZSBpZCA9IDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgdHJhY2tfMSA9IHJlcXVpcmUoJy4uL3V0aWxzL3RyYWNrJyk7XG52YXIgdW5pb25fb2JqZWN0XzEgPSByZXF1aXJlKCcuL3VuaW9uX29iamVjdCcpO1xudmFyIERhdGFCYXNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBEYXRhQmFzZSgpIHtcbiAgICAgICAgdGhpcy5kYXRhID0ge307XG4gICAgICAgIHRoaXMudGltZW91dEluZGV4ID0ge307XG4gICAgICAgIHRoaXMudHlwZUluZGV4ID0ge307XG4gICAgICAgIHRoaXMuZGF0YU1hcHMgPSB7fTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uSW5kZXggPSB7fTtcbiAgICB9XG4gICAgRGF0YUJhc2UucHJvdG90eXBlLnN0b3JlT25lID0gZnVuY3Rpb24gKGluZGV4LCBkYXRhLCBleHBpcmUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGV4cGlyZSA9PT0gdm9pZCAwKSB7IGV4cGlyZSA9IDA7IH1cbiAgICAgICAgaWYgKCF0aGlzLmRhdGFbaW5kZXhdKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5kYXRhW2luZGV4XSA9IGRhdGE7XG4gICAgICAgICAgICBpZiAoZXhwaXJlICYmIHR5cGVvZiBleHBpcmUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbWVvdXRJbmRleCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLmRhdGFbaW5kZXhdO1xuICAgICAgICAgICAgICAgIH0sIGV4cGlyZSk7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0SW5kZXhbaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgICAgICB0aW1lcjogdGltZW91dEluZGV4LFxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiBleHBpcmVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2tfMS50cmFja09iamVjdChyZXN1bHQpO1xuICAgICAgICAgICAgdGhpcy50eXBlSW5kZXhbaW5kZXhdID0gJ29iamVjdCc7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERhdGFCYXNlLnByb3RvdHlwZS5zdG9yZUNvbGxlY3Rpb24gPSBmdW5jdGlvbiAoaW5kZXgsIGNvbGxlY3Rpb24sIGV4cGlyZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoZXhwaXJlID09PSB2b2lkIDApIHsgZXhwaXJlID0gMDsgfVxuICAgICAgICB2YXIgaW5kZXhlcyA9IHRoaXMuY29sbGVjdGlvbkluZGV4W2luZGV4XSA9IFtdO1xuICAgICAgICBpZiAoIXRoaXMuZGF0YVtpbmRleF0pIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIHV0aWxzXzEuZm9yRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FjaGUgPSBfdGhpcy5nZXRPbmUodmFsLl9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNhY2hlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlT25lKHZhbC5faWQsIHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtYXBzID0gX3RoaXMuZGF0YU1hcHNbdmFsLl9pZF07XG4gICAgICAgICAgICAgICAgaWYgKG1hcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGFNYXBzW3ZhbC5faWRdID0gW2luZGV4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKHZhbC5faWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRhdGFbaW5kZXhdID0gcmVzdWx0O1xuICAgICAgICAgICAgaWYgKGV4cGlyZSAmJiB0eXBlb2YgZXhwaXJlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0SW5kZXggPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5kYXRhW2luZGV4XTtcbiAgICAgICAgICAgICAgICB9LCBleHBpcmUpO1xuICAgICAgICAgICAgICAgIHRoaXMudGltZW91dEluZGV4W2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXI6IHRpbWVvdXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZTogZXhwaXJlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNrXzEudHJhY2tDb2xsZWN0aW9uKGluZGV4LCByZXN1bHQpO1xuICAgICAgICAgICAgdGhpcy50eXBlSW5kZXhbaW5kZXhdID0gJ2NvbGxlY3Rpb24nO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEYXRhQmFzZS5wcm90b3R5cGUudXBkYXRlQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChpbmRleCwgcGF0Y2gpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5kYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKGNhY2hlICYmIHBhdGNoIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciBpbmRleHMgPSB0aGlzLmNvbGxlY3Rpb25JbmRleFtpbmRleF07XG4gICAgICAgICAgICB1dGlsc18xLmZvckVhY2gocGF0Y2gsIGZ1bmN0aW9uICh2YWwsIGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBvbGRFbGUgPSBjYWNoZVtrZXldO1xuICAgICAgICAgICAgICAgIGlmIChvbGRFbGUuX2lkID09PSB2YWwuX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHV0aWxzXzEuYXNzaWduKG9sZEVsZSwgdmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRJZCA9IHZhbC5faWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleHMuaW5kZXhPZih0YXJnZXRJZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZS5zcGxpY2Uoa2V5LCAwLCB2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhzLnNwbGljZShrZXksIDAsIHRhcmdldElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlT25lKHZhbC5faWQsIHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkSW5kZXggPSBpbmRleHMuaW5kZXhPZih0YXJnZXRJZCwga2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNwbGljZShvbGRJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleHMuc3BsaWNlKG9sZEluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlLnNwbGljZShrZXksIDAsIHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleHMuc3BsaWNlKGtleSwgMCwgdGFyZ2V0SWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIERhdGFCYXNlLnByb3RvdHlwZS51cGRhdGVPbmUgPSBmdW5jdGlvbiAoaW5kZXgsIHBhdGNoLCBleHBpcmUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGV4cGlyZSA9PT0gdm9pZCAwKSB7IGV4cGlyZSA9IDA7IH1cbiAgICAgICAgdmFyIF9wYXRjaCA9IHV0aWxzXzEuY2xvbmUocGF0Y2gpO1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5kYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXRjaCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB2YWwgPSB1dGlsc18xLmFzc2lnbih2YWwsIF9wYXRjaCk7XG4gICAgICAgICAgICAgICAgaWYgKGV4cGlyZSAmJiB0eXBlb2YgZXhwaXJlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGltZXIgPSB0aGlzLnRpbWVvdXRJbmRleFtpbmRleF0udGltZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGltZW91dEluZGV4W2luZGV4XS5leHBpcmUgPSBleHBpcmU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGltZW91dEluZGV4W2luZGV4XS5iZWdpbiA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXMuZGF0YVtpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIH0sIGV4cGlyZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtpbmRleF0gPSB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAnUGF0Y2ggdGFyZ2V0IHNob3VsZCBiZSBPYmplY3QnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgJ0RhdGEgaXMgbm90IGV4aXN0ZWQsIGNhbiBub3QgdXBkYXRlJztcbiAgICAgICAgfVxuICAgIH07XG4gICAgRGF0YUJhc2UucHJvdG90eXBlLmdldE9uZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuZGF0YVtpbmRleF07XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50eXBlSW5kZXhbaW5kZXhdID09PSAnY29sbGVjdGlvbicpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB1dGlsc18xLmNsb25lKGRhdGEpO1xuICAgICAgICAgICAgICAgIHRyYWNrXzEudHJhY2tPbmUocmVzdWx0LCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgdW5pb25fb2JqZWN0XzEuQmFzZU9iamVjdChkYXRhKTtcbiAgICAgICAgICAgICAgICB0cmFja18xLnRyYWNrT25lKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEYXRhQmFzZS5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbaW5kZXhdO1xuICAgICAgICB2YXIgbWFwcyA9IHRoaXMuZGF0YU1hcHNbaW5kZXhdO1xuICAgICAgICBpZiAobWFwcyAmJiBtYXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgdXRpbHNfMS5mb3JFYWNoKG1hcHMsIGZ1bmN0aW9uIChjb2xsZWN0aW9uSW5kZXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhlcyA9IF90aGlzLmNvbGxlY3Rpb25JbmRleFtjb2xsZWN0aW9uSW5kZXhdO1xuICAgICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gX3RoaXMuZGF0YVtjb2xsZWN0aW9uSW5kZXhdO1xuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IGluZGV4ZXMuaW5kZXhPZihpbmRleCk7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBEYXRhQmFzZS5wcm90b3R5cGUuZ2V0RXhwaXJlID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciB0aW1lckluZGV4ID0gdGhpcy50aW1lb3V0SW5kZXhbaW5kZXhdO1xuICAgICAgICByZXR1cm4gdGltZXJJbmRleC5iZWdpbiAtIHRpbWVySW5kZXguZXhwaXJlO1xuICAgIH07XG4gICAgcmV0dXJuIERhdGFCYXNlO1xufSkoKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZGVmYXVsdCA9IG5ldyBEYXRhQmFzZSgpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9tb2RlbHMvZGF0YWJhc2UudHNcbiAqKiBtb2R1bGUgaWQgPSAxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGluZGV4XzEgPSByZXF1aXJlKCcuL2luZGV4Jyk7XG52YXIgdHJhY2tJbmRleCA9IHt9O1xuZXhwb3J0cy50cmFja09uZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGluZGV4KSB7XG4gICAgdmFyIF9pZCA9IGluZGV4ID8gaW5kZXggOiB0YXJnZXQuX2lkO1xuICAgIGlmIChfaWQgJiYgdHJhY2tJbmRleFtfaWRdLmluZGV4T2YodGFyZ2V0KSA9PT0gLTEpIHtcbiAgICAgICAgdHJhY2tJbmRleFtfaWRdLnB1c2godGFyZ2V0KTtcbiAgICB9XG59O1xuZXhwb3J0cy50cmFja09iamVjdCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICB2YXIgX2lkID0gdGFyZ2V0Ll9pZDtcbiAgICBpZiAoX2lkKSB7XG4gICAgICAgIHRyYWNrSW5kZXhbX2lkXSA9IFtdO1xuICAgICAgICBpbmRleF8xLmZvckVhY2godGFyZ2V0LCBmdW5jdGlvbiAodmFsLCBrZXkpIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4XzEuZm9yRWFjaCh0cmFja0luZGV4W19pZF0sIGZ1bmN0aW9uICh0cmFja1ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tWYWxba2V5XSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbmV4cG9ydHMudHJhY2tDb2xsZWN0aW9uID0gZnVuY3Rpb24gKGluZGV4LCB0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdHJhY2tJbmRleFtpbmRleF0gPSBbXTtcbiAgICAgICAgdmFyIHNwbGljZSA9IHRhcmdldC5zcGxpY2U7XG4gICAgICAgIHZhciBwdXNoID0gdGFyZ2V0LnB1c2g7XG4gICAgICAgIHRhcmdldC5zcGxpY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpbmRleF8xLmZvckVhY2godHJhY2tJbmRleFtpbmRleF0sIGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgc3BsaWNlLmFwcGx5KGNvbGxlY3Rpb24sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzcGxpY2UuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICB0YXJnZXQucHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGluZGV4XzEuZm9yRWFjaCh0cmFja0luZGV4W2luZGV4XSwgZnVuY3Rpb24gKGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBwdXNoLmFwcGx5KGNvbGxlY3Rpb24sIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwdXNoLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IHRyYWNrIGEgbm9uZSBhcnJheSBvYmplY3QnKTtcbiAgICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy91dGlscy90cmFjay50c1xuICoqIG1vZHVsZSBpZCA9IDE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgJGlkID0gMTtcbmV4cG9ydHMuT2JqZWN0SW5kZXggPSB7fTtcbnZhciBCYXNlT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCYXNlT2JqZWN0KHRhcmdldCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLiRpZCA9IFwiJFwiICsgJGlkO1xuICAgICAgICB2YXIgZGF0YSA9IHV0aWxzXzEuY2xvbmUodGFyZ2V0KTtcbiAgICAgICAgdmFyIG9iamVjdEluZGV4ID0gZXhwb3J0cy5PYmplY3RJbmRleFsoXCIkXCIgKyAkaWQpXSA9IHtcbiAgICAgICAgICAgIGRhdGFLZXlzOiBbXVxuICAgICAgICB9O1xuICAgICAgICB1dGlsc18xLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gKHZhbCwga2V5KSB7XG4gICAgICAgICAgICBvYmplY3RJbmRleC5kYXRhS2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICBfdGhpc1trZXldID0gdmFsO1xuICAgICAgICB9KTtcbiAgICAgICAgJGlkKys7XG4gICAgfVxuICAgIHJldHVybiBCYXNlT2JqZWN0O1xufSkoKTtcbmV4cG9ydHMuQmFzZU9iamVjdCA9IEJhc2VPYmplY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL21vZGVscy91bmlvbl9vYmplY3QudHNcbiAqKiBtb2R1bGUgaWQgPSAxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIGZldGNoXzEgPSByZXF1aXJlKCcuLi91dGlscy9mZXRjaCcpO1xudmFyIG9yZ2FuaXphdGlvbl9tb2RlbF8xID0gcmVxdWlyZSgnLi4vbW9kZWxzL29yZ2FuaXphdGlvbl9tb2RlbCcpO1xudmFyIG1lbWJlcl9tb2RlbF8xID0gcmVxdWlyZSgnLi4vbW9kZWxzL21lbWJlcl9tb2RlbCcpO1xuZXhwb3J0cy5Pcmdhbml6YXRpb25BUEkgPSB7XG4gICAgZ2V0T3JnczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2FjaGUgPSBvcmdhbml6YXRpb25fbW9kZWxfMS5kZWZhdWx0LmdldEFsbCgpO1xuICAgICAgICBpZiAoY2FjaGUpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlKTtcbiAgICAgICAgcmV0dXJuIGZldGNoXzEudGJGZXRjaC5nZXQoe1xuICAgICAgICAgICAgVHlwZTogJ29yZ2FuaXphdGlvbnMnXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKG9yZ2FuaXphdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcmdhbml6YXRpb25fbW9kZWxfMS5kZWZhdWx0LnNldEFsbChvcmdhbml6YXRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRPbmU6IGZ1bmN0aW9uIChvcmdhbml6YXRpb25JZCkge1xuICAgICAgICB2YXIgY2FjaGUgPSBvcmdhbml6YXRpb25fbW9kZWxfMS5kZWZhdWx0LmdldChvcmdhbml6YXRpb25JZCk7XG4gICAgICAgIGlmIChjYWNoZSlcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY2FjaGUpO1xuICAgICAgICByZXR1cm4gZmV0Y2hfMS50YkZldGNoLmdldCh7XG4gICAgICAgICAgICBUeXBlOiAnb3JnYW5pemF0aW9ucycsXG4gICAgICAgICAgICBJZDogb3JnYW5pemF0aW9uSWRcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChvcmdhbml6YXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBvcmdhbml6YXRpb25fbW9kZWxfMS5kZWZhdWx0LnNldChvcmdhbml6YXRpb24pO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGdldE1lbWJlcnM6IGZ1bmN0aW9uIChvcmdhbml6YXRpb25JZCkge1xuICAgICAgICB2YXIgY2FjaGUgPSBtZW1iZXJfbW9kZWxfMS5kZWZhdWx0LmdldE9yZ01lbWJlcnMob3JnYW5pemF0aW9uSWQpO1xuICAgICAgICBpZiAoY2FjaGUpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhY2hlKTtcbiAgICAgICAgcmV0dXJuIGZldGNoXzEudGJGZXRjaC5nZXQoe1xuICAgICAgICAgICAgVmVyc2lvbjogJ1YyJyxcbiAgICAgICAgICAgIFR5cGU6ICdvcmdhbml6YXRpb25zJyxcbiAgICAgICAgICAgIElkOiBvcmdhbml6YXRpb25JZCxcbiAgICAgICAgICAgIFBhdGgxOiAnbWVtYmVycydcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAobWVtYmVycykge1xuICAgICAgICAgICAgcmV0dXJuIG1lbWJlcl9tb2RlbF8xLmRlZmF1bHQuYWRkT3JnTWVtYmVycyhvcmdhbml6YXRpb25JZCwgbWVtYmVycyk7XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2FwaXMvb3JnYW5pemF0aW9uX2FwaS50c1xuICoqIG1vZHVsZSBpZCA9IDE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBtb2RlbF8xID0gcmVxdWlyZSgnLi9tb2RlbCcpO1xudmFyIE9yZ2FuaXphdGlvbk1vZGVsID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT3JnYW5pemF0aW9uTW9kZWwsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gT3JnYW5pemF0aW9uTW9kZWwoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBPcmdhbml6YXRpb25Nb2RlbC5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPbmUoJ29yZ2FuaXphdGlvbicpO1xuICAgIH07XG4gICAgT3JnYW5pemF0aW9uTW9kZWwucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPbmUoaWQpO1xuICAgIH07XG4gICAgT3JnYW5pemF0aW9uTW9kZWwucHJvdG90eXBlLnNldEFsbCA9IGZ1bmN0aW9uIChvcmdhbml6YXRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldENvbGxlY3Rpb24oJ29yZ2FuaXphdGlvbicsIG9yZ2FuaXphdGlvbnMpO1xuICAgIH07XG4gICAgT3JnYW5pemF0aW9uTW9kZWwucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldE9uZShkYXRhLl9pZCwgZGF0YSk7XG4gICAgfTtcbiAgICByZXR1cm4gT3JnYW5pemF0aW9uTW9kZWw7XG59KShtb2RlbF8xLmRlZmF1bHQpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gbmV3IE9yZ2FuaXphdGlvbk1vZGVsKCk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL21vZGVscy9vcmdhbml6YXRpb25fbW9kZWwudHNcbiAqKiBtb2R1bGUgaWQgPSAyMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG52YXIgbW9kZWxfMSA9IHJlcXVpcmUoJy4vbW9kZWwnKTtcbnZhciB1dGlsc18xID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcbnZhciBtZW1iZXJfc2NoZW1hXzEgPSByZXF1aXJlKCcuLi9zY2hlbWFzL21lbWJlcl9zY2hlbWEnKTtcbnZhciBzY2hlbWFfMSA9IHJlcXVpcmUoJy4uL3NjaGVtYXMvc2NoZW1hJyk7XG52YXIgTWVtYmVyTW9kZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNZW1iZXJNb2RlbCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNZW1iZXJNb2RlbCgpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIE1lbWJlck1vZGVsLnByb3RvdHlwZS5hZGRQcm9qZWN0TWVtYmVycyA9IGZ1bmN0aW9uIChwcm9qZWN0SWQsIG1lbWJlcnMpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB1dGlsc18xLmZvckVhY2gobWVtYmVycywgZnVuY3Rpb24gKG1lbWJlcikge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goc2NoZW1hXzEuc2V0U2NoZW1hKG5ldyBtZW1iZXJfc2NoZW1hXzEuZGVmYXVsdCgpLCBtZW1iZXIpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0Q29sbGVjdGlvbihcIm1lbWJlcnM6XCIgKyBwcm9qZWN0SWQsIHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICBNZW1iZXJNb2RlbC5wcm90b3R5cGUuZ2V0UHJvamVjdE1lbWJlcnMgPSBmdW5jdGlvbiAocHJvamVjdElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9uZShcIm1lbWJlcnM6XCIgKyBwcm9qZWN0SWQpO1xuICAgIH07XG4gICAgTWVtYmVyTW9kZWwucHJvdG90eXBlLnJlbW92ZU1lbWJlciA9IGZ1bmN0aW9uIChtZW1iZXJJZCkge1xuICAgICAgICB0aGlzLnJlbW92ZU9uZShtZW1iZXJJZCk7XG4gICAgfTtcbiAgICBNZW1iZXJNb2RlbC5wcm90b3R5cGUuYWRkT3JnTWVtYmVycyA9IGZ1bmN0aW9uIChvcmdhbml6YXRpb25JZCwgbWVtYmVycykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHV0aWxzXzEuZm9yRWFjaChtZW1iZXJzLCBmdW5jdGlvbiAobWVtYmVyKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChzY2hlbWFfMS5zZXRTY2hlbWEobmV3IG1lbWJlcl9zY2hlbWFfMS5kZWZhdWx0KCksIG1lbWJlcikpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZXRDb2xsZWN0aW9uKFwibWVtYmVyczpcIiArIG9yZ2FuaXphdGlvbklkLCByZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgTWVtYmVyTW9kZWwucHJvdG90eXBlLmdldE9yZ01lbWJlcnMgPSBmdW5jdGlvbiAob3JnYW5pemF0aW9uSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T25lKFwibWVtYmVyczpcIiArIG9yZ2FuaXphdGlvbklkKTtcbiAgICB9O1xuICAgIHJldHVybiBNZW1iZXJNb2RlbDtcbn0pKG1vZGVsXzEuZGVmYXVsdCk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBuZXcgTWVtYmVyTW9kZWwoKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvbW9kZWxzL21lbWJlcl9tb2RlbC50c1xuICoqIG1vZHVsZSBpZCA9IDIxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBzY2hlbWFfMSA9IHJlcXVpcmUoJy4vc2NoZW1hJyk7XG52YXIgTWVtYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWVtYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1lbWJlcigpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2lkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9ib3VuZFRvT2JqZWN0SWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYm91bmRUb09iamVjdFR5cGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3JvbGVJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy52aXNpdGVkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmpvaW5lZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wdXNoU3RhdHVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm5pY2tuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm5pY2tuYW1lUHkgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubmlja25hbWVQaW55aW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaGFzVmlzaXRlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fbWVtYmVySWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucGhvbmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMud2Vic2l0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sYXRlc3RBY3RpdmVkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVtYWlsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYXZhdGFyVXJsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRpdGxlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBpbnlpbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5weSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIE1lbWJlcjtcbn0pKHNjaGVtYV8xLlNjaGVtYSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBNZW1iZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL3NjaGVtYXMvbWVtYmVyX3NjaGVtYS50c1xuICoqIG1vZHVsZSBpZCA9IDIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgZmV0Y2hfMSA9IHJlcXVpcmUoJy4uL3V0aWxzL2ZldGNoJyk7XG52YXIgbWVtYmVyX21vZGVsXzEgPSByZXF1aXJlKCcuLi9tb2RlbHMvbWVtYmVyX21vZGVsJyk7XG52YXIgcHJvamVjdF9tb2RlbF8xID0gcmVxdWlyZSgnLi4vbW9kZWxzL3Byb2plY3RfbW9kZWwnKTtcbmV4cG9ydHMuUHJvamVjdEFQSSA9IHtcbiAgICBnZXRNZW1iZXJzOiBmdW5jdGlvbiAocHJvamVjdElkKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IG1lbWJlcl9tb2RlbF8xLmRlZmF1bHQuZ2V0UHJvamVjdE1lbWJlcnMocHJvamVjdElkKTtcbiAgICAgICAgcmV0dXJuIGNhY2hlID9cbiAgICAgICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGNhY2hlKTtcbiAgICAgICAgICAgIH0pIDpcbiAgICAgICAgICAgIGZldGNoXzEudGJGZXRjaC5nZXQoe1xuICAgICAgICAgICAgICAgIFR5cGU6ICdwcm9qZWN0cycsXG4gICAgICAgICAgICAgICAgSWQ6IHByb2plY3RJZCxcbiAgICAgICAgICAgICAgICBQYXRoMTogJ21lbWJlcnMnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChtZW1iZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lbWJlcl9tb2RlbF8xLmRlZmF1bHQuYWRkUHJvamVjdE1lbWJlcnMocHJvamVjdElkLCBtZW1iZXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlTWVtYmVyOiBmdW5jdGlvbiAobWVtYmVySWQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoXzEudGJGZXRjaC5kZWxldGUoe1xuICAgICAgICAgICAgVHlwZTogJ21lbWJlcnMnLFxuICAgICAgICAgICAgSWQ6IG1lbWJlcklkXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtZW1iZXJfbW9kZWxfMS5kZWZhdWx0LnJlbW92ZU1lbWJlcihtZW1iZXJJZCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0QWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IHByb2plY3RfbW9kZWxfMS5kZWZhdWx0LmdldFByb2plY3RzKCk7XG4gICAgICAgIHJldHVybiBjYWNoZSA/XG4gICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShjYWNoZSk7XG4gICAgICAgICAgICB9KSA6XG4gICAgICAgICAgICBmZXRjaF8xLnRiRmV0Y2guZ2V0KHtcbiAgICAgICAgICAgICAgICBUeXBlOiAncHJvamVjdHMnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwcm9qZWN0cykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9qZWN0X21vZGVsXzEuZGVmYXVsdC5hZGRQcm9qZWN0cyhwcm9qZWN0cyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9hcGlzL3Byb2plY3RfYXBpLnRzXG4gKiogbW9kdWxlIGlkID0gMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xudmFyIG1vZGVsXzEgPSByZXF1aXJlKCcuL21vZGVsJyk7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgcHJvamVjdF9zY2hlbWFfMSA9IHJlcXVpcmUoJy4uL3NjaGVtYXMvcHJvamVjdF9zY2hlbWEnKTtcbnZhciBQcm9qZWN0TW9kZWwgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQcm9qZWN0TW9kZWwsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUHJvamVjdE1vZGVsKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgUHJvamVjdE1vZGVsLnByb3RvdHlwZS5hZGRQcm9qZWN0cyA9IGZ1bmN0aW9uIChwcm9qZWN0cykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdXRpbHNfMS5kYXRhc1RvU2NoZW1hcyhwcm9qZWN0cywgbmV3IHByb2plY3Rfc2NoZW1hXzEuZGVmYXVsdCgpKTtcbiAgICAgICAgdGhpcy5zZXRDb2xsZWN0aW9uKFwicHJvamVjdHNcIiwgcmVzdWx0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICAgIFByb2plY3RNb2RlbC5wcm90b3R5cGUuZ2V0UHJvamVjdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9uZSgncHJvamVjdHMnKTtcbiAgICB9O1xuICAgIHJldHVybiBQcm9qZWN0TW9kZWw7XG59KShtb2RlbF8xLmRlZmF1bHQpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gbmV3IFByb2plY3RNb2RlbCgpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9tb2RlbHMvcHJvamVjdF9tb2RlbC50c1xuICoqIG1vZHVsZSBpZCA9IDI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xufTtcbnZhciBzY2hlbWFfMSA9IHJlcXVpcmUoJy4vc2NoZW1hJyk7XG52YXIgUHJvamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFByb2plY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gUHJvamVjdCgpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2lkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2NyZWF0b3JJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sb2dvID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnB5ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBpbnlpbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fb3JnYW5pemF0aW9uSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy52aXNpYmlsaXR5ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNyZWF0ZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudXBkYXRlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pc0FyY2hpdmVkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmludml0ZUxpbmsgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaXNTdGFyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhhc1JpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhhc09yZ1JpZ2h0ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm9yZ2FuaXphdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5mb3Jrc0NvdW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRhc2tzQ291bnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucG9zdHNDb3VudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5ldmVudHNDb3VudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy53b3Jrc0NvdW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRhZ3NDb3VudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFJvbGVJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5jcmVhdG9yID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnVucmVhZENvdW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnVucmVhZE1lc3NhZ2VDb3VudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wdXNoU3RhdHVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNhblF1aXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2FuRGVsZXRlID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmNhbkFyY2hpdmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2FuVHJhbnNmZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3JvbGVJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5saW5rID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLm1vYmlsZUludml0ZUxpbmsgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2lnbkNvZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc3RhcnNDb3VudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fcm9vdENvbGxlY3Rpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZGVmYXVsdENvbGxlY3Rpb25JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zaG9ydExpbmsgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuY2FsTGluayA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50YXNrQ2FsTGluayA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fb3JnUm9sZUlkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gUHJvamVjdDtcbn0pKHNjaGVtYV8xLlNjaGVtYSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmRlZmF1bHQgPSBQcm9qZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9zY2hlbWFzL3Byb2plY3Rfc2NoZW1hLnRzXG4gKiogbW9kdWxlIGlkID0gMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=